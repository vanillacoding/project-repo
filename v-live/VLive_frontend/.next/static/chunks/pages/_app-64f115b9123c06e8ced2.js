(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{7861:function(t,e,n){"use strict";n.d(e,{Z:function(){return et}});var r=n(1526),i=Math.abs,o=String.fromCharCode;function s(t){return t.trim()}function a(t,e,n){return t.replace(e,n)}function u(t,e){return t.indexOf(e)}function c(t,e){return 0|t.charCodeAt(e)}function h(t,e,n){return t.slice(e,n)}function f(t){return t.length}function l(t){return t.length}function p(t,e){return e.push(t),t}var d=1,v=1,g=0,y=0,m=0,b="";function w(t,e,n,r,i,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:d,column:v,length:s,return:""}}function I(t,e,n){return w(t,e.root,e.parent,n,e.props,e.children,0)}function T(){return m=y>0?c(b,--y):0,v--,10===m&&(v=1,d--),m}function E(){return m=y<g?c(b,y++):0,v++,10===m&&(v=1,d++),m}function _(){return c(b,y)}function S(){return y}function A(t,e){return h(b,t,e)}function N(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function k(t){return d=v=1,g=f(b=t),y=0,[]}function D(t){return b="",t}function C(t){return s(A(y-1,x(91===t?t+2:40===t?t+1:t)))}function O(t){for(;(m=_())&&m<33;)E();return N(t)>2||N(m)>3?"":" "}function R(t,e){for(;--e&&E()&&!(m<48||m>102||m>57&&m<65||m>70&&m<97););return A(t,S()+(e<6&&32==_()&&32==E()))}function x(t){for(;E();)switch(m){case t:return y;case 34:case 39:return x(34===t||39===t?t:m);case 40:41===t&&x(t);break;case 92:E()}return y}function P(t,e){for(;E()&&t+m!==57&&(t+m!==84||47!==_()););return"/*"+A(e,y-1)+"*"+o(47===t?t:E())}function L(t){for(;!N(_());)E();return A(t,y)}var M="-ms-",F="-moz-",V="-webkit-",j="comm",U="rule",q="decl";function B(t,e){for(var n="",r=l(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function K(t,e,n,r){switch(t.type){case"@import":case q:return t.return=t.return||t.value;case j:return"";case U:t.value=t.props.join(",")}return f(n=B(t.children,r))?t.return=t.value+"{"+n+"}":""}function G(t,e){switch(function(t,e){return(((e<<2^c(t,0))<<2^c(t,1))<<2^c(t,2))<<2^c(t,3)}(t,e)){case 5103:return V+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return V+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return V+t+F+t+M+t+t;case 6828:case 4268:return V+t+M+t+t;case 6165:return V+t+M+"flex-"+t+t;case 5187:return V+t+a(t,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+t;case 5443:return V+t+M+"flex-item-"+a(t,/flex-|-self/,"")+t;case 4675:return V+t+M+"flex-line-pack"+a(t,/align-content|flex-|-self/,"")+t;case 5548:return V+t+M+a(t,"shrink","negative")+t;case 5292:return V+t+M+a(t,"basis","preferred-size")+t;case 6060:return V+"box-"+a(t,"-grow","")+V+t+M+a(t,"grow","positive")+t;case 4554:return V+a(t,/([^-])(transform)/g,"$1-webkit-$2")+t;case 6187:return a(a(a(t,/(zoom-|grab)/,V+"$1"),/(image-set)/,V+"$1"),t,"")+t;case 5495:case 3959:return a(t,/(image-set\([^]*)/,V+"$1$`$1");case 4968:return a(a(t,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+V+t+t;case 4095:case 3583:case 4068:case 2532:return a(t,/(.+)-inline(.+)/,V+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(f(t)-1-e>6)switch(c(t,e+1)){case 109:if(45!==c(t,e+4))break;case 102:return a(t,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+F+(108==c(t,e+3)?"$3":"$2-$3"))+t;case 115:return~u(t,"stretch")?G(a(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==c(t,e+1))break;case 6444:switch(c(t,f(t)-3-(~u(t,"!important")&&10))){case 107:return a(t,":",":"+V)+t;case 101:return a(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+V+(45===c(t,14)?"inline-":"")+"box$3$1"+V+"$2$3$1"+M+"$2box$3")+t}break;case 5936:switch(c(t,e+11)){case 114:return V+t+M+a(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return V+t+M+a(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return V+t+M+a(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return V+t+M+t+t}return t}function H(t){return D(z("",null,null,null,[""],t=k(t),0,[0],t))}function z(t,e,n,r,i,s,u,c,h){for(var l=0,d=0,v=u,g=0,y=0,m=0,b=1,w=1,I=1,A=0,N="",k=i,D=s,x=r,M=N;w;)switch(m=A,A=E()){case 34:case 39:case 91:case 40:M+=C(A);break;case 9:case 10:case 13:case 32:M+=O(m);break;case 92:M+=R(S()-1,7);continue;case 47:switch(_()){case 42:case 47:p($(P(E(),S()),e,n),h);break;default:M+="/"}break;case 123*b:c[l++]=f(M)*I;case 125*b:case 59:case 0:switch(A){case 0:case 125:w=0;case 59+d:y>0&&f(M)-v&&p(y>32?Q(M+";",r,n,v-1):Q(a(M," ","")+";",r,n,v-2),h);break;case 59:M+=";";default:if(p(x=W(M,e,n,l,d,i,c,N,k=[],D=[],v),s),123===A)if(0===d)z(M,e,x,x,k,s,v,c,D);else switch(g){case 100:case 109:case 115:z(t,x,x,r&&p(W(t,x,x,0,0,i,c,N,i,k=[],v),D),i,D,v,c,r?k:D);break;default:z(M,x,x,x,[""],D,v,c,D)}}l=d=y=0,b=I=1,N=M="",v=u;break;case 58:v=1+f(M),y=m;default:if(b<1)if(123==A)--b;else if(125==A&&0==b++&&125==T())continue;switch(M+=o(A),A*b){case 38:I=d>0?1:(M+="\f",-1);break;case 44:c[l++]=(f(M)-1)*I,I=1;break;case 64:45===_()&&(M+=C(E())),g=_(),d=f(N=M+=L(S())),A++;break;case 45:45===m&&2==f(M)&&(b=0)}}return s}function W(t,e,n,r,o,u,c,f,p,d,v){for(var g=o-1,y=0===o?u:[""],m=l(y),b=0,I=0,T=0;b<r;++b)for(var E=0,_=h(t,g+1,g=i(I=c[b])),S=t;E<m;++E)(S=s(I>0?y[E]+" "+_:a(_,/&\f/g,y[E])))&&(p[T++]=S);return w(t,e,n,0===o?U:f,p,d,v)}function $(t,e,n){return w(t,e,n,j,o(m),h(t,2,-2),0)}function Q(t,e,n,r){return w(t,e,n,q,h(t,0,r),h(t,r+1,-1),r)}var X=function(t,e){return D(function(t,e){var n=-1,r=44;do{switch(N(r)){case 0:38===r&&12===_()&&(e[n]=1),t[n]+=L(y-1);break;case 2:t[n]+=C(r);break;case 4:if(44===r){t[++n]=58===_()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=o(r)}}while(r=E());return t}(k(t),e))},Y=new WeakMap,J=function(t){if("rule"===t.type&&t.parent&&t.length){for(var e=t.value,n=t.parent,r=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||Y.get(n))&&!r){Y.set(t,!0);for(var i=[],o=X(e,i),s=n.props,a=0,u=0;a<o.length;a++)for(var c=0;c<s.length;c++,u++)t.props[u]=i[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},Z=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}},tt=[function(t,e,n,r){if(!t.return)switch(t.type){case q:t.return=G(t.value,t.length);break;case"@keyframes":return B([I(a(t.value,"@","@"+V),t,"")],r);case U:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return B([I(a(e,/:(read-\w+)/,":-moz-$1"),t,"")],r);case"::placeholder":return B([I(a(e,/:(plac\w+)/,":-webkit-input-$1"),t,""),I(a(e,/:(plac\w+)/,":-moz-$1"),t,""),I(a(e,/:(plac\w+)/,M+"input-$1"),t,"")],r)}return""}))}}],et=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var i=t.stylisPlugins||tt;var o,s,a={},u=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)a[e[n]]=!0;u.push(t)}));var c,h,f=[K,(h=function(t){c.insert(t)},function(t){t.root||(t=t.return)&&h(t)})],p=function(t){var e=l(t);return function(n,r,i,o){for(var s="",a=0;a<e;a++)s+=t[a](n,r,i,o)||"";return s}}([J,Z].concat(i,f));s=function(t,e,n,r){c=n,B(H(t?t+"{"+e.styles+"}":e.styles),p),r&&(d.inserted[e.name]=!0)};var d={key:e,sheet:new r.m({key:e,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend}),nonce:t.nonce,inserted:a,registered:{},insert:s};return d.sheet.hydrate(u),d}},7866:function(t,e){"use strict";e.Z=function(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}},8135:function(t,e,n){"use strict";n.d(e,{C:function(){return d},E:function(){return _},T:function(){return y},_:function(){return v},a:function(){return w},b:function(){return I},c:function(){return E},h:function(){return l},u:function(){return m},w:function(){return g}});var r=n(7294),i=n(7861),o=n(7462),s=function(t){var e=new WeakMap;return function(n){if(e.has(n))return e.get(n);var r=t(n);return e.set(n,r),r}},a=n(8679),u=n.n(a),c=function(t,e){return u()(t,e)},h=n(444),f=n(4199),l=Object.prototype.hasOwnProperty,p=(0,r.createContext)("undefined"!==typeof HTMLElement?(0,i.Z)({key:"css"}):null);var d=p.Provider,v=function(){return(0,r.useContext)(p)},g=function(t){return(0,r.forwardRef)((function(e,n){var i=(0,r.useContext)(p);return t(e,i,n)}))},y=(0,r.createContext)({});var m=function(){return(0,r.useContext)(y)},b=s((function(t){return s((function(e){return function(t,e){return"function"===typeof e?e(t):(0,o.Z)({},t,e)}(t,e)}))})),w=function(t){var e=(0,r.useContext)(y);return t.theme!==e&&(e=b(e)(t.theme)),(0,r.createElement)(y.Provider,{value:e},t.children)};function I(t){var e=t.displayName||t.name||"Component",n=function(e,n){var i=(0,r.useContext)(y);return(0,r.createElement)(t,(0,o.Z)({theme:i,ref:n},e))},i=(0,r.forwardRef)(n);return i.displayName="WithTheme("+e+")",c(i,t)}var T="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",E=function(t,e){var n={};for(var r in e)l.call(e,r)&&(n[r]=e[r]);return n[T]=t,n},_=g((function(t,e,n){var i=t.css;"string"===typeof i&&void 0!==e.registered[i]&&(i=e.registered[i]);var o=t[T],s=[i],a="";"string"===typeof t.className?a=(0,h.f)(e.registered,s,t.className):null!=t.className&&(a=t.className+" ");var u=(0,f.O)(s,void 0,(0,r.useContext)(y));(0,h.M)(e,u,"string"===typeof o);a+=e.key+"-"+u.name;var c={};for(var p in t)l.call(t,p)&&"css"!==p&&p!==T&&(c[p]=t[p]);return c.ref=n,c.className=a,(0,r.createElement)(o,c)}))},4199:function(t,e,n){"use strict";n.d(e,{O:function(){return v}});var r=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},i={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},o=n(7866),s=/[A-Z]|^ms/g,a=/_EMO_([^_]+?)_([^]*?)_EMO_/g,u=function(t){return 45===t.charCodeAt(1)},c=function(t){return null!=t&&"boolean"!==typeof t},h=(0,o.Z)((function(t){return u(t)?t:t.replace(s,"-$&").toLowerCase()})),f=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(a,(function(t,e,n){return p={name:e,styles:n,next:p},e}))}return 1===i[t]||u(t)||"number"!==typeof e||0===e?e:e+"px"};function l(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return p={name:n.name,styles:n.styles,next:p},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)p={name:r.name,styles:r.styles,next:p},r=r.next;return n.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=l(t,e,n[i])+";";else for(var o in n){var s=n[o];if("object"!==typeof s)null!=e&&void 0!==e[s]?r+=o+"{"+e[s]+"}":c(s)&&(r+=h(o)+":"+f(o,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=e&&void 0!==e[s[0]]){var a=l(t,e,s);switch(o){case"animation":case"animationName":r+=h(o)+":"+a+";";break;default:r+=o+"{"+a+"}"}}else for(var u=0;u<s.length;u++)c(s[u])&&(r+=h(o)+":"+f(o,s[u])+";")}return r}(t,e,n);case"function":if(void 0!==t){var i=p,o=n(t);return p=i,l(t,e,o)}break;case"string":}if(null==e)return n;var s=e[n];return void 0!==s?s:n}var p,d=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var v=function(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var i=!0,o="";p=void 0;var s=t[0];null==s||void 0===s.raw?(i=!1,o+=l(n,e,s)):o+=s[0];for(var a=1;a<t.length;a++)o+=l(n,e,t[a]),i&&(o+=s[a]);d.lastIndex=0;for(var u,c="";null!==(u=d.exec(o));)c+="-"+u[1];return{name:r(o)+c,styles:o,next:p}}},1526:function(t,e,n){"use strict";n.d(e,{m:function(){return r}});var r=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(r){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}()},444:function(t,e,n){"use strict";n.d(e,{f:function(){return r},M:function(){return i}});function r(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):r+=n+" "})),r}var i=function(t,e,n){var r=t.key+"-"+e.name;if(!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles),void 0===t.inserted[e.name]){var i=e;do{t.insert(e===i?"."+r:"",i,t.sheet,!0);i=i.next}while(void 0!==i)}}},6983:function(t,e,n){"use strict";n.d(e,{Z:function(){return I}});var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create;Object.create;var i,o,s=n(8448),a=n(8886),u=n(4594),c=((i={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),h=new s.LL("app","Firebase",c),f="@firebase/app",l="[DEFAULT]",p=((o={})[f]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/app-check"]="fire-app-check",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),d=new u.Yd("@firebase/app"),v=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=l),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=l),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"===typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=l);var a=o.name;if("string"!==typeof a||!a)throw h.create("bad-app-name",{appName:String(a)});if((0,s.r3)(e,a))throw h.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}o(new a.wA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!==typeof t)throw h.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||l,!(0,s.r3)(e,t))throw h.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return d.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!==typeof t[a])throw h.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.ZB)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,f=Object.keys(e);c<f.length;c++){var l=f[c];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(v);return e.INTERNAL=r(r({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=g;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",(function(t){return new y(t)}),"PRIVATE")),t.registerVersion(f,"0.6.30",e),t.registerVersion("fire-js","")}(w);var I=w},8886:function(t,e,n){"use strict";n.d(e,{wA:function(){return c},H0:function(){return l}});function r(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function i(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;function o(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function a(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;var u=n(8448),c=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),h="[DEFAULT]",f=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new u.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:h})}catch(p){}try{for(var r=o(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var a=s(i.value,2),u=a[0],c=a[1],f=this.normalizeInstanceIdentifier(u);try{var l=this.getOrInitializeService({instanceIdentifier:f});c.resolve(l)}catch(p){}}}catch(d){e={error:d}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=h),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(a(a([],s(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),s(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=h),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=h),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:a,options:i});try{for(var c=o(this.instancesDeferred.entries()),h=c.next();!h.done;h=c.next()){var f=s(h.value,2),l=f[0],p=f[1];a===this.normalizeInstanceIdentifier(l)&&p.resolve(u)}}catch(d){e={error:d}}finally{try{h&&!h.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return u},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var s=o(i),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(h){n={error:h}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===h?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=h),this.component?this.component.multipleInstances?t:h:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();var l=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new f(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},4594:function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{in:function(){return o},Yd:function(){return f},Ub:function(){return l},Am:function(){return p}});var o,s=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},f=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function l(t){s.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++){n(i[r])}}},8448:function(t,e,n){"use strict";n.d(e,{BH:function(){return h},LL:function(){return E},r3:function(){return A},Sg:function(){return f},ne:function(){return N},p$:function(){return u},ZB:function(){return c},m9:function(){return C},z$:function(){return l},jU:function(){return v},ru:function(){return g},d:function(){return m},w1:function(){return b},uI:function(){return p},UG:function(){return d},b$:function(){return y},G6:function(){return I},Mn:function(){return w}});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create;Object.create;var o=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,f=(3&o)<<4|a>>4,l=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(l=64)),r.push(n[h],n[f],n[l],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var f=a<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},a=function(t){return function(t){var e=o(t);return s.encodeByteArray(e,!0)}(t).replace(/\./g,"")};function u(t){return c(void 0,t)}function c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=c(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function f(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=i({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(s)),""].join(".")}function l(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())}function d(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function v(){return"object"===typeof self&&self.self===self}function g(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function y(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function m(){return l().indexOf("Electron/")>=0}function b(){var t=l();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return l().indexOf("MSAppHost/")>=0}function I(){return!d()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var T=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,E.prototype.create),o}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),E=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?_(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new T(i,a,r);return u},t}();function _(t,e){return t.replace(S,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var S=/\{\$([^}]+)}/g;function A(t,e){return Object.prototype.hasOwnProperty.call(t,e)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);i=(a<<5|a>>>27)+o+f+s+n[r]&4294967295;f=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();function N(t,e){var n=new k(t,e);return n.subscribe.bind(n)}var k=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=D),void 0===r.error&&(r.error=D),void 0===r.complete&&(r.complete=D);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function D(){}function C(t){return t&&t._delegate?t._delegate:t}},5503:function(t,e,n){"use strict";n.d(e,{Z:function(){return r.Z}});var r=n(6983),i="8.10.0";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},7397:function(t,e,n){"use strict";var r=n(6983);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var i=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function s(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,n){if(n){var r=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in r||(r[s]={}),r=r[s]}(n=n(o=r[t=t[t.length-1]]))!=o&&null!=n&&e(r,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=s(t),o=i.next();!o.done;o=i.next())r(o.value).Ra(e,n)}))},e.all=function(t){var n=s(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,r(i.value).Ra(o(s.length-1),e),i=n.next()}while(!i.done)}))},e}));var a=a||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,h=null;function f(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""}function l(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function y(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++b)}var m="closure_uid_"+(1e9*Math.random()>>>0),b=0;function w(t,e,n){return t.call.apply(t.bind,arguments)}function I(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function T(t,e,n){return(T=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:I).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now;function S(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function A(t){return t}function N(t,e,n){this.code=C+t,this.message=e||O[t]||"",this.a=n||null}function k(t){var e=t&&t.code;return e?new N(e.substring(C.length),t.message,t.serverResponse):null}S(N,Error),N.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},N.prototype.toJSON=function(){return this.w()};var D,C="auth/",O={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},R={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function x(t){for(var e in R)if(R[e].id===t)return{firebaseEndpoint:(t=R[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function P(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function L(t){if(Error.captureStackTrace)Error.captureStackTrace(this,L);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function M(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");L.call(this,n+t[r])}function F(t,e){throw new M("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function V(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function j(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function U(){this.b=this.a=null}D=x("__EID__")?"__EID__":void 0,S(L,Error),L.prototype.name="CustomError",S(M,L),M.prototype.name="AssertionError",V.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var q=new V((function(){return new K}),(function(t){t.reset()}));function B(){var t=we,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function K(){this.next=this.b=this.a=null}U.prototype.add=function(t,e){var n=q.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},K.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},K.prototype.reset=function(){this.next=this.b=this.a=null};var G=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},$=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Q(t,e){return 0<=G(t,e)}function X(t,e){var n;return(n=0<=(e=G(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function J(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,st=/'/g,at=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function ht(t,e){return t<e?-1:t>e?1:0}t:{var ft=u.navigator;if(ft){var lt=ft.userAgent;if(lt){tt=lt;break t}}tt=""}function pt(t){return ct(tt,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<yt.length;o++)n=yt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;F("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function wt(t,e){this.a=t===_t&&e||"",this.b=Et}function It(t){return t instanceof wt&&t.constructor===wt&&t.b===Et?t.a:(F("expected object of type Const, got '"+t+"'"),"type_error:Const")}wt.prototype.ta=!0,wt.prototype.sa=function(){return this.a},wt.prototype.toString=function(){return"Const{"+this.a+"}"};var Tt,Et={},_t={};function St(){if(void 0===Tt){var t=null,e=u.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:A,createScript:A,createScriptURL:A})}catch(n){u.console&&u.console.error(n.message)}Tt=t}else Tt=t}return Tt}function At(t,e){this.a=e===Ot?t:""}function Nt(t){return t instanceof At&&t.constructor===At?t.a:(F("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function kt(t,e){var n=It(t);if(!Ct.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=St();return new At(t=e?e.createScriptURL(t):t,Ot)}(t=n.replace(Dt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof wt?It(t):encodeURIComponent(String(t))})))}At.prototype.ta=!0,At.prototype.sa=function(){return this.a.toString()},At.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Dt=/%{(\w+)}/g,Ct=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ot={};function Rt(t,e){this.a=e===jt?t:""}function xt(t){return t instanceof Rt&&t.constructor===Rt?t.a:(F("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}Rt.prototype.ta=!0,Rt.prototype.sa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Pt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Lt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Mt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ft(t){if(t instanceof Rt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Mt.test(t))t=new Rt(t,jt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Lt);t=e&&Pt.test(e[1])?new Rt(t,jt):null}return t}function Vt(t){return t instanceof Rt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Mt.test(t)||(t="about:invalid#zClosurez"),new Rt(t,jt))}var jt={},Ut=new Rt("about:invalid#zClosurez",jt);function qt(t,e,n){this.a=n===Bt?t:""}qt.prototype.ta=!0,qt.prototype.sa=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Bt={};function Kt(t,e,n,r){return t=t instanceof Rt?t:Vt(t),e=e||u,n=n instanceof wt?It(n):n||"",e.open(xt(t),n,r,void 0)}function Gt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ht(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(st,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(at,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=l;var Wt,$t=pt("Opera"),Qt=pt("Trident")||pt("MSIE"),Xt=pt("Edge"),Yt=Xt||Qt,Jt=pt("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!pt("Edge"))&&!(pt("Trident")||pt("MSIE"))&&!pt("Edge"),Zt=ct(tt.toLowerCase(),"webkit")&&!pt("Edge");function te(){var t=u.document;return t?t.documentMode:void 0}t:{var ee="",ne=function(){var t=tt;return Jt?/rv:([^\);]+)(\)|;)/.exec(t):Xt?/Edge\/([\d\.]+)/.exec(t):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Zt?/WebKit\/(\S+)/.exec(t):$t?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(ne&&(ee=ne?ne[1]:""),Qt){var re=te();if(null!=re&&re>parseFloat(ee)){Wt=String(re);break t}}Wt=ee}var ie,oe={};function se(t){return function(t,e){var n=oe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=et(String(Wt)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ht(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ht(0==s[2].length,0==a[2].length)||ht(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(u.document&&Qt){var ae=te();ie=ae||(parseInt(Wt,10)||void 0)}else ie=void 0;var ue=ie;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(ls){}var ce=!Qt||9<=Number(ue);function he(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function fe(t,e){dt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:de.hasOwnProperty(n)?t.setAttribute(de[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var le,pe,de={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ve(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){s="function"==typeof o.item;break t}}s=!1}H(s?Z(o):o,r)}}}function ge(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ye(t){u.setTimeout((function(){throw t}),0)}function me(t,e){pe||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);pe=function(){t.then(Ie)}}else pe=function(){var t=Ie;!v(u.setImmediate)||u.Window&&u.Window.prototype&&!pt("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(le||(le=function(){var t=u.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!pt("Presto")&&(t=function(){var t=ge(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=T((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!pt("Trident")&&!pt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),le(t)):u.setImmediate(t)}}(),be||(pe(),be=!0),we.add(t,e)}var be=!1,we=new U;function Ie(){for(var t;t=B();){try{t.a.call(t.b)}catch(e){ye(e)}j(q,t)}be=!1}function Te(t,e){if(this.a=Ee,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){Me(n,_e,t)}),(function(t){if(!(t instanceof Ke))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Me(n,Se,t)}))}catch(r){Me(this,Se,r)}}var Ee=0,_e=2,Se=3;function Ae(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ae.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ne=new V((function(){return new Ae}),(function(t){t.reset()}));function ke(t,e,n){var r=Ne.get();return r.g=t,r.b=e,r.f=n,r}function De(t){if(t instanceof Te)return t;var e=new Te(l);return Me(e,_e,t),e}function Ce(t){return new Te((function(e,n){n(t)}))}function Oe(t,e,n){Fe(t,e,n,null)||me(E(e,t))}function Re(t){return new Te((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Oe(t[o],E(i,o,!0),E(i,o,!1));else e(r)}))}function xe(t,e){if(t.a==Ee)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Ee&&1==r?xe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):je(n),Ue(n,i,Se,e)))}t.c=null}else Me(t,Se,e)}function Pe(t,e){t.b||t.a!=_e&&t.a!=Se||Ve(t),t.f?t.f.next=e:t.b=e,t.f=e}function Le(t,e,n,r){var i=ke(null,null,null);return i.a=new Te((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ke?o(e):t(i)}catch(s){o(s)}}:o})),i.a.c=t,Pe(t,i),i.a}function Me(t,e,n){t.a==Ee&&(t===n&&(e=Se,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Fe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ve(t),e!=Se||n instanceof Ke||function(t,e){t.g=!0,me((function(){t.g&&Be.call(null,e)}))}(t,n)))}function Fe(t,e,n,r){if(t instanceof Te)return Pe(t,ke(e||l,n||null,r)),!0;if(P(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(u){o(u)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Ve(t){t.h||(t.h=!0,me(t.gc,t))}function je(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ue(t,e,n,r){if(n==Se&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,qe(e,n,r);else try{e.c?e.g.call(e.f):qe(e,n,r)}catch(i){Be.call(null,i)}j(Ne,e)}function qe(t,e,n){e==_e?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Te.prototype.then=function(t,e,n){return Le(this,v(t)?t:null,v(e)?e:null,n)},Te.prototype.$goog_Thenable=!0,(t=Te.prototype).oa=function(t,e){return(t=ke(t,t,e)).c=!0,Pe(this,t),this},t.o=function(t,e){return Le(this,null,t,e)},t.cancel=function(t){if(this.a==Ee){var e=new Ke(t);me((function(){xe(this,e)}),this)}},t.$c=function(t){this.a=Ee,Me(this,_e,t)},t.ad=function(t){this.a=Ee,Me(this,Se,t)},t.gc=function(){for(var t;t=je(this);)Ue(this,t,this.a,this.i);this.h=!1};var Be=ye;function Ke(t){L.call(this,t)}function Ge(){0!=He&&(ze[y(this)]=this),this.ya=this.ya,this.pa=this.pa}S(Ke,L),Ke.prototype.name="cancel";var He=0,ze={};function We(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=He)){var e=y(t);if(0!=He&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ze[e]}}Ge.prototype.ya=!1,Ge.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var $e=Object.freeze||function(t){return t},Qe=!Qt||9<=Number(ue),Xe=Qt&&!se("9"),Ye=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",l,e),u.removeEventListener("test",l,e)}catch(n){}return t}();function Je(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if(Je.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Jt){t:{try{zt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Je.prototype.preventDefault=function(){this.defaultPrevented=!0},S(Ze,Je);var tn=$e({2:"touch",3:"pen",4:"mouse"});Ze.prototype.preventDefault=function(){Ze.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Xe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Ze.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++nn,this.wa=this.Qa=!1}function on(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function sn(t){this.src=t,this.a={},this.b=0}function an(t,e){var n=e.type;n in t.a&&X(t.a[n],e)&&(on(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function un(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}sn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=un(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):((e=new rn(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),hn={};function fn(t,e,n,r,i){if(r&&r.once)pn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else n=Tn(n),t&&t[en]?_n(t,e,n,g(r)?!!r.capture:!!r,i):ln(t,e,n,!1,r,i)}function ln(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=g(i)?!!i.capture:!!i,a=wn(t);if(a||(t[cn]=a=new sn(t)),!(n=a.add(e,n,r,s,o)).proxy){if(r=function(){var t=bn,e=Qe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ye||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else n=Tn(n),t&&t[en]?Sn(t,e,n,g(r)?!!r.capture:!!r,i):ln(t,e,n,!0,r,i)}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=Tn(n),t&&t[en]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=un(o=t.a[e],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=wn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&vn(n))}function vn(t){if("number"!==typeof t&&t&&!t.wa){var e=t.src;if(e&&e[en])an(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wn(e))?(an(n,t),0==n.b&&(n.src=null,e[cn]=null)):on(t)}}}function gn(t){return t in hn?hn[t]:hn[t]="on"+t}function yn(t,e,n,r){var i=!0;if((t=wn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=mn(o,r),i=i&&!1!==o)}return i}function mn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&vn(t),n.call(r,e)}function bn(t,e){if(t.wa)return!0;if(!Qe){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ze(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=yn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=yn(r[i],t,!1,e),n=n&&o}return n}return mn(t,new Ze(e,this))}function wn(t){return(t=t[cn])instanceof sn?t:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(t){return v(t)?t:(t[In]||(t[In]=function(e){return t.handleEvent(e)}),t[In])}function En(){Ge.call(this),this.v=new sn(this),this.bc=this,this.hb=null}function _n(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Sn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function An(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&an(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Nn(t,e,n){if(v(t))n&&(t=T(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=T(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function kn(t){var e=null;return new Te((function(n,r){-1==(e=Nn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw u.clearTimeout(e),t}))}function Dn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"===typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Cn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(d(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function On(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof On)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Rn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}S(En,Ge),En.prototype[en]=!0,En.prototype.addEventListener=function(t,e,n,r){fn(this,t,e,n,r)},En.prototype.removeEventListener=function(t,e,n,r){dn(this,t,e,n,r)},En.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"===typeof t)t=new Je(t,n);else if(t instanceof Je)t.target=t.target||n;else{var i=t;mt(t=new Je(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=An(s,r,!0,t)&&i}if(i=An(s=t.b=n,r,!0,t)&&i,i=An(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=An(s=t.b=e[o],r,!1,t)&&i;return i},En.prototype.Da=function(){if(En.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)on(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=On.prototype).X=function(){Rn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Rn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return xn(this.b,t)?this.b[t]:e},t.set=function(t,e){xn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ln(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Ln?(this.i=void 0!==e?e:t.i,Mn(this,t.c),this.l=t.l,this.a=t.a,Fn(this,t.g),this.f=t.f,Vn(this,rr(t.b)),this.h=t.h):t&&(n=String(t).match(Pn))?(this.i=!!e,Mn(this,n[1]||"",!0),this.l=Kn(n[2]||""),this.a=Kn(n[3]||"",!0),Fn(this,n[4]),this.f=Kn(n[5]||"",!0),Vn(this,n[6]||"",!0),this.h=Kn(n[7]||"")):(this.i=!!e,this.b=new Yn(null,this.i))}function Mn(t,e,n){t.c=n?Kn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Fn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Vn(t,e,n){e instanceof Yn?(t.b=e,function(t,e){e&&!t.f&&(Jn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Gn(e,Qn)),t.b=new Yn(e,t.i))}function jn(t,e,n){t.b.set(e,n)}function Un(t,e){return t.b.get(e)}function qn(t){return t instanceof Ln?new Ln(t):new Ln(t,void 0)}function Bn(t,e,n,r){var i=new Ln(null,void 0);return t&&Mn(i,t),e&&(i.a=e),n&&Fn(i,n),r&&(i.f=r),i}function Kn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Gn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ln.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Gn(e,zn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Gn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Gn(n,"/"==n.charAt(0)?$n:Wn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Gn(n,Xn)),t.join("")},Ln.prototype.resolve=function(t){var e=new Ln(this),n=!!t.c;n?Mn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Fn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Vn(e,rr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var zn=/[#\/\?@]/g,Wn=/[#\?:]/g,$n=/[#\?]/g,Qn=/[#\?@]/g,Xn=/#/g;function Yn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Jn(t){t.a||(t.a=new On,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Zn(t){var e=Cn(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new Yn(null,void 0);t=Dn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function tr(t,e){Jn(t),e=ir(t,e),xn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Rn(t)))}function er(t,e){return Jn(t),e=ir(t,e),xn(t.a.b,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.c=null,t.a.set(ir(t,e),Z(n)),t.b+=n.length)}function rr(t){var e=new Yn;return e.c=t.c,t.a&&(e.a=new On(t.a),e.b=t.b),e}function ir(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function or(t){var e=[];return ar(new sr,t,e),e.join("")}function sr(){}function ar(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ar(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),hr(r,n),n.push(":"),ar(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":hr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Yn.prototype).add=function(t,e){Jn(this),this.c=null,t=ir(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Jn(this),this.a.forEach((function(n,r){H(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Jn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Jn(this);var e=[];if("string"===typeof t)er(this,t)&&(e=J(e,this.a.get(ir(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},t.set=function(t,e){return Jn(this),this.c=null,er(this,t=ir(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function hr(t,e){e.push('"',t.replace(cr,(function(t){var e=ur[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ur[t]=e),e})),'"')}function fr(){var t=Or();return Qt&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function lr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function pr(t,e){e=e||u.window;var n="about:blank";t&&(n=xt(Ft(t)||Ut)),e.location.href=n}function dr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<dr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function vr(t){return!!((t=(t||Or()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function gr(t){t=t||u.window;try{t.close()}catch(e){}}function yr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Or().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),kr(Or())==Ar&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Rt?n:Ft("undefined"!=typeof n.href?n.href:String(n))||Ut,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((pt("iPhone")&&!pt("iPod")&&!pt("iPad")||pt("iPad")||pt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(s=ge(document,"A"),"HTMLAnchorElement"),e=e instanceof Rt?e:Vt(e),s.href=xt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Kt("",r,n,s),t=xt(e),s&&(Yt&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ht(t)+'">',t=new qt(t=(r=St())?r.createHTML(t):t,null,Bt),r=s.document)&&(r.write(function(t){return t instanceof qt&&t.constructor===qt?t.a:(F("expected object of type SafeHtml, got '"+t+"' of type "+p(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Kt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var mr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function wr(){var t=null;return new Te((function(e){"complete"==u.document.readyState?e():(t=function(){e()},pn(window,"load",t))})).o((function(e){throw dn(window,"load",t),e}))}function Ir(t){return t=t||Or(),!("file:"!==Mr()&&"ionic:"!==Mr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Tr(){var t=u.window;try{return!(!t||t==t.top)}catch(e){return!1}}function Er(){return"undefined"!==typeof u.WorkerGlobalScope&&"function"===typeof u.importScripts}function _r(){return r.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.Z.INTERNAL.hasOwnProperty("node")?"Node":Er()?"Worker":"Browser"}function Sr(){var t=_r();return"ReactNative"===t||"Node"===t}var Ar="Firefox",Nr="Chrome";function kr(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?Ar:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Nr:"Safari"}var Dr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Cr(t,e){e=e||[];var n,r=[],i={};for(n in Dr)i[Dr[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=_r())?r=kr(i=Or()):"Worker"===r&&(r=kr(i=Or())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Or(){return u.navigator&&u.navigator.userAgent||""}function Rr(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function xr(){try{var t=u.localStorage,e=qr();if(t)return t.setItem(e,"1"),t.removeItem(e),!fr()||!!u.indexedDB}catch(n){return Er()&&!!u.indexedDB}return!1}function Pr(){return(Lr()||"chrome-extension:"===Mr()||Ir())&&!Sr()&&xr()&&!Er()}function Lr(){return"http:"===Mr()||"https:"===Mr()}function Mr(){return u.location&&u.location.protocol||null}function Fr(t){return!vr(t=t||Or())&&kr(t)!=Ar}function Vr(t){return"undefined"===typeof t?null:or(t)}function jr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Ur(t){if(null!==t)return JSON.parse(t)}function qr(t){return t||Math.floor(1e9*Math.random()).toString()}function Br(t){return"Safari"!=kr(t=t||Or())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Kr(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Gr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Or(),e=_r(),this.b=vr(t)||"ReactNative"===e}function Hr(){var t=u.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function zr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Wr(){return!(!Rr("fireauth.oauthhelper",u)&&!Rr("fireauth.iframe",u))}Gr.prototype.get=function(){var t=u.navigator;return!t||"boolean"!==typeof t.onLine||!Lr()&&"chrome-extension:"!==Mr()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var $r,Qr={};function Xr(t){Qr[t]||(Qr[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var Yr={};Object.defineProperty(Yr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Yr,"abcd",{configurable:!0,enumerable:!0,value:2}),$r=2==Yr.abcd}catch(ls){$r=!1}function Jr(t,e,n){$r?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Jr(t,n,e[n])}function ti(t){var e={};return Zr(e,t),e}function ei(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Jr(e,n,ei(t[n]));return e}function ni(t){var e=t&&(t[ai]?"phone":null);if(!(e&&t&&t[si]))throw new N("internal-error","Internal assert: invalid MultiFactorInfo object");Jr(this,"uid",t[si]),Jr(this,"displayName",t[ii]||null);var n=null;t[oi]&&(n=new Date(t[oi]).toUTCString()),Jr(this,"enrollmentTime",n),Jr(this,"factorId",e)}function ri(t){try{var e=new ui(t)}catch(n){e=null}return e}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",si="mfaEnrollmentId",ai="phoneInfo";function ui(t){ni.call(this,t),Jr(this,"phoneNumber",t[ai])}function ci(t){var e={},n=t[pi],r=t[vi],i=t[gi];if(t=ri(t[di]),!i||i!=fi&&i!=li&&!n||i==li&&!r||i==hi&&!t)throw Error("Invalid checkActionCode response!");i==li?(e[mi]=n||null,e[wi]=n||null,e[yi]=r):(e[mi]=r||null,e[wi]=r||null,e[yi]=n||null),e[bi]=t||null,Jr(this,Ti,i),Jr(this,Ii,ei(e))}S(ui,ni),ui.prototype.w=function(){var t=ui.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var hi="REVERT_SECOND_FACTOR_ADDITION",fi="EMAIL_SIGNIN",li="VERIFY_AND_CHANGE_EMAIL",pi="email",di="mfaInfo",vi="newEmail",gi="requestType",yi="email",mi="fromEmail",bi="multiFactorInfo",wi="previousEmail",Ii="data",Ti="operation";function Ei(t){var e=Un(t=qn(t),_i)||null,n=Un(t,Si)||null,r=Un(t,ki)||null;if(r=r&&Ci[r]||null,!e||!n||!r)throw new N("argument-error",_i+", "+Si+"and "+ki+" are required in a valid action code URL.");Zr(this,{apiKey:e,operation:r,code:n,continueUrl:Un(t,Ai)||null,languageCode:Un(t,Ni)||null,tenantId:Un(t,Di)||null})}var _i="apiKey",Si="oobCode",Ai="continueUrl",Ni="languageCode",ki="mode",Di="tenantId",Ci={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:hi,signIn:fi,verifyAndChangeEmail:li,verifyEmail:"VERIFY_EMAIL"};function Oi(t){try{return new Ei(t)}catch(e){return null}}function Ri(t){var e=t[Fi];if("undefined"===typeof e)throw new N("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new N("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[xi];if(n&&"object"===typeof n){e=n[Ui];var r=n[Vi];if(n=n[ji],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new N("argument-error",Vi+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new N("argument-error",ji+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new N("argument-error",Ui+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new N("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new N("argument-error",xi+" property must be a non null object when specified.");if(this.f=null,(e=t[Mi])&&"object"===typeof e){if("string"===typeof(e=e[qi])&&e.length)this.f=e;else if("undefined"!==typeof e)throw new N("argument-error",qi+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new N("argument-error",Mi+" property must be a non null object when specified.");if("undefined"!==typeof(e=t[Li])&&"boolean"!==typeof e)throw new N("argument-error",Li+" property must be a boolean when specified.");if(this.c=!!e,"undefined"!==typeof(t=t[Pi])&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new N("argument-error",Pi+" property must be a non empty string when specified.");this.i=t||null}var xi="android",Pi="dynamicLinkDomain",Li="handleCodeInApp",Mi="iOS",Fi="url",Vi="installApp",ji="minimumVersion",Ui="packageName",qi="bundleId";function Bi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ki=null;function Gi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ki[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ki){Ki={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ki[o]&&(Ki[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e.push(t)})),e}function Hi(t){var e=Wi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function zi(t){try{return new Hi(t)}catch(e){return null}}function Wi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Gi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(u){}return null}Hi.prototype.T=function(){return this.f},Hi.prototype.l=function(){return this.c},Hi.prototype.toString=function(){return this.h};var $i="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Qi=["client_id","response_type","scope","redirect_uri","state"],Xi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Qi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Qi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Qi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:$i},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Yi(t){for(var e in Xi)if(Xi[e].fa==t)return Xi[e];return null}function Ji(t){var e={};e["facebook.com"]=ro,e["google.com"]=oo,e["github.com"]=io,e["twitter.com"]=so;var n=t&&t[to];try{if(n)return e[n]?new e[n](t):new no(t);if("undefined"!==typeof t[Zi])return new eo(t)}catch(r){}return null}var Zi="idToken",to="providerId";function eo(t){var e=t[to];if(!e&&t[Zi]){var n=zi(t[Zi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Jr(this,"providerId",e),Jr(this,"isNewUser",n)}function no(t){eo.call(this,t),Jr(this,"profile",ei((t=Ur(t.rawUserInfo||"{}"))||{}))}function ro(t){if(no.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function io(t){if(no.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",this.profile&&this.profile.login||null)}function oo(t){if(no.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function so(t){if(no.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",t.screenName||null)}function ao(t){var e=qn(t),n=Un(e,"link"),r=Un(qn(n),"link");return e=Un(e,"deep_link_id"),Un(qn(e),"link")||e||r||n||t}function uo(t,e){if(!t&&!e)throw new N("internal-error","Internal assert: no raw session string available");if(t&&e)throw new N("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?co:ho}S(no,eo),S(ro,no),S(io,no),S(oo,no),S(so,no);var co="enroll",ho="signin";function fo(){}function lo(t,e){return t.then((function(t){if(t[na]){var n=zi(t[na]);if(!n||e!=n.i)throw new N("user-mismatch");return t}throw new N("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==C+"user-not-found"?new N("user-mismatch"):t}))}function po(t,e){if(!e)throw new N("internal-error","failed to construct a credential");this.a=e,Jr(this,"providerId",t),Jr(this,"signInMethod",t)}function vo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function go(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new po(t.providerId,t.pendingToken)}catch(e){}return null}function yo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Jr(this,"idToken",e.idToken),e.accessToken&&Jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new N("internal-error","failed to construct a credential");Jr(this,"accessToken",e.oauthToken),Jr(this,"secret",e.oauthTokenSecret)}Jr(this,"providerId",t),Jr(this,"signInMethod",n)}function mo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function bo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new yo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function wo(t,e){this.Qc=e||[],Zr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Yi(t)||{}).Ja||null,this.pb=null}function Io(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new N("argument-error",'SAML provider IDs must be prefixed with "saml."');wo.call(this,t,[])}function To(t){wo.call(this,t,Qi),this.a=[]}function Eo(){To.call(this,"facebook.com")}function _o(t){if(!t)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function So(){To.call(this,"github.com")}function Ao(t){if(!t)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new So).credential({accessToken:e})}function No(){To.call(this,"google.com"),this.Ca("profile")}function ko(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new No).credential({idToken:n,accessToken:e})}function Do(){wo.call(this,"twitter.com",$i)}function Co(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new N("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new yo("twitter.com",n,"twitter.com")}function Oo(t,e,n){this.a=t,this.f=e,Jr(this,"providerId","password"),Jr(this,"signInMethod",n===xo.EMAIL_LINK_SIGN_IN_METHOD?xo.EMAIL_LINK_SIGN_IN_METHOD:xo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ro(t){return t&&t.email&&t.password?new Oo(t.email,t.password,t.signInMethod):null}function xo(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function Po(t,e){if(!(e=Lo(e)))throw new N("argument-error","Invalid email link!");return new Oo(t,e.code,xo.EMAIL_LINK_SIGN_IN_METHOD)}function Lo(t){return(t=Oi(t=ao(t)))&&t.operation===fi?t:null}function Mo(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new N("internal-error");this.a=t,Jr(this,"providerId","phone"),this.fa="phone",Jr(this,"signInMethod","phone")}function Fo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Mo(e)}return null}function Vo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function jo(t){try{this.a=t||r.Z.auth()}catch(e){throw new N("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function Uo(t,e){if(!t)throw new N("missing-verification-id");if(!e)throw new N("missing-verification-code");return new Mo({fb:t,eb:e})}function qo(t){if(t.temporaryProof&&t.phoneNumber)return new Mo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return ko(o,n);case"facebook.com":return _o(n);case"github.com":return Ao(n);case"twitter.com":return Co(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new po(e,s):new yo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new To(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Bo(t){if(!t.isOAuthProvider)throw new N("invalid-oauth-provider")}function Ko(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new N("invalid-auth-event");if(this.g&&this.a)throw new N("invalid-auth-event");if(this.g&&!this.f)throw new N("invalid-auth-event")}function Go(t){return(t=t||{}).type?new Ko(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&k(t.error),t.postBody,t.tenantId):null}function Ho(){this.b=null,this.a=[]}uo.prototype.Ha=function(){return this.a?De(this.a):De(this.b)},uo.prototype.w=function(){return this.type==co?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},fo.prototype.ka=function(){},fo.prototype.b=function(){},fo.prototype.c=function(){},fo.prototype.w=function(){},po.prototype.ka=function(t){return _a(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,Sa(t,n)},po.prototype.c=function(t,e){return lo(Aa(t,vo(this)),e)},po.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},yo.prototype.ka=function(t){return _a(t,mo(this))},yo.prototype.b=function(t,e){var n=mo(this);return n.idToken=e,Sa(t,n)},yo.prototype.c=function(t,e){return lo(Aa(t,mo(this)),e)},yo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},wo.prototype.Ka=function(t){return this.Jb=gt(t),this},S(Io,wo),S(To,wo),To.prototype.Ca=function(t){return Q(this.a,t)||this.a.push(t),this},To.prototype.Rb=function(){return Z(this.a)},To.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new N("argument-error","credential failed: must provide the ID token and/or the access token.");return new yo(this.providerId,n,this.providerId)},S(Eo,To),Jr(Eo,"PROVIDER_ID","facebook.com"),Jr(Eo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(So,To),Jr(So,"PROVIDER_ID","github.com"),Jr(So,"GITHUB_SIGN_IN_METHOD","github.com"),S(No,To),Jr(No,"PROVIDER_ID","google.com"),Jr(No,"GOOGLE_SIGN_IN_METHOD","google.com"),S(Do,wo),Jr(Do,"PROVIDER_ID","twitter.com"),Jr(Do,"TWITTER_SIGN_IN_METHOD","twitter.com"),Oo.prototype.ka=function(t){return this.signInMethod==xo.EMAIL_LINK_SIGN_IN_METHOD?au(t,Pa,{email:this.a,oobCode:this.f}):au(t,nu,{email:this.a,password:this.f})},Oo.prototype.b=function(t,e){return this.signInMethod==xo.EMAIL_LINK_SIGN_IN_METHOD?au(t,La,{idToken:e,email:this.a,oobCode:this.f}):au(t,$a,{idToken:e,email:this.a,password:this.f})},Oo.prototype.c=function(t,e){return lo(this.ka(t),e)},Oo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(xo,{PROVIDER_ID:"password"}),Zr(xo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(xo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Mo.prototype.ka=function(t){return t.gb(Vo(this))},Mo.prototype.b=function(t,e){var n=Vo(this);return n.idToken=e,au(t,iu,n)},Mo.prototype.c=function(t,e){var n=Vo(this);return n.operation="REAUTH",lo(t=au(t,ou,n),e)},Mo.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},jo.prototype.gb=function(t,e){var n=this.a.a;return De(e.verify()).then((function(r){if("string"!==typeof r)throw new N("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=g(t)?t.session:null,o=g(t)?t.phoneNumber:t;return(i&&i.type==co?i.Ha().then((function(t){return function(t,e){return au(t,Xa,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==ho?i.Ha().then((function(e){return function(t,e){return au(t,Ya,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return au(t,za,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}));default:throw new N("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Zr(jo,{PROVIDER_ID:"phone"}),Zr(jo,{PHONE_SIGN_IN_METHOD:"phone"}),Ko.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Ko.prototype.T=function(){return this.h},Ko.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var zo,Wo=null;function $o(t){var e="unauthorized-domain",n=void 0,r=qn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Gt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Gt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",N.call(this,e,n)}function Qo(t,e,n){N.call(this,t,n),(t=e||{}).Kb&&Jr(this,"email",t.Kb),t.ea&&Jr(this,"phoneNumber",t.ea),t.credential&&Jr(this,"credential",t.credential),t.$b&&Jr(this,"tenantId",t.$b)}function Xo(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:qo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new N(e,t.message||void 0);return new Qo(e,n,t.message)}return null}function Yo(){}function Jo(t){return t.c||(t.c=t.b())}function Zo(){}function ts(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function es(){}function ns(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=T(this.qc,this),this.a.onerror=T(this.Tb,this),this.a.onprogress=T(this.rc,this),this.a.ontimeout=T(this.vc,this)}function rs(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function is(t,e,n){this.reset(t,e,n,void 0,void 0)}S($o,N),S(Qo,N),Qo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&mt(t,e),t},Qo.prototype.toJSON=function(){return this.w()},Yo.prototype.c=null,S(Zo,Yo),Zo.prototype.a=function(){var t=ts(this);return t?new ActiveXObject(t):new XMLHttpRequest},Zo.prototype.b=function(){var t={};return ts(this)&&(t[0]=!0,t[1]=!0),t},zo=new Zo,S(es,Yo),es.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ns;throw Error("Unsupported browser")},es.prototype.b=function(){return{}},(t=ns.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,rs(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",rs(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,rs(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},is.prototype.a=null;function os(t){this.f=t,this.b=this.c=this.a=null}function ss(t,e){this.name=t,this.value=e}is.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||_(),delete this.a},ss.prototype.toString=function(){return this.name};var as=new ss("SEVERE",1e3),us=new ss("WARNING",900),cs=new ss("CONFIG",700),hs=new ss("FINE",500);function fs(t){return t.c?t.c:t.a?fs(t.a):(F("Root logger has no level set."),null)}os.prototype.log=function(t,e,n){if(t.value>=fs(this).value)for(v(e)&&(e=e()),t=new is(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ls,ps={},ds=null;function vs(t){var e;if(ds||(ds=new os(""),ps[""]=ds,ds.c=cs),!(e=ps[t])){e=new os(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=vs(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ps[t]=e}return e}function gs(t,e){t&&t.log(hs,e,void 0)}function ys(t){this.f=t}function ms(t){En.call(this),this.u=t,this.h=void 0,this.readyState=bs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=vs("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}S(ys,Yo),ys.prototype.a=function(){return new ms(this.f)},ys.prototype.b=(ls={},function(){return ls}),S(ms,En);var bs=0;function ws(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function Is(t){t.readyState=4,t.g=null,t.c=null,t.m=null,Ts(t)}function Ts(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Es(t){En.call(this),this.headers=new On,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=_s,this.u=this.S=!1}(t=ms.prototype).open=function(t,e){if(this.readyState!=bs)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,Ts(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Is(this)),this.readyState=bs},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,Ts(this)),this.a&&(this.readyState=3,Ts(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):"undefined"!==typeof u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ws(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Is(this):Ts(this),3==this.readyState&&ws(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,Is(this))},t.sc=function(t){this.a&&(this.response=t,Is(this))},t.Va=function(t){var e=this.i;e&&e.log(us,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&Is(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(us,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(us,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ms.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),S(Es,En);var _s="";Es.prototype.b=vs("goog.net.XhrIo");var Ss=/^https?$/i,As=["POST","PUT"];function Ns(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():zo.a(),t.C=t.D?Jo(t.D):Jo(zo),t.a.onreadystatechange=T(t.Wb,t);try{gs(t.b,Ms(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(s){return gs(t.b,Ms(t,"Error opening Xhr: "+s.message)),void Ds(t,s)}e=r||"";var o=new On(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"===typeof t)H(t,e,void 0);else for(var n=Cn(t),r=Dn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=ks,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!Q(As,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{xs(t),0<t.g&&(t.u=function(t){return Qt&&se(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(t.a),gs(t.b,Ms(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=T(t.Ma,t)):t.s=Nn(t.Ma,t.g,t)),gs(t.b,Ms(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){gs(t.b,Ms(t,"Send error: "+s.message)),Ds(t,s)}}function ks(t){return"content-type"==t.toLowerCase()}function Ds(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Cs(t),Rs(t)}function Cs(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Os(t){if(t.c&&"undefined"!=typeof a)if(t.C[1]&&4==Ps(t)&&2==Ls(t))gs(t.b,Ms(t,"Local request error detected and ignored"));else if(t.i&&4==Ps(t))Nn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ps(t)){gs(t.b,Ms(t,"Request complete")),t.c=!1;try{var e,n=Ls(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Pn)[1]||null;if(!o&&u.self&&u.self.location){var s=u.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ss.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ps(t)?t.a.statusText:""}catch(h){gs(t.b,"Can not get status: "+h.message),c=""}t.h=c+" ["+Ls(t)+"]",Cs(t)}}finally{Rs(t)}}}function Rs(t,e){if(t.a){xs(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(as,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function xs(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(u.clearTimeout(t.s),t.s=null)}function Ps(t){return t.a?t.a.readyState:0}function Ls(t){try{return 2<Ps(t)?t.a.status:-1}catch(e){return-1}}function Ms(t,e){return e+" ["+t.P+" "+t.l+" "+Ls(t)+"]"}function Fs(t){var e=$s;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Vs(t,e,n){t.a=!0,t.c=n,t.f=!e,Bs(t)}function js(t){if(t.a){if(!t.v)throw new Ks(t);t.v=!1}}function Us(t,e,n,r){t.g.push([e,n,r]),t.a&&Bs(t)}function qs(t){return $(t.g,(function(t){return v(t[1])}))}function Bs(t){if(t.h&&t.a&&qs(t)){var e=t.h,n=zs[e];n&&(u.clearTimeout(n.a),delete zs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.s,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(P(e)||"function"===typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,qs(t)||(n=!0)}}t.c=e,r&&(a=T(t.m,t,!0),r=T(t.m,t,!1),e instanceof Fs?(Us(e,a,r),e.C=!0):e.then(a,r)),n&&(e=new Hs(e),zs[e.a]=e,t.h=e.a)}function Ks(){L.call(this)}function Gs(){L.call(this)}function Hs(t){this.a=u.setTimeout(T(this.c,this),0),this.b=t}(t=Es.prototype).Ma=function(){"undefined"!=typeof a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",gs(this.b,Ms(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(gs(this.b,Ms(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Rs(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Rs(this,!0)),Es.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?Os(this):this.Jc())},t.Jc=function(){Os(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case _s:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(as,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return gs(this.b,"Can not get response: "+e.message),null}},Fs.prototype.cancel=function(t){if(this.a)this.c instanceof Fs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Gs(this),js(this),Vs(this,!1,t))}},Fs.prototype.m=function(t,e){this.i=!1,Vs(this,t,e)},Fs.prototype.then=function(t,e,n){var r,i,o=new Te((function(t,e){r=t,i=e}));return Us(this,r,(function(t){t instanceof Gs?o.cancel():i(t)})),o.then(t,e,n)},Fs.prototype.$goog_Thenable=!0,S(Ks,L),Ks.prototype.message="Deferred has already fired",Ks.prototype.name="AlreadyCalledError",S(Gs,L),Gs.prototype.message="Deferred was canceled",Gs.prototype.name="CanceledError",Hs.prototype.c=function(){throw delete zs[this.a],this.b};var zs={};function Ws(t){var e={},n=e.document||document,r=Nt(t).toString(),i=ge(document,"SCRIPT"),o={Xb:i,Ma:void 0},s=new Fs(o),a=null,c=null!=e.timeout?e.timeout:5e3;return 0<c&&(a=window.setTimeout((function(){Qs(i,!0);var t=new Js(Ys,"Timeout reached for loading script "+r);js(s),Vs(s,!1,t)}),c),o.Ma=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Qs(i,e.xd||!1,a),js(s),Vs(s,!0,null))},i.onerror=function(){Qs(i,!0,a);var t=new Js(Xs,"Error while loading script "+r);js(s),Vs(s,!1,t)},mt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),fe(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=Nt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=u?e=f(e.document):(null===h&&(h=f(u.document)),e=h),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function $s(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Qs(t,!0,this.Ma)}}function Qs(t,e,n){null!=n&&u.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Xs=0,Ys=1;function Js(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),L.call(this,n),this.code=t}function Zs(t){this.f=t}function ta(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||ra,this.g=gt(t.secureTokenHeaders||ia),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||oa,this.a=gt(t.firebaseHeaders||sa),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==_r(),!(n=u.XMLHttpRequest||n&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.XMLHttpRequest)&&!Er())throw new N("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Er()?this.f=new ys(self):Sr()?this.f=new Zs(n):this.f=new es,this.b=null}S(Js,L),S(Zs,Yo),Zs.prototype.a=function(){return new this.f},Zs.prototype.b=function(){return{}};var ea,na="idToken",ra=new Gr(3e4,6e4),ia={"Content-Type":"application/x-www-form-urlencoded"},oa=new Gr(3e4,6e4),sa={"Content-Type":"application/json"};function aa(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ua(t,e){e&&(t.l=ca("https://securetoken.googleapis.com/v1/token",e),t.h=ca("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ca("https://identitytoolkit.googleapis.com/v2/",e))}function ca(t,e){return t=qn(t),e=qn(e.url),t.f=t.a+t.f,Mn(t,e.c),t.a=e.a,Fn(t,e.g),t.toString()}function ha(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function fa(t,e,n,r,i,o,s){(function(){var t=Or();return!((t=kr(t)!=Nr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!Qt||!ue||9<ue)})()||Er()?t=T(t.u,t):(ea||(ea=new Te((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{u[pa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Us(t,null,e,void 0)}(Ws(kt(la,{onload:pa})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=T(t.s,t)),t(e,n,r,i,o,s)}ta.prototype.T=function(){return this.b},ta.prototype.u=function(t,e,n,r,i,o){if(Er()&&("undefined"===typeof u.fetch||"undefined"===typeof u.Headers||"undefined"===typeof u.Request))throw new N("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new Es(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout((function(){s.dispatchEvent("timeout")}),o)}_n(s,"complete",(function(){a&&clearTimeout(a);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return gs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),Sn(s,"ready",(function(){a&&clearTimeout(a),We(this)})),Sn(s,"timeout",(function(){a&&clearTimeout(a),We(this),e&&e(null)})),Ns(s,t,n,r,i)};var la=new wt(_t,"https://apis.google.com/js/client.js?onload=%{onload}"),pa="__fcb"+Math.floor(1e6*Math.random()).toString();function da(t,e,n,r,i,o,s){var a=qn(e+n);jn(a,"key",t.c),s&&jn(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&jn(a,c,i[c]);return new Te((function(e,n){fa(t,a.toString(),(function(t){t?t.error?n(cu(t,o||{})):e(t):n(new N("network-request-failed"))}),r,u?void 0:or(jr(i)),t.a,t.v.get())}))}function va(t){if("string"!==typeof(t=t.email)||!br.test(t))throw new N("invalid-email")}function ga(t){"email"in t&&va(t)}function ya(t){if(!t[na]){if(t.mfaPendingCredential)throw new N("multi-factor-auth-required",null,gt(t));throw new N("internal-error")}}function ma(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new N("internal-error")}else{if(!t.sessionInfo)throw new N("missing-verification-id");if(!t.code)throw new N("missing-verification-code")}}ta.prototype.s=function(t,e,n,r,i){var o=this;ea.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},ta.prototype.Ab=function(){return au(this,Qa,{})},ta.prototype.Cb=function(t,e){return au(this,Wa,{idToken:t,email:e})},ta.prototype.Db=function(t,e){return au(this,$a,{idToken:t,password:e})};var ba={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function wa(t){if(!t.phoneVerificationInfo)throw new N("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new N("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new N("missing-verification-code")}function Ia(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new N("internal-error")}function Ta(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(er(t=new Yn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Ea(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Xo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Xo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Xo(t)):t.errorMessage&&(e=uu(t.errorMessage)),e)throw e;ya(t)}function _a(t,e){return e.returnIdpCredential=!0,au(t,Ja,e)}function Sa(t,e){return e.returnIdpCredential=!0,au(t,tu,e)}function Aa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,au(t,Za,e)}function Na(t){if(!t.oobCode)throw new N("invalid-action-code")}(t=ta.prototype).Eb=function(t,e){var n={idToken:t},r=[];return dt(ba,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),au(this,Wa,n)},t.wb=function(t,e){return mt(t={requestType:"PASSWORD_RESET",email:t},e),au(this,Ba,t)},t.xb=function(t,e){return mt(t={requestType:"EMAIL_SIGNIN",email:t},e),au(this,ja,t)},t.vb=function(t,e){return mt(t={requestType:"VERIFY_EMAIL",idToken:t},e),au(this,Ua,t)},t.Fb=function(t,e,n){return mt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),au(this,qa,t)},t.gb=function(t){return au(this,ru,t)},t.ob=function(t,e){return au(this,Ha,{oobCode:t,newPassword:e})},t.Sa=function(t){return au(this,Da,{oobCode:t})},t.kb=function(t){return au(this,ka,{oobCode:t})};var ka={endpoint:"setAccountInfo",A:Na,Z:"email",B:!0},Da={endpoint:"resetPassword",A:Na,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new N("internal-error")},B:!0},Ca={endpoint:"signupNewUser",A:function(t){if(va(t),!t.password)throw new N("weak-password")},G:ya,V:!0,B:!0},Oa={endpoint:"createAuthUri",B:!0},Ra={endpoint:"deleteAccount",O:["idToken"]},xa={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new N("internal-error")}},Pa={endpoint:"emailLinkSignin",O:["email","oobCode"],A:va,G:ya,V:!0,B:!0},La={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:va,G:ya,V:!0},Ma={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:wa,G:ya,B:!0,Na:!0},Fa={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:wa,G:ya,B:!0,Na:!0},Va={endpoint:"getAccountInfo"},ja={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new N("internal-error");va(t)},Z:"email",B:!0},Ua={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new N("internal-error")},Z:"email",B:!0},qa={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new N("internal-error")},Z:"email",B:!0},Ba={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new N("internal-error");va(t)},Z:"email",B:!0},Ka={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Ga={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new N("internal-error")}},Ha={endpoint:"resetPassword",A:Na,Z:"email",B:!0},za={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Wa={endpoint:"setAccountInfo",O:["idToken"],A:ga,V:!0},$a={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(ga(t),!t.password)throw new N("weak-password")},G:ya,V:!0},Qa={endpoint:"signupNewUser",G:ya,V:!0,B:!0},Xa={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new N("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new N("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new N("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new N("internal-error")},B:!0,Na:!0},Ya={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new N("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new N("internal-error")},B:!0,Na:!0},Ja={endpoint:"verifyAssertion",A:Ia,Za:Ta,G:Ea,V:!0,B:!0},Za={endpoint:"verifyAssertion",A:Ia,Za:Ta,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new N("user-not-found");if(t.errorMessage)throw uu(t.errorMessage);ya(t)},V:!0,B:!0},tu={endpoint:"verifyAssertion",A:function(t){if(Ia(t),!t.idToken)throw new N("internal-error")},Za:Ta,G:Ea,V:!0},eu={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new N("invalid-custom-token")},G:ya,V:!0,B:!0},nu={endpoint:"verifyPassword",A:function(t){if(va(t),!t.password)throw new N("wrong-password")},G:ya,V:!0,B:!0},ru={endpoint:"verifyPhoneNumber",A:ma,G:ya,B:!0},iu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new N("internal-error");ma(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Xo(t);ya(t)}},ou={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ma,G:ya,B:!0},su={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[na]^!!t.refreshToken)throw new N("internal-error")},B:!0,Na:!0};function au(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.O))return Ce(new N("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return De(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),da(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new N("internal-error");return r[e.Z]}))}function uu(t){return cu({error:{errors:[{message:t}],code:400,message:t}})}function cu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new N(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",mt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new N(r[i],e);return!e&&t&&(e=Vr(t)),new N("internal-error",e)}function hu(t){this.b=t,this.a=null,this.sb=function(t){return(du||(du=new Te((function(t,e){function n(){Kr(),Rr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Kr(),e(Error("Network Error"))},timeout:lu.get()})}if(Rr("gapi.iframes.Iframe"))t();else if(Rr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Rr("gapi.load")?n():e(Error("Network Error"))},De(Ws(r=kt(fu,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw du=null,t})))).then((function(){return new Te((function(e,n){Rr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),pu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var fu=new wt(_t,"https://apis.google.com/js/api.js?onload=%{onload}"),lu=new Gr(3e4,6e4),pu=new Gr(5e3,15e3),du=null;function vu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Bn((t=qn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Bn("https",this.l,null,"/__/auth/iframe"),this.a=t,jn(this.a,"apiKey",this.h),jn(this.a,"appName",this.i),this.b=null,this.c=[]}function gu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function yu(t){try{return r.Z.app(t).auth().Ga()}catch(e){return[]}}function mu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function bu(t){var e=lr();return function(t){return au(t,Ka,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=qn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=qn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:mr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new $o(lr())}))}function wu(t){return t.m||(t.m=wr().then((function(){if(!t.u){var e=t.c,n=t.i,r=yu(t.b),i=new vu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.v=new hu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Go(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",De(n)}return n.status="ERROR",De(n)}))}(t)}))),t.m}function Iu(t){return t.l||(t.C=t.c?Cr(t.c,yu(t.b)):null,t.l=new ta(t.g,x(t.i),t.C),t.f&&ua(t.l,t.f)),t.l}function Tu(t,e,n,r,i,o,s,a,u,c,h,f){return(t=new gu(t,e,n,r,i,f)).l=o,t.g=s,t.i=a,t.b=gt(u||null),t.f=c,t.zb(h).toString()}function Eu(t){if(this.a=t||r.Z.INTERNAL.reactNative&&r.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new N("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function _u(t){this.b=t,this.a={},this.f=T(this.c,this)}vu.prototype.toString=function(){return this.f?jn(this.a,"v",this.f):tr(this.a.b,"v"),this.b?jn(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?jn(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},gu.prototype.zb=function(t){return this.h=t,this},gu.prototype.toString=function(){if(this.v){var t=qn(this.v.url);t=Bn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Bn("https",this.u,null,"/__/auth/handler");if(jn(t,"apiKey",this.s),jn(t,"appName",this.c),jn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=r.Z.app(this.c).auth().la()}catch(u){n=null}for(var i in e.pb=n,jn(t,"providerId",this.a.providerId),e=jr((n=this.a).Jb))e[i]=e[i].toString();i=n.Qc,e=gt(e);for(var o=0;o<i.length;o++){var s=i[o];s in e&&delete e[s]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),vt(e)||jn(t,"customParameters",Vr(e))}if("function"===typeof this.a.Rb&&((n=this.a.Rb()).length&&jn(t,"scopes",n.join(","))),this.l?jn(t,"redirectUrl",this.l):tr(t.b,"redirectUrl"),this.g?jn(t,"eventId",this.g):tr(t.b,"eventId"),this.i?jn(t,"v",this.i):tr(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Un(t,a)&&jn(t,a,this.b[a]);return this.h?jn(t,"tid",this.h):tr(t.b,"tid"),this.f?jn(t,"eid",this.f):tr(t.b,"eid"),(a=yu(this.c)).length&&jn(t,"fw",a.join(",")),t.toString()},(t=mu.prototype).Pb=function(t,e,n){var r=new N("popup-closed-by-user"),i=new N("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return wu(t).then((function(){return function(t,e){return t.sb.then((function(){return new Te((function(n){t.a.send(e.type,e,n,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&gr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new Te((function(e){return function n(){kn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return kn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=Or();return!Fr(t)&&!Br(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,s,a){if(!t)return Ce(new N("popup-blocked"));if(s&&!Fr())return this.ma().o((function(e){gr(t),i(e)})),r(),De();this.a||(this.a=bu(Iu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw gr(t),i(e),e}));return r(),e})).then((function(){(Bo(n),s)||pr(Tu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=bu(Iu(this)));var i=this;return this.a.then((function(){Bo(e),pr(Tu(i.s,i.g,i.b,t,e,lr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return wu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new N("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){Y(this.h,(function(e){return e==t}))},(t=Eu.prototype).get=function(t){return De(this.a.getItem(t)).then((function(t){return t&&Ur(t)}))},t.set=function(t,e){return De(this.a.setItem(t,Vr(e)))},t.U=function(t){return De(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var Su,Au=[];function Nu(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function ku(t){this.a=t}function Du(t){this.c=t,this.b=!1,this.a=[]}function Cu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Ce(Error("connection_unavailable"));var h=r?800:50,f="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Te((function(n,r){f?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),f.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:f,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),f.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[f.port2])):r(Error("connection_unavailable"))})).then((function(e){return Ou(t,c),e})).o((function(e){throw Ou(t,c),e}))}function Ou(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Y(t.a,(function(t){return t==e}))}}function Ru(){if(!Mu())throw new N("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Er()&&self?(this.v=function(){var t=Er()?self:null;if(H(Au,(function(n){n.b==t&&(e=n)})),!e){var e=new _u(t);Au.push(e)}return e}(),Nu(this.v,"keyChanged",(function(e,n){return qu(t).then((function(e){return 0<e.length&&H(t.a,(function(t){t(e)})),{keyProcessed:Q(e,n.key)}}))})),Nu(this.v,"ping",(function(){return De(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?De().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):De(null)}().then((function(e){(t.h=e)&&(t.g=new Du(new ku(e)),Cu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function xu(t){return new Te((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Te((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return xu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Pu(t){return t.i||(t.i=xu(t)),t.i}function Lu(t,e){var n=0;return new Te((function r(i,o){Pu(t).then(e).then(i).o((function(e){if(!(3<++n))return Pu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Mu(){try{return!!u.indexedDB}catch(ls){return!1}}function Fu(t){return t.objectStore("firebaseLocalStorage")}function Vu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function ju(t){return new Te((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Uu(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):De()}function qu(t){return Pu(t).then((function(t){var e=Fu(Vu(t,!1));return e.getAll?ju(e.getAll()):new Te((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=dr(t.c,n),t.c=n}return r}))}function Bu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Ku(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=De().then((function(){if(Mu()){var t=qr(),r="__sak"+t;return Su||(Su=new Ru),(n=Su).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){H(e.a,(function(e){e(t)}))})),t}))}function Gu(){this.a={},this.type="inMemory"}function Hu(){if(!function(){var t="Node"==_r();if(!(t=zu()||t&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==_r())throw new N("internal-error","The LocalStorage compatibility library was not found.");throw new N("web-storage-unsupported")}this.a=zu()||r.Z.INTERNAL.node.localStorage,this.type="localStorage"}function zu(){try{var t=u.localStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Wu(){this.type="nullStorage"}function $u(){if(!function(){var t="Node"==_r();if(!(t=Qu()||t&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==_r())throw new N("internal-error","The SessionStorage compatibility library was not found.");throw new N("web-storage-unsupported")}this.a=Qu()||r.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Qu(){try{var t=u.sessionStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Xu(){var t={};t.Browser=Zu,t.Node=tc,t.ReactNative=ec,t.Worker=nc,this.a=t[_r()]}_u.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];H(r,(function(e){i.push(De().then((function(){return e(t.origin,t.data.data)})))})),Re(i).then((function(r){var i=[];H(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),H(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},ku.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Du.prototype.close=function(){for(;0<this.a.length;)Ou(this,this.a[0]);this.b=!0},(t=Ru.prototype).set=function(t,e){var n=this,r=!1;return Lu(this,(function(e){return ju((e=Fu(Vu(e,!0))).get(t))})).then((function(i){return Lu(n,(function(o){if(o=Fu(Vu(o,!0)),i)return i.value=e,ju(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,ju(o.add(s))}))})).then((function(){return n.c[t]=e,Uu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Lu(this,(function(e){return ju(Fu(Vu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Lu(this,(function(r){return n=!0,e.b++,ju(Fu(Vu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Uu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=qu(t).then((function(e){0<e.length&&H(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Bu(t),e()}(this),this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t})),0==this.a.length&&Bu(this)},(t=Ku.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t}))},(t=Gu.prototype).get=function(t){return De(this.a[t])},t.set=function(t,e){return this.a[t]=e,De()},t.U=function(t){return delete this.a[t],De()},t.ca=function(){},t.ia=function(){},(t=Hu.prototype).get=function(t){var e=this;return De().then((function(){return Ur(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return De().then((function(){var r=Vr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},t.ca=function(t){u.window&&fn(u.window,"storage",t)},t.ia=function(t){u.window&&dn(u.window,"storage",t)},(t=Wu.prototype).get=function(){return De(null)},t.set=function(){return De()},t.U=function(){return De()},t.ca=function(){},t.ia=function(){},(t=$u.prototype).get=function(t){var e=this;return De().then((function(){return Ur(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return De().then((function(){var r=Vr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Yu,Ju,Zu={F:Hu,cb:$u},tc={F:Hu,cb:$u},ec={F:Eu,cb:Wu},nc={F:Hu,cb:Wu},rc={rd:"local",NONE:"none",td:"session"};function ic(){var t=!(Br(Or())||!Tr()),e=Fr(),n=xr();this.m=t,this.h=e,this.l=n,this.a={},Yu||(Yu=new Xu),t=Yu;try{this.g=!fr()&&Wr()||!u.indexedDB?new t.a.F:new Ku(Er()?new Gu:new t.a.F)}catch(r){this.g=new Gu,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new Gu}this.v=new Gu,this.f=T(this.Zb,this),this.b={}}function oc(){return Ju||(Ju=new ic),Ju}function sc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function ac(t,e){return"firebase:"+t.name+(e?":"+e:"")}function uc(t,e,n){return n=ac(e,n),"local"==e.F&&(t.b[n]=null),sc(t,e.F).U(n)}function cc(t){t.c&&(clearInterval(t.c),t.c=null)}function hc(t){this.a=t,this.b=oc()}(t=ic.prototype).get=function(t,e){return sc(this,t.F).get(ac(t,e))},t.set=function(t,e,n){var r=ac(t,n),i=this,o=sc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=ac(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),vt(this.a)&&(sc(this,"local").ca(this.f),this.h||(fr()||!Wr())&&u.indexedDB||!this.l||function(t){cc(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=ac(t,e),this.a[t]&&(Y(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(sc(this,"local").ia(this.f),cc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?sc(this,"local").ia(this.f):cc(this),this.m)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.nb(e))},Qt&&ue&&10==ue&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else H(t,T(this.nb,this))},t.nb=function(t){this.a[t]&&H(this.a[t],(function(t){t()}))};var fc,lc={name:"authEvent",F:"local"};function pc(){this.a=oc()}function dc(t,e){this.b=vc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===fc&&(fc=u.Int32Array?new Int32Array(Tc):Tc),this.reset()}S(dc,(function(){this.b=-1}));for(var vc=64,gc=vc-1,yc=[],mc=0;mc<gc;mc++)yc[mc]=0;var bc=J(128,yc);function wc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],f=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var l=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&f)+(0|fc[e])|0)+(0|n[e])|0)|0,o=f,f=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+l|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+f|0,t.a[7]=t.a[7]+o|0}function Ic(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(wc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(wc(t),i=0)}}t.c=i,t.g+=n}dc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):Z(this.h)};var Tc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ec(){dc.call(this,8,_c)}S(Ec,dc);var _c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Sc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new pc,this.g=new hc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ac(t){return new N("invalid-cordova-configuration",t)}function Nc(t){var e=new Ec;Ic(e,t),t=[];var n=8*e.g;56>e.c?Ic(e,bc,56-e.c):Ic(e,bc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(wc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return W(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function kc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Dc(t){return t.f||(t.f=t.ma().then((function(){return new Te((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Cc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ao(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=Ur(Un(o=qn(i),"firebaseError")||null))?k(o):null)?new Ko(r.c,r.b,null,null,o,null,r.T()):new Ko(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}kc(t,i)}))}var n=new Ko("unknown",null,null,null,new N("no-auth-event")),r=!1,i=kn(500).then((function(){return Cc(t).then((function(){r||kc(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Rr("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(n){console.error(n)}},Wo||(Wo=new Ho),function(t){var e=Wo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"===typeof(t=Rr("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Cc(t){var e=null;return function(t){return t.b.get(lc,t.a).then((function(t){return Go(t)}))}(t.g).then((function(n){return e=n,uc((n=t.g).b,lc,n.a)})).then((function(){return e}))}function Oc(t){this.a=t,this.b=oc()}(t=Sc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(Ir(void 0)?wr().then((function(){return new Te((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ce(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof Rr("universalLinks.subscribe",u))throw Ac("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof Rr("BuildInfo.packageName",u))throw Ac("cordova-plugin-buildinfo is not installed");if("function"!==typeof Rr("cordova.plugins.browsertab.openUrl",u))throw Ac("cordova-plugin-browsertab is not installed");if("function"!==typeof Rr("cordova.InAppBrowser.open",u))throw Ac("cordova-plugin-inappbrowser is not installed")}),(function(){throw new N("cordova-not-ready")}))},t.Pb=function(t,e){return e(new N("operation-not-supported-in-this-environment")),De()},t.Nb=function(){return Ce(new N("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return Ce(new N("redirect-operation-pending"));var i=this,o=u.document,s=null,a=null,c=null,h=null;return this.c=De().then((function(){return Bo(e),Dc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Ko(e,r,null,o,new N("no-auth-event"),null,i),a=Rr("BuildInfo.packageName",u);if("string"!==typeof a)throw new N("invalid-cordova-configuration");var c=Rr("BuildInfo.displayName",u),h={};if(Or().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=a;else{if(!Or().toLowerCase().match(/android/))return Ce(new N("operation-not-supported-in-this-environment"));h.apn=a}c&&(h.appDisplayName=c),o=Nc(o),h.sessionId=o;var f=Tu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(lc,s.w(),e)})).then((function(){var e=Rr("cordova.plugins.browsertab.isAvailable",u);if("function"!==typeof e)throw new N("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!==typeof(n=Rr("cordova.plugins.browsertab.openUrl",u)))throw new N("invalid-cordova-configuration");n(f)}else{if("function"!==typeof(n=Rr("cordova.InAppBrowser.open",u)))throw new N("invalid-cordova-configuration");e=Or(),t.a=n(f,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Te((function(t,e){a=function(){var e=Rr("cordova.plugins.browsertab.close",u);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),c=function(){s||(s=kn(2e3).then((function(){e(new N("redirect-cancelled-by-user"))})))},h=function(){Hr()&&c()},o.addEventListener("resume",c,!1),Or().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Cc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),a&&i.Ta(a),i.c=null}))},t.Ea=function(t){this.b.push(t),Dc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Ko("unknown",null,null,null,new N("no-auth-event")),t(e))}))},t.Ta=function(t){Y(this.b,(function(e){return e==t}))};var Rc={name:"pendingRedirect",F:"session"};function xc(t){return uc(t.b,Rc,t.a)}function Pc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=T(this.s,this),this.b=new Qc,this.C=new th,this.g=new Oc(Wc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Lc(this.D,this.v,this.m,D,this.J)}function Lc(t,e,n,i,o){var s=r.Z.SDK_VERSION||null;return Ir()?new Sc(t,e,n,s,i,o):new mu(t,e,n,s,i,o)}function Mc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Fc(t){t.a.Yb()&&Mc(t).o((function(e){var n=new Ko("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));Kc(e)&&t.s(n)})),t.a.Ub()||Xc(t.b)}function Vc(t,e){Q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Rc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?xc(t.g).then((function(){Mc(t).o((function(e){var n=new Ko("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));Kc(e)&&t.s(n)}))})):Fc(t)})).o((function(){Fc(t)}))}function jc(t,e){Y(t.h,(function(t){return t==e}))}Pc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Lc(this.D,this.v,this.m,null,this.J),this.i={}},Pc.prototype.s=function(t){if(!t)throw new N("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Xc(this.b),e};var Uc=new Gr(2e3,1e4),qc=new Gr(3e4,6e4);function Bc(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function Kc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Gc(t,e,n,r,i){var o;return function(t){return t.b.set(Rc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Kc(e))throw new N("operation-not-supported-in-this-environment");return o=e,xc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new Te((function(){})):xc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Hc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Uc.get())}Pc.prototype.ra=function(){return this.b.ra()};var zc={};function Wc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function $c(t,e,n,r){var i=Wc(e,n,r);return zc[i]||(zc[i]=new Pc(t,e,n,r)),zc[i]}function Qc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Xc(t){t.g||(t.g=!0,Zc(t,!1,null,null))}function Yc(t){t.g&&!t.i&&Zc(t,!1,null,null)}function Jc(t,e){if(t.b=function(){return De(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Zc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ce(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Jc(t,n):Jc(t,{user:null}),t.f=[],t.c=[]}function th(){}function eh(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function nh(t,e){this.a=e,Jr(this,"verificationId",t)}function rh(t,e,n,r){return new jo(t).gb(e,n).then((function(t){return new nh(t,r)}))}function ih(t){var e=Wi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new N("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:t,expirationTime:zr(1e3*e.exp),authTime:zr(1e3*e.auth_time),issuedAtTime:zr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function oh(t,e,n){var r=e&&e[ah];if(!r)throw new N("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new uo(null,r),this.b=[];var i=this;H(e[sh]||[],(function(t){(t=ri(t))&&i.b.push(t)})),Jr(this,"auth",this.a),Jr(this,"session",this.c),Jr(this,"hints",this.b)}Qc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Qc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Zc(this,!0,null,t.a),De()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Zc(t,a,e,null)})).o((function(e){Zc(t,a,null,e)}))}(this,t,e):Ce(new N("invalid-auth-event")):(Zc(this,!1,null,null),De())}else Ce(new N("invalid-auth-event"))},Qc.prototype.ra=function(){var t=this;return new Te((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new N("timeout");t.a&&t.a.cancel(),t.a=kn(qc.get()).then((function(){t.b||(t.g=!0,Zc(t,!0,null,e))}))}(t))}))},th.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),De()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Ce(new N("invalid-auth-event"))}else Ce(new N("invalid-auth-event"))},nh.prototype.confirm=function(t){return t=Uo(this.verificationId,t),this.a(t)};var sh="mfaInfo",ah="mfaPendingCredential";function uh(t,e,n,r){N.call(this,"multi-factor-auth-required",r,e),this.b=new oh(t,e,n),Jr(this,"resolver",this.b)}function ch(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new uh(e,t.serverResponse,n,t.message)}catch(r){}return null}function hh(){}function fh(t){Jr(this,"factorId",t.fa),this.a=t}function lh(t){if(fh.call(this,t),this.a.fa!=jo.PROVIDER_ID)throw new N("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ph(t,e){for(var n in Je.call(this,t),e)this[n]=e[n]}function dh(t,e){this.a=t,this.b=[],this.c=T(this.yc,this),fn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&H(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[si]=t.uid),t.displayName&&(r[ii]=t.displayName),t.enrollmentTime&&(r[oi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ai]=t.phoneNumber);try{e=new ui(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),vh(this,n)}function vh(t,e){t.b=e,Jr(t,"enrolledFactors",e)}function gh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function yh(t,e){t.stop(),t.b=kn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=u.document,e=null;return Hr()||!t?De():new Te((function(n){e=function(){Hr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){yh(t,!0)})).o((function(e){t.i(e)&&yh(t,!1)}))}function mh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function bh(t,e){"undefined"===typeof e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function wh(t,e){t.b=zi(e[na]||""),t.a=e.refreshToken,bh(t,"undefined"!==typeof(e=e.expiresIn)?Number(e):void 0)}function Ih(t,e){return function(t,e){return new Te((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?fa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(cu(t)):t.access_token&&t.refresh_token?n(t):r(new N("internal-error")):r(new N("network-request-failed"))}),"POST",Zn(e).toString(),t.g,t.m.get()):r(new N("internal-error"))}))}(t.f,e).then((function(e){return t.b=zi(e.access_token),t.a=e.refresh_token,bh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Th(t,e){this.a=t||null,this.b=e||null,Zr(this,{lastSignInTime:zr(e||null),creationTime:zr(t||null)})}function Eh(t,e,n,r,i,o){Zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function _h(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=r.Z.SDK_VERSION?Cr(r.Z.SDK_VERSION):null;this.a=new ta(this.l,x(D),i),(this.u=t.emulatorConfig||null)&&ua(this.a,this.u),this.h=new mh(this.a),xh(this,e[na]),wh(this.h,e),Jr(this,"refreshToken",this.h.a),Mh(this,n||{}),En.call(this),this.P=!1,this.s&&Pr()&&(this.b=$c(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new gh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=T(this.ib,this);var o=this;this.za=null,this.Pa=function(t){o.xa(t.h)},this.qa=null,this.Ba=function(t){Sh(o,t.c)},this.$=null,this.aa=[],this.Oa=function(t){kh(o,t.f)},this.ja=null,this.S=new dh(this,n),Jr(this,"multiFactor",this.S)}function Sh(t,e){t.u=e,ua(t.a,e),t.b&&(e=t.b,t.b=$c(t.s,t.l,t.m,t.u),t.P&&(jc(e,t),Vc(t.b,t)))}function Ah(t,e){t.qa&&dn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&fn(e,"languageCodeChanged",t.Pa)}function Nh(t,e){t.$&&dn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&fn(e,"emulatorConfigChanged",t.Ba)}function kh(t,e){t.aa=e,ha(t.a,r.Z.SDK_VERSION?Cr(r.Z.SDK_VERSION,t.aa):null)}function Dh(t,e){t.ja&&dn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&fn(e,"frameworkChanged",t.Oa)}function Ch(t){try{return r.Z.app(t.m).auth()}catch(e){throw new N("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Oh(t){t.J||t.D.b||(t.D.start(),dn(t,"tokenChanged",t.ba),fn(t,"tokenChanged",t.ba))}function Rh(t){dn(t,"tokenChanged",t.ba),t.D.stop()}function xh(t,e){t.Aa=e,Jr(t,"_lat",e)}function Ph(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Re(e).then((function(){return t}))}function Lh(t){t.b&&!t.P&&(t.P=!0,Vc(t.b,t))}function Mh(t,e){Zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Th(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Fh(){}function Vh(t){return De().then((function(){if(t.J)throw new N("app-deleted")}))}function jh(t){return W(t.providerData,(function(t){return t.providerId}))}function Uh(t,e){e&&(qh(t,e.providerId),t.providerData.push(e))}function qh(t,e){Y(t.providerData,(function(t){return t.providerId==e}))}function Bh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Jr(t,e,n)}function Kh(t,e){t!=e&&(Zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Jr(t,"metadata",function(t){return new Th(t.a,t.b)}(e.metadata)):Jr(t,"metadata",new Th),H(e.providerData,(function(e){Uh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Jr(t,"refreshToken",t.h.a),vh(t.S,e.S.b))}function Gh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return au(t.a,Va,{idToken:e}).then(T(t.Kc,t))}(t,e).then((function(){return n||Bh(t,"isAnonymous",!1),e}))}))}function Hh(t,e){e[na]&&t.Aa!=e[na]&&(wh(t.h,e),t.dispatchEvent(new ph("tokenChanged")),xh(t,e[na]),Bh(t,"refreshToken",t.h.a))}function zh(t,e){return Gh(t).then((function(){if(Q(jh(t),e))return Ph(t).then((function(){throw new N("provider-already-linked")}))}))}function Wh(t,e,n){return ti({user:t,credential:qo(e),additionalUserInfo:e=Ji(e),operationType:n})}function $h(t,e){return Hh(t,e),t.reload().then((function(){return t}))}function Qh(t,e,n,i,o){if(!Pr())return Ce(new N("operation-not-supported-in-this-environment"));if(t.i&&!o)return Ce(t.i);var s=Yi(n.providerId),a=qr(t.uid+":::"),u=null;(!Fr()||Tr())&&t.s&&n.isOAuthProvider&&(u=Tu(t.s,t.l,t.m,e,n,null,a,r.Z.SDK_VERSION||null,null,null,t.tenantId,t.u));var c=yr(u,s&&s.va,s&&s.ua);return i=i().then((function(){if(Yh(t),!o)return t.I().then((function(){}))})).then((function(){return Bc(t.b,c,e,n,a,!!u,t.tenantId)})).then((function(){return new Te((function(n,r){t.na(e,null,new N("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Hc(t.b,t,e,c,a)}))})).then((function(t){return c&&gr(c),t?ti(t):null})).o((function(t){throw c&&gr(c),t})),Jh(t,i,o)}function Xh(t,e,n,r,i){if(!Pr())return Ce(new N("operation-not-supported-in-this-environment"));if(t.i&&!i)return Ce(t.i);var o=null,s=qr(t.uid+":::");return r=r().then((function(){if(Yh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,Ph(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(ef,t.w(),e.a)),e})).then((function(){return Gc(t.b,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return nf(t.ha);throw o})).then((function(){if(o)throw o})),Jh(t,r,i)}function Yh(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new N("internal-error");throw new N("auth-domain-config-required")}}function Jh(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Ce(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new ph("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){X(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ch(e.w(),Ch(t),T(t.jc,t))),n||e}))}function Zh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[na]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new _h(e,n,t);return t.providerData&&H(t.providerData,(function(t){t&&Uh(i,ti(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function tf(t){this.a=t,this.b=oc()}oh.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=gt(e.f);return delete n[sh],delete n[ah],mt(n,t),e.g(n)}))},S(uh,N),hh.prototype.tb=function(t,e,n){return e.type==co?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),mt(n,{phoneVerificationInfo:Vo(t.a)}),au(e,Ma,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return mt(n={mfaPendingCredential:n},{phoneVerificationInfo:Vo(t.a)}),au(e,Fa,n)}))}(this,t,e)},S(fh,hh),S(lh,fh),S(ph,Je),(t=dh.prototype).yc=function(t){vh(this,function(t){var e=[];return H(t.mfaInfo||[],(function(t){(t=ri(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new uo(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Hh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return au(r,su,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=z(e.b,(function(t){return t.uid!=n}));return vh(e,r),Hh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:W(this.b,(function(t){return t.w()}))}}},gh.prototype.start=function(){this.a=this.c,yh(this,!0)},gh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},mh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},mh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ce(new N("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?Ih(this,{grant_type:"refresh_token",refresh_token:this.a}):De(null):De({accessToken:this.b.toString(),refreshToken:this.a})},Th.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(_h,En),_h.prototype.xa=function(t){this.za=t,aa(this.a,t)},_h.prototype.la=function(){return this.za},_h.prototype.Ga=function(){return Z(this.aa)},_h.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Jr(_h.prototype,"providerId","firebase"),(t=_h.prototype).reload=function(){var t=this;return Jh(this,Vh(this).then((function(){return Gh(t).then((function(){return Ph(t)})).then(Fh)})))},t.oc=function(t){return this.I(t).then((function(t){return new ih(t)}))},t.I=function(t){var e=this;return Jh(this,Vh(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new N("internal-error");return t.accessToken!=e.Aa&&(xh(e,t.accessToken),e.dispatchEvent(new ph("tokenChanged"))),Bh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new N("internal-error");Mh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,(function(t){return new Eh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Uh(this,e[n]);Bh(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new ph("userReloaded",{hd:t}))},t.Lc=function(t){return Xr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return Jh(this,t.c(this.a,this.uid).then((function(t){return Hh(e,t),n=Wh(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Xr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return Jh(this,zh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Wh(e,t,"link"),$h(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Jh(this,zh(this,"phone").then((function(){return rh(Ch(n),t,e,T(n.rb,n))})))},t.Mc=function(t,e){var n=this;return Jh(this,De().then((function(){return rh(Ch(n),t,e,T(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return Jh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Hh(e,t),e.reload()})))},t.ed=function(t){var e=this;return Jh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Hh(e,t),e.reload()})))},t.Db=function(t){var e=this;return Jh(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Hh(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Vh(this);var e=this;return Jh(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Hh(e,t),Bh(e,"displayName",t.displayName||null),Bh(e,"photoURL",t.photoUrl||null),H(e.providerData,(function(t){"password"===t.providerId&&(Jr(t,"displayName",e.displayName),Jr(t,"photoURL",e.photoURL))})),Ph(e)})).then(Fh))},t.cd=function(t){var e=this;return Jh(this,Gh(this).then((function(n){return Q(jh(e),t)?function(t,e,n){return au(t,xa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return H(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),H(jh(e),(function(t){n[t]||qh(e,t)})),n[jo.PROVIDER_ID]||Jr(e,"phoneNumber",null),Ph(e)})):Ph(e).then((function(){throw new N("no-such-provider")}))})))},t.delete=function(){var t=this;return Jh(this,this.I().then((function(e){return au(t.a,Ra,{idToken:e})})).then((function(){t.dispatchEvent(new ph("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Ah(t,null),Nh(t,null),Dh(t,null),t.N=[],t.J=!0,Rh(t),Jr(t,"refreshToken",null),t.b&&jc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?T(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?T(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?T(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?T(this.Mb,this):null},t.Ec=function(t){var e=this;return Qh(this,"linkViaPopup",t,(function(){return zh(e,t.providerId).then((function(){return Ph(e)}))}),!1)},t.Nc=function(t){return Qh(this,"reauthViaPopup",t,(function(){return De()}),!0)},t.Fc=function(t){var e=this;return Xh(this,"linkViaRedirect",t,(function(){return zh(e,t.providerId)}),!1)},t.Oc=function(t){return Xh(this,"reauthViaRedirect",t,(function(){return De()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Jh(this,this.I().then((function(n){return Sa(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Wh(i,t,"link"),$h(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Jh(this,De().then((function(){return lo(Aa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Wh(i,t,"reauthenticate"),Hh(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return Jh(this,this.I().then((function(e){return n=e,"undefined"===typeof t||vt(t)?{}:Bi(new Ri(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return Jh(this,this.I().then((function(t){return r=t,"undefined"===typeof e||vt(e)?{}:Bi(new Ri(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Jh(this,t=lo(De(t),n.uid).then((function(t){return e=Wh(n,t,"reauthenticate"),Hh(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&mt(t,this.metadata.w()),H(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),mt(t,this.S.w()),t};var ef={name:"redirectUser",F:"session"};function nf(t){return uc(t.b,ef,t.a)}function rf(t){this.a=t,this.b=oc(),this.c=null,this.f=function(t){var e=af("local"),n=af("session"),r=af("none");return function(t,e,n){var r=ac(e,n),i=sc(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Ur(u.localStorage.getItem(r))}catch(a){}if(s&&!o)return u.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(sf,t.a).then((function(t){return t?af(t):e}))}))}))})).then((function(e){return t.c=e,of(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(af("local"),this.a,T(this.g,this))}function of(t,e){var n,r=[];for(n in rc)rc[n]!==e&&r.push(uc(t.b,af(rc[n]),t.a));return r.push(uc(t.b,sf,t.a)),function(t){return new Te((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Oe(t[a],E(o,a),s);else e(i)}))}(r)}rf.prototype.g=function(){var t=this,e=af("local");ff(this,(function(){return De().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return of(t,"local").then((function(){t.c=e}))}))}))};var sf={name:"persistence",F:"session"};function af(t){return{name:"authUser",F:t}}function uf(t,e){return ff(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function cf(t){return ff(t,(function(){return uc(t.b,t.c,t.a)}))}function hf(t,e,n){return ff(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Zh(t||{})}))}))}function ff(t,e){return t.f=t.f.then(e,e),t.f}function lf(t){if(this.l=!1,Jr(this,"settings",new eh),Jr(this,"app",t),!If(this).options||!If(this).options.apiKey)throw new N("invalid-api-key");t=r.Z.SDK_VERSION?Cr(r.Z.SDK_VERSION):null,this.a=new ta(If(this).options&&If(this).options.apiKey,x(D),t),this.P=[],this.s=[],this.N=[],this.Pa=r.Z.INTERNAL.createSubscribe(T(this.zc,this)),this.W=void 0,this.ib=r.Z.INTERNAL.createSubscribe(T(this.Ac,this)),bf(this,null),this.i=new rf(If(this).options.apiKey+":"+If(this).name),this.D=new tf(If(this).options.apiKey+":"+If(this).name),this.$=Sf(this,function(t){var e=If(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(ef,t.a).then((function(t){return t&&e&&(t.authDomain=e),Zh(t||{})}))}(t.D,If(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),nf(t.D)}));return Sf(t,e)}(t).then((function(){return hf(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return uf(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:cf(t.i)}))):null})).then((function(e){bf(t,e||null)}));return Sf(t,n)}(this)),this.h=Sf(this,function(t){return t.$.then((function(){return yf(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(af("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=T(this.Zc,this),this.Ba=T(this.da,this),this.qa=T(this.mc,this),this.za=T(this.wc,this),this.Aa=T(this.xc,this),this.b=null,function(t){var e=If(t).options.authDomain,n=If(t).options.apiKey;e&&Pr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=$c(e,n,If(t).name,t.R),Vc(t.b,t),Tf(t)&&Lh(Tf(t)),t.m){Lh(t.m);var r=t.m;r.xa(t.la()),Ah(r,t),kh(r=t.m,t.J),Dh(r,t),Sh(r=t.m,t.R),Nh(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=T(this.delete,this),this.INTERNAL.logFramework=T(this.Gc,this),this.u=0,En.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=qn(this.R.url);t=ti({protocol:t.c,host:t.a,port:t.g,options:ti({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function pf(t){Je.call(this,"languageCodeChanged"),this.h=t}function df(t){Je.call(this,"emulatorConfigChanged"),this.c=t}function vf(t){Je.call(this,"frameworkChanged"),this.f=t}function gf(t){return t.Oa||Ce(new N("auth-domain-config-required"))}function yf(t){if(!Pr())return Ce(new N("operation-not-supported-in-this-environment"));var e=gf(t).then((function(){return t.b.ra()})).then((function(t){return t?ti(t):null}));return Sf(t,e)}function mf(t,e){var n={};return n.apiKey=If(t).options.apiKey,n.authDomain=If(t).options.authDomain,n.appName=If(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new _h(t,e);return n&&(i.ha=n),r&&kh(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return Tf(t)&&e.uid==Tf(t).uid?(Kh(Tf(t),e),t.da(e)):(bf(t,e),Lh(e),t.da(e))})).then((function(){_f(t)}))}function bf(t,e){Tf(t)&&(function(t,e){Y(t.W,(function(t){return t==e}))}(Tf(t),t.Ba),dn(Tf(t),"tokenChanged",t.qa),dn(Tf(t),"userDeleted",t.za),dn(Tf(t),"userInvalidated",t.Aa),Rh(Tf(t))),e&&(e.W.push(t.Ba),fn(e,"tokenChanged",t.qa),fn(e,"userDeleted",t.za),fn(e,"userInvalidated",t.Aa),0<t.u&&Oh(e)),Jr(t,"currentUser",e),e&&(e.xa(t.la()),Ah(e,t),kh(e,t.J),Dh(e,t),Sh(e,t.R),Nh(e,t))}function wf(t,e){var n=null,r=null;return Sf(t,e.then((function(e){return n=qo(e),r=Ji(e),mf(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ch(e.w(),t,T(t.kc,t))),n||e})).then((function(){return ti({user:Tf(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function If(t){return t.app}function Tf(t){return t.currentUser}function Ef(t){return Tf(t)&&Tf(t)._lat||null}function _f(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](Ef(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](Ef(t))}}function Sf(t,e){return t.P.push(e),e.oa((function(){X(t.P,e)})),e}function Af(){}function Nf(){this.a={},this.b=1e12}rf.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new N("invalid-persistence-type"),n=new N("unsupported-persistence-type");t:{for(r in rc)if(rc[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(_r()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Mu()&&"none"!==t)throw n;break;default:if(!xr()&&"none"!==t)throw n}}(t),ff(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,of(n,t)})).then((function(){if(n.c=af(t),e)return n.b.set(n.c,e,n.a)})):De()}))},S(lf,En),S(pf,Je),S(df,Je),S(vf,Je),(t=lf.prototype).yb=function(t){return Sf(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,aa(this.a,this.aa),this.dispatchEvent(new pf(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=u.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new N("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!t&&wr().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,ua(this.a,this.R),this.dispatchEvent(new df(this.R))}},t.Gc=function(t){this.J.push(t),ha(this.a,r.Z.SDK_VERSION?Cr(r.Z.SDK_VERSION,this.J):null),this.dispatchEvent(new vf(this.J))},t.Ga=function(){return Z(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:If(this).options.apiKey,authDomain:If(this).options.authDomain,appName:If(this).name,currentUser:Tf(this)&&Tf(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?T(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return wf(i,_a(i.a,o))}))},t.Xc=function(t){if(!Pr())return Ce(new N("operation-not-supported-in-this-environment"));var e=this,n=Yi(t.providerId),i=qr(),o=null;(!Fr()||Tr())&&If(this).options.authDomain&&t.isOAuthProvider&&(o=Tu(If(this).options.authDomain,If(this).options.apiKey,If(this).name,"signInViaPopup",t,null,i,r.Z.SDK_VERSION||null,null,null,this.T(),this.R));var s=yr(o,n&&n.va,n&&n.ua);return Sf(this,n=gf(this).then((function(n){return Bc(n,s,"signInViaPopup",t,i,!!o,e.T())})).then((function(){return new Te((function(t,n){e.na("signInViaPopup",null,new N("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=i,e.c=Hc(e.b,e,"signInViaPopup",s,i)}))})).then((function(t){return s&&gr(s),t?ti(t):null})).o((function(t){throw s&&gr(s),t})))},t.Yc=function(t){if(!Pr())return Ce(new N("operation-not-supported-in-this-environment"));var e=this;return Sf(this,gf(this).then((function(){return function(t){return ff(t,(function(){return t.b.set(sf,t.c.F,t.a)}))}(e.i)})).then((function(){return Gc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.ra=function(){var t=this;return yf(this).then((function(e){return t.b&&Yc(t.b.b),e})).o((function(e){throw t.b&&Yc(t.b.b),e}))},t.dd=function(t){if(!t)return Ce(new N("null-user"));if(this.S!=t.tenantId)return Ce(new N("tenant-id-mismatch"));var e=this,n={};n.apiKey=If(this).options.apiKey,n.authDomain=If(this).options.authDomain,n.appName=If(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[na]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new _h(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&kh(e,r),Kh(e,t),e}(t,n,e.D,e.Ga());return Sf(this,this.h.then((function(){if(If(e).options.apiKey!=t.l)return r.reload()})).then((function(){return Tf(e)&&t.uid==Tf(e).uid?(Kh(Tf(e),t),e.da(t)):(bf(e,r),Lh(r),e.da(r))})).then((function(){_f(e)})))},t.Bb=function(){var t=this;return Sf(this,this.h.then((function(){return t.b&&Yc(t.b.b),Tf(t)?(bf(t,null),cf(t.i).then((function(){_f(t)}))):De()})))},t.Zc=function(){var t=this;return hf(this.i,If(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=Tf(t)&&e){n=Tf(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Kh(Tf(t),e),Tf(t).I();(Tf(t)||e)&&(bf(t,e),e&&(Lh(e),e.ha=t.D),t.b&&Vc(t.b,t),_f(t))}}))},t.da=function(t){return uf(this.i,t)},t.mc=function(){_f(this),this.da(Tf(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return wf(e,De(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(Tf(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),Sf(t,t.h.then((function(){!t.l&&Q(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(Ef(t)))})))}(this,(function(){t.next(Tf(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof t?t(Tf(r)):"function"===typeof t.next&&t.next(Tf(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof t?t(Tf(r)):"function"===typeof t.next&&t.next(Tf(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return Sf(this,this.h.then((function(){return Tf(e)?Tf(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return wf(e,au(e.a,eu,{token:t}))})).then((function(t){var n=t.user;return Bh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return wf(n,au(n.a,nu,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return wf(n,au(n.a,Ca,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return wf(e,t.ka(e.a))}))},t.Sc=function(t){return Xr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=Tf(t);if(e&&e.isAnonymous){var n=ti({providerId:null,isNewUser:!1});return ti({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return wf(t,t.a.Ab()).then((function(e){var n=e.user;return Bh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return Tf(this)&&Tf(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&Tf(this)&&Oh(Tf(this))},t.Pc=function(t){var e=this;H(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&Tf(this)&&Rh(Tf(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),Sf(this,this.h.then((function(){e.l||Q(e.s,t)&&t(Ef(e))})))},t.removeAuthTokenListener=function(t){Y(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(af("local"),t.a,this.ja),this.b&&(jc(this.b,this),Yc(this.b.b)),Promise.resolve()},t.hc=function(t){return Sf(this,function(t,e){return au(t,Oa,{identifier:e,continueUri:Lr()?lr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Lo(t)},t.xb=function(t,e){var n=this;return Sf(this,De().then((function(){var t=new Ri(e);if(!t.c)throw new N("argument-error",Li+" must be true when sending sign in link to email");return Bi(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return Sf(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return Sf(this,this.a.Sa(t).then((function(t){return new ci(t)})))},t.kb=function(t){return Sf(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return Sf(this,De().then((function(){return"undefined"===typeof e||vt(e)?{}:Bi(new Ri(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return Sf(this,rh(this,t,e,T(this.ab,this)))},t.Vc=function(t,e){var n=this;return Sf(this,De().then((function(){var r=e||lr(),i=Po(t,r);if(!(r=Lo(r)))throw new N("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new N("tenant-id-mismatch");return n.ab(i)})))},Af.prototype.render=function(){},Af.prototype.reset=function(){},Af.prototype.getResponse=function(){},Af.prototype.execute=function(){};var kf=null;function Df(t,e){return(e=Cf(e))&&t.a[e]||null}function Cf(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function Of(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=he(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():fn(this.f,"click",this.i)}function Rf(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function xf(){}function Pf(){}Nf.prototype.render=function(t,e){return this.a[this.b.toString()]=new Of(t,e),this.b++},Nf.prototype.reset=function(t){var e=Df(this,t);t=Cf(t),e&&t&&(e.delete(),delete this.a[t])},Nf.prototype.getResponse=function(t){return(t=Df(this,t))?t.getResponse():null},Nf.prototype.execute=function(t){(t=Df(this,t))&&t.execute()},Of.prototype.getResponse=function(){return Rf(this),this.b},Of.prototype.execute=function(){Rf(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},Of.prototype.delete=function(){Rf(this),this.g=!0,clearTimeout(this.a),this.a=null,dn(this.f,"click",this.i)},Jr(xf,"FACTOR_ID","phone"),Pf.prototype.g=function(){return kf||(kf=new Nf),De(kf)},Pf.prototype.c=function(){};var Lf=null;function Mf(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ff=new wt(_t,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Vf=new Gr(3e4,6e4);Mf.prototype.g=function(t){var e=this;return new Te((function(n,r){var i=setTimeout((function(){r(new N("network-request-failed"))}),Vf.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new N("internal-error"));delete u[e.a]},De(Ws(kt(Ff,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new N("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},Mf.prototype.c=function(){this.b--};var jf=null;function Uf(t,e,n,r,i,o,s){if(Jr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,s?(Lf||(Lf=new Pf),s=Lf):(jf||(jf=new Mf),s=jf),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Kf])throw new N("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Gf],!u.document)throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!he(e)||!this.i&&he(e).hasChildNodes())throw new N("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ta(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var c=this.a[qf];this.a[qf]=function(t){if(Hf(a,t),"function"===typeof c)c(t);else if("string"===typeof c){var e=Rr(c,u);"function"===typeof e&&e(t)}};var h=this.a[Bf];this.a[Bf]=function(){if(Hf(a,null),"function"===typeof h)h();else if("string"===typeof h){var t=Rr(h,u);"function"===typeof t&&t()}}}var qf="callback",Bf="expired-callback",Kf="sitekey",Gf="size";function Hf(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function zf(t,e){return t.h.push(e),e.oa((function(){X(t.h,e)})),e}function Wf(t){if(t.J)throw new N("internal-error","RecaptchaVerifier instance has been destroyed.")}function $f(t,e,n){var i=!1;try{this.b=n||r.Z.app()}catch(a){throw new N("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new N("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(a){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}s=r.Z.SDK_VERSION?Cr(r.Z.SDK_VERSION,s):null,Uf.call(this,n,t,e,(function(){try{var t=o.b.auth().la()}catch(e){t=null}return t}),s,x(D),i)}function Qf(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new N("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Xf.length)throw new N("internal-error","Argument validator received an unsupported number of arguments.");n=Xf[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new N("argument-error",t+" failed: "+r)}(t=Uf.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=zf(this,De().then((function(){if(Lr()&&!Er())return wr();throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,au(t.s,Ga,{})})).then((function(e){t.a[Kf]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Wf(this);var t=this;return zf(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=he(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ce&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Ht(s.name),'"'),s.type){o.push(' type="',Ht(s.type),'"');var a={};mt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=ge(i,o),s&&("string"===typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):fe(o,s)),2<r.length&&ve(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Wf(this);var t=this;return zf(this,this.render().then((function(e){return new Te((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Wf(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Wf(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=he(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},S($f,Uf);var Xf="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Yf(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"===typeof t}}}function Jf(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"===typeof t}}}function Zf(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function tl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"===typeof t}}}function el(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function nl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function rl(t,e){return g(t)&&"string"===typeof t.type&&t.type===e&&"function"===typeof t.Ha}function il(t){return g(t)&&"string"===typeof t.uid}function ol(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function sl(t,e){for(var n in e){var r=e[n].name;t[r]=cl(r,t[n],e[n].j)}}function al(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E((function(t){return this[t]}),n),set:E((function(t,e,n,r){Qf(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function ul(t,e,n,r){t[e]=cl(e,n,r)}function cl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Qf(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}sl(lf.prototype,{kb:{name:"applyActionCode",j:[Yf("code")]},Sa:{name:"checkActionCode",j:[Yf("code")]},ob:{name:"confirmPasswordReset",j:[Yf("code"),Yf("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Yf("email"),Yf("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Yf("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Yf("emailLink")]},Hc:{name:"onAuthStateChanged",j:[ol(Zf(),tl(),"nextOrObserver"),tl("opt_error",!0),tl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[ol(Zf(),tl(),"nextOrObserver"),tl("opt_error",!0),tl("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Yf("email"),ol(Zf("opt_actionCodeSettings",!0),el(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Yf("email"),Zf("actionCodeSettings")]},yb:{name:"setPersistence",j:[Yf("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[nl()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[nl()]},Tc:{name:"signInWithCustomToken",j:[Yf("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Yf("email"),Yf("password")]},Vc:{name:"signInWithEmailLink",j:[Yf("email"),Yf("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Yf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[ol({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof _h)}},el(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Yf(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Yf("url"),Zf("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Yf("code")]}}),al(lf.prototype,{lc:{name:"languageCode",lb:ol(Yf(),el(),"languageCode")},ti:{name:"tenantId",lb:ol(Yf(),el(),"tenantId")}}),lf.Persistence=rc,lf.Persistence.LOCAL="local",lf.Persistence.SESSION="session",lf.Persistence.NONE="none",sl(_h.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Jf("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Jf("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[nl()]},rb:{name:"linkWithCredential",j:[nl()]},Dc:{name:"linkWithPhoneNumber",j:[Yf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[nl()]},ub:{name:"reauthenticateWithCredential",j:[nl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Yf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[ol(Zf("opt_actionCodeSettings",!0),el(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Yf(null,!0)]},cd:{name:"unlink",j:[Yf("provider")]},Cb:{name:"updateEmail",j:[Yf("email")]},Db:{name:"updatePassword",j:[Yf("password")]},ed:{name:"updatePhoneNumber",j:[nl("phone")]},Eb:{name:"updateProfile",j:[Zf("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Yf("email"),ol(Zf("opt_actionCodeSettings",!0),el(null,!0),"opt_actionCodeSettings",!0)]}}),sl(Nf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),sl(Af.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),sl(Te.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),al(eh.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Jf("appVerificationDisabledForTesting")}}),sl(nh.prototype,{confirm:{name:"confirm",j:[Yf("verificationCode")]}}),ul(fo,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[bo,Ro,Fo,go],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[ol(Yf(),Zf(),"json")]),ul(xo,"credential",(function(t,e){return new Oo(t,e)}),[Yf("email"),Yf("password")]),sl(Oo.prototype,{w:{name:"toJSON",j:[Yf(null,!0)]}}),sl(Eo.prototype,{Ca:{name:"addScope",j:[Yf("scope")]},Ka:{name:"setCustomParameters",j:[Zf("customOAuthParameters")]}}),ul(Eo,"credential",_o,[ol(Yf(),Zf(),"token")]),ul(xo,"credentialWithLink",Po,[Yf("email"),Yf("emailLink")]),sl(So.prototype,{Ca:{name:"addScope",j:[Yf("scope")]},Ka:{name:"setCustomParameters",j:[Zf("customOAuthParameters")]}}),ul(So,"credential",Ao,[ol(Yf(),Zf(),"token")]),sl(No.prototype,{Ca:{name:"addScope",j:[Yf("scope")]},Ka:{name:"setCustomParameters",j:[Zf("customOAuthParameters")]}}),ul(No,"credential",ko,[ol(Yf(),ol(Zf(),el()),"idToken"),ol(Yf(),el(),"accessToken",!0)]),sl(Do.prototype,{Ka:{name:"setCustomParameters",j:[Zf("customOAuthParameters")]}}),ul(Do,"credential",Co,[ol(Yf(),Zf(),"token"),Yf("secret",!0)]),sl(To.prototype,{Ca:{name:"addScope",j:[Yf("scope")]},credential:{name:"credential",j:[ol(Yf(),ol(Zf(),el()),"optionsOrIdToken"),ol(Yf(),el(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Zf("customOAuthParameters")]}}),sl(yo.prototype,{w:{name:"toJSON",j:[Yf(null,!0)]}}),sl(po.prototype,{w:{name:"toJSON",j:[Yf(null,!0)]}}),ul(jo,"credential",Uo,[Yf("verificationId"),Yf("verificationCode")]),sl(jo.prototype,{gb:{name:"verifyPhoneNumber",j:[ol(Yf(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?rl(t.session,co)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?rl(t.session,ho)&&il(t.multiFactorHint):t.session&&t.multiFactorUid?rl(t.session,ho)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]}}),sl(Mo.prototype,{w:{name:"toJSON",j:[Yf(null,!0)]}}),sl(N.prototype,{toJSON:{name:"toJSON",j:[Yf(null,!0)]}}),sl(Qo.prototype,{toJSON:{name:"toJSON",j:[Yf(null,!0)]}}),sl($o.prototype,{toJSON:{name:"toJSON",j:[Yf(null,!0)]}}),sl(uh.prototype,{toJSON:{name:"toJSON",j:[Yf(null,!0)]}}),sl(oh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),sl(dh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},Yf("displayName",!0)]},bd:{name:"unenroll",j:[ol({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:il},Yf(),"multiFactorInfoIdentifier")]}}),sl($f.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),ul(Ei,"parseLink",Oi,[Yf("link")]),ul(xf,"assertion",(function(t){return new lh(t)}),[nl("phone")]),function(){if("undefined"===typeof r.Z||!r.Z.INTERNAL||!r.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:fi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:hi,VERIFY_AND_CHANGE_EMAIL:li,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:lf,AuthCredential:fo,Error:N};ul(t,"EmailAuthProvider",xo,[]),ul(t,"FacebookAuthProvider",Eo,[]),ul(t,"GithubAuthProvider",So,[]),ul(t,"GoogleAuthProvider",No,[]),ul(t,"TwitterAuthProvider",Do,[]),ul(t,"OAuthProvider",To,[Yf("providerId")]),ul(t,"SAMLAuthProvider",Io,[Yf("providerId")]),ul(t,"PhoneAuthProvider",jo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof lf)}}]),ul(t,"RecaptchaVerifier",$f,[ol(Yf(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Zf("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof r.Z.app.App)}}]),ul(t,"ActionCodeURL",Ei,[]),ul(t,"PhoneMultiFactorGenerator",xf,[]),r.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new lf(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),r.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:T((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:T(t.nc,t),addAuthTokenListener:T(t.cc,t),removeAuthTokenListener:T(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.Z.registerVersion("@firebase/auth","0.16.8"),r.Z.INTERNAL.extendNamespace({User:_h})}()}).apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},8679:function(t,e,n){"use strict";var r=n(1296),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function u(t){return r.isMemo(t)?s:a[t.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,h=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,d=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(d){var i=p(n);i&&i!==d&&t(e,i,r)}var s=h(n);f&&(s=s.concat(f(n)));for(var a=u(e),v=u(n),g=0;g<s.length;++g){var y=s[g];if(!o[y]&&(!r||!r[y])&&(!v||!v[y])&&(!a||!a[y])){var m=l(n,y);try{c(e,y,m)}catch(b){}}}}return e}},6103:function(t,e){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,h=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,l=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,m=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function I(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case h:case f:case o:case a:case s:case p:return t;default:switch(t=t&&t.$$typeof){case c:case l:case g:case v:case u:return t;default:return e}}case i:return e}}}function T(t){return I(t)===f}e.AsyncMode=h,e.ConcurrentMode=f,e.ContextConsumer=c,e.ContextProvider=u,e.Element=r,e.ForwardRef=l,e.Fragment=o,e.Lazy=g,e.Memo=v,e.Portal=i,e.Profiler=a,e.StrictMode=s,e.Suspense=p,e.isAsyncMode=function(t){return T(t)||I(t)===h},e.isConcurrentMode=T,e.isContextConsumer=function(t){return I(t)===c},e.isContextProvider=function(t){return I(t)===u},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return I(t)===l},e.isFragment=function(t){return I(t)===o},e.isLazy=function(t){return I(t)===g},e.isMemo=function(t){return I(t)===v},e.isPortal=function(t){return I(t)===i},e.isProfiler=function(t){return I(t)===a},e.isStrictMode=function(t){return I(t)===s},e.isSuspense=function(t){return I(t)===p},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===f||t===a||t===s||t===p||t===d||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===v||t.$$typeof===u||t.$$typeof===c||t.$$typeof===l||t.$$typeof===m||t.$$typeof===b||t.$$typeof===w||t.$$typeof===y)},e.typeOf=I},1296:function(t,e,n){"use strict";t.exports=n(6103)},2906:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return $p}});var r=n(4942),i=(n(7294),n(8135)),o=n(9254),s=n(5503),a=(n(7397),n(6983)),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function h(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(Bp){o(Bp)}}function a(t){try{u(r.throw(t))}catch(Bp){o(Bp)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function f(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(Bp){o=[6,Bp],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;var p=n(8448),d=n(4594),v=function(t,e){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function g(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var y,m="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},b=b||{},w=m||self;function I(){}function T(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function E(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var _="closure_uid_"+(1e9*Math.random()>>>0),S=0;function A(t,e,n){return t.call.apply(t.bind,arguments)}function N(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function k(t,e,n){return(k=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?A:N).apply(null,arguments)}function D(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function C(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function O(){this.s=this.s,this.o=this.o}var R={};O.prototype.s=!1,O.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,_)&&t[_]||(t[_]=++S)}(this);delete R[t]}},O.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var x=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},P=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function L(t){return Array.prototype.concat.apply([],arguments)}function M(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function F(t){return/^[\s\xa0]*$/.test(t)}var V,j=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function U(t,e){return-1!=t.indexOf(e)}function q(t,e){return t<e?-1:t>e?1:0}t:{var B=w.navigator;if(B){var K=B.userAgent;if(K){V=K;break t}}V=""}function G(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function H(t){var e={};for(var n in t)e[n]=t[n];return e}var z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<z.length;o++)n=z[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function $(t){return $[" "](t),t}$[" "]=I;var Q,X=U(V,"Opera"),Y=U(V,"Trident")||U(V,"MSIE"),J=U(V,"Edge"),Z=J||Y,tt=U(V,"Gecko")&&!(U(V.toLowerCase(),"webkit")&&!U(V,"Edge"))&&!(U(V,"Trident")||U(V,"MSIE"))&&!U(V,"Edge"),et=U(V.toLowerCase(),"webkit")&&!U(V,"Edge");function nt(){var t=w.document;return t?t.documentMode:void 0}t:{var rt="",it=function(){var t=V;return tt?/rv:([^\);]+)(\)|;)/.exec(t):J?/Edge\/([\d\.]+)/.exec(t):Y?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):et?/WebKit\/(\S+)/.exec(t):X?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(it&&(rt=it?it[1]:""),Y){var ot=nt();if(null!=ot&&ot>parseFloat(rt)){Q=String(ot);break t}}Q=rt}var st,at={};function ut(){return function(t){var e=at;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=j(String(Q)).split("."),n=j("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=q(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||q(0==o[2].length,0==s[2].length)||q(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(w.document&&Y){var ct=nt();st=ct||(parseInt(Q,10)||void 0)}else st=void 0;var ht=st,ft=function(){if(!w.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{w.addEventListener("test",I,e),w.removeEventListener("test",I,e)}catch(n){}return t}();function lt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function pt(t,e){if(lt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(tt){t:{try{$(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:dt[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&pt.Z.h.call(this)}}lt.prototype.h=function(){this.defaultPrevented=!0},C(pt,lt);var dt={2:"touch",3:"pen",4:"mouse"};pt.prototype.h=function(){pt.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var vt="closure_listenable_"+(1e6*Math.random()|0),gt=0;function yt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++gt,this.ca=this.fa=!1}function mt(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function bt(t){this.src=t,this.g={},this.h=0}function wt(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=x(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(mt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function It(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}bt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=It(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new yt(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var Tt="closure_lm_"+(1e6*Math.random()|0),Et={};function _t(t,e,n,r,i){if(r&&r.once)return At(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)_t(t,e[o],n,r,i);return null}return n=xt(n),t&&t[vt]?t.N(e,n,E(r)?!!r.capture:!!r,i):St(t,e,n,!1,r,i)}function St(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=E(i)?!!i.capture:!!i,a=Ot(t);if(a||(t[Tt]=a=new bt(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=Ct;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ft||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Dt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function At(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)At(t,e[o],n,r,i);return null}return n=xt(n),t&&t[vt]?t.O(e,n,E(r)?!!r.capture:!!r,i):St(t,e,n,!0,r,i)}function Nt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Nt(t,e[o],n,r,i);else r=E(r)?!!r.capture:!!r,n=xt(n),t&&t[vt]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=It(o=t.g[e],n,r,i))&&(mt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=Ot(t))&&(e=t.g[e.toString()],t=-1,e&&(t=It(e,n,r,i)),(n=-1<t?e[t]:null)&&kt(n))}function kt(t){if("number"!==typeof t&&t&&!t.ca){var e=t.src;if(e&&e[vt])wt(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Dt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ot(e))?(wt(n,t),0==n.h&&(n.src=null,e[Tt]=null)):mt(t)}}}function Dt(t){return t in Et?Et[t]:Et[t]="on"+t}function Ct(t,e){if(t.ca)t=!0;else{e=new pt(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&kt(t),t=n.call(r,e)}return t}function Ot(t){return(t=t[Tt])instanceof bt?t:null}var Rt="__closure_events_fn_"+(1e9*Math.random()>>>0);function xt(t){return"function"===typeof t?t:(t[Rt]||(t[Rt]=function(e){return t.handleEvent(e)}),t[Rt])}function Pt(){O.call(this),this.i=new bt(this),this.P=this,this.I=null}function Lt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"===typeof e)e=new lt(e,t);else if(e instanceof lt)e.target=e.target||t;else{var i=e;W(e=new lt(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Mt(s,r,!0,e)&&i}if(i=Mt(s=e.g=t,r,!0,e)&&i,i=Mt(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Mt(s=e.g=n[o],r,!1,e)&&i}function Mt(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&wt(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}C(Pt,O),Pt.prototype[vt]=!0,Pt.prototype.removeEventListener=function(t,e,n,r){Nt(this,t,e,n,r)},Pt.prototype.M=function(){if(Pt.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)mt(n[r]);delete e.g[t],e.h--}}this.I=null},Pt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Pt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Ft=w.JSON.stringify;function Vt(){var t=zt,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var jt,Ut=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=qt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),qt=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Bt}),(function(t){return t.reset()})),Bt=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Kt(t){w.setTimeout((function(){throw t}),0)}function Gt(t,e){jt||function(){var t=w.Promise.resolve(void 0);jt=function(){t.then(Wt)}}(),Ht||(jt(),Ht=!0),zt.add(t,e)}var Ht=!1,zt=new Ut;function Wt(){for(var t;t=Vt();){try{t.h.call(t.g)}catch(n){Kt(n)}var e=qt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ht=!1}function $t(t,e){Pt.call(this),this.h=t||1,this.g=e||w,this.j=k(this.kb,this),this.l=Date.now()}function Qt(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Xt(t,e,n){if("function"===typeof t)n&&(t=k(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=k(t.handleEvent,t)}return 2147483647<Number(e)?-1:w.setTimeout(t,e||0)}function Yt(t){t.g=Xt((function(){t.g=null,t.i&&(t.i=!1,Yt(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}C($t,Pt),(y=$t.prototype).da=!1,y.S=null,y.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Lt(this,"tick"),this.da&&(Qt(this),this.start()))}},y.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},y.M=function(){$t.Z.M.call(this),Qt(this),delete this.g};var Jt=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Yt(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(w.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(O);function Zt(t){O.call(this),this.h=t,this.g={}}C(Zt,O);var te=[];function ee(t,e,n,r){Array.isArray(n)||(n&&(te[0]=n.toString()),n=te);for(var i=0;i<n.length;i++){var o=_t(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function ne(t){G(t.g,(function(t,e){this.g.hasOwnProperty(e)&&kt(t)}),t),t.g={}}function re(){this.g=!0}function ie(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ft(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Zt.prototype.M=function(){Zt.Z.M.call(this),ne(this)},Zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},re.prototype.Aa=function(){this.g=!1},re.prototype.info=function(){};var oe={},se=null;function ae(){return se=se||new Pt}function ue(t){lt.call(this,oe.Ma,t)}function ce(t){var e=ae();Lt(e,new ue(e,t))}function he(t,e){lt.call(this,oe.STAT_EVENT,t),this.stat=e}function fe(t){var e=ae();Lt(e,new he(e,t))}function le(t,e){lt.call(this,oe.Na,t),this.size=e}function pe(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return w.setTimeout((function(){t()}),e)}oe.Ma="serverreachability",C(ue,lt),oe.STAT_EVENT="statevent",C(he,lt),oe.Na="timingevent",C(le,lt);var de={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ve={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ge(){}function ye(t){return t.h||(t.h=t.i())}function me(){}ge.prototype.h=null;var be,we={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ie(){lt.call(this,"d")}function Te(){lt.call(this,"c")}function Ee(){}function _e(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Zt(this),this.P=Ae,t=Z?125:void 0,this.W=new $t(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Se}function Se(){this.i=null,this.g="",this.h=!1}C(Ie,lt),C(Te,lt),C(Ee,ge),Ee.prototype.g=function(){return new XMLHttpRequest},Ee.prototype.i=function(){return{}},be=new Ee;var Ae=45e3,Ne={},ke={};function De(t,e,n){t.K=1,t.v=Je(ze(e)),t.s=n,t.U=!0,Ce(t,null)}function Ce(t,e){t.F=Date.now(),Pe(t),t.A=ze(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),ln(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Se,t.g=dr(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Jt(k(t.Ia,t,t.g),t.O)),ee(t.V,t.g,"readystatechange",t.gb),e=t.H?H(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ce(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Oe(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Re(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=xe(t,n))==ke){4==e&&(t.o=4,fe(14),i=!1),ie(t.j,t.m,null,"[Incomplete Response]");break}if(r==Ne){t.o=4,fe(15),ie(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}ie(t.j,t.m,r,null),je(t,r)}Oe(t)&&r!=ke&&r!=Ne&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,fe(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),sr(e),e.L=!0,fe(11))):(ie(t.j,t.m,n,"[Invalid Chunked Response]"),Ve(t),Fe(t))}function xe(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?ke:(n=Number(e.substring(n,r)),isNaN(n)?Ne:(r+=1)+n>e.length?ke:(e=e.substr(r,n),t.C=r+n,e))}function Pe(t){t.Y=Date.now()+t.P,Le(t,t.P)}function Le(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=pe(k(t.eb,t),e)}function Me(t){t.B&&(w.clearTimeout(t.B),t.B=null)}function Fe(t){0==t.l.G||t.I||cr(t.l,t)}function Ve(t){Me(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Qt(t.W),ne(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function je(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||wn(n.i,t)))if(n.I=t.N,!t.J&&wn(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;ur(n),Yn(n)}or(n),fe(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=pe(k(n.ab,n),6e3));if(1>=bn(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else fr(n,11)}else if((t.J||n.g==t)&&ur(n),!F(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=r.i;!f.g&&(U(h,"spdy")||U(h,"quic")||U(h,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(In(f,f.h),f.h=null))}if(r.D){var l=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;l&&(r.sa=l,Ye(r.F,r.D,l))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=pr(r,r.H?r.la:null,r.W),p.J){Tn(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(Me(d),Pe(d)),r.g=p}else ir(r);0<n.l.length&&tr(n)}else"stop"!=o[0]&&"close"!=o[0]||fr(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?fr(n,7):Xn(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}ce(4)}catch(o){}}function Ue(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(T(t)||"string"===typeof t)P(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(T(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"===typeof t)return t.split("");if(T(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function qe(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof qe)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Be(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Ke(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Ke(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Ke(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(y=_e.prototype).setTimeout=function(t){this.P=t},y.gb=function(t){t=t.target;var e=this.L;e&&3==Hn(t)?e.l():this.Ia(t)},y.Ia=function(t){try{if(t==this.g)t:{var e=Hn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Z||this.g&&(this.h.h||this.g.ga()||zn(this.g)))){this.I||4!=e||7==n||ce(8==n||0>=r?3:2),Me(this);var i=this.g.ba();this.N=i;e:if(Oe(this)){var o=zn(this.g);t="";var s=o.length,a=4==Hn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ve(this),Fe(this);var u="";break e}this.h.i=new w.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(c)){var f=c;break e}}f=null}if(!(i=f)){this.i=!1,this.o=3,fe(12),Ve(this),Fe(this);break t}ie(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,je(this,i)}this.U?(Re(this,e,u),Z&&this.i&&3==e&&(ee(this.V,this.W,"tick",this.fb),this.W.start())):(ie(this.j,this.m,u,null),je(this,u)),4==e&&Ve(this),this.i&&!this.I&&(4==e?cr(this.l,this):(this.i=!1,Pe(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,fe(12)):(this.o=0,fe(13)),Ve(this),Fe(this)}}}catch(e){}},y.fb=function(){if(this.g){var t=Hn(this.g),e=this.g.ga();this.C<e.length&&(Me(this),Re(this,t,e),this.i&&4!=t&&Pe(this))}},y.cancel=function(){this.I=!0,Ve(this)},y.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(ce(3),fe(17)),Ve(this),this.o=2,Fe(this)):Le(this,this.Y-t)},(y=qe.prototype).R=function(){Be(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},y.T=function(){return Be(this),this.g.concat()},y.get=function(t,e){return Ke(this.h,t)?this.h[t]:e},y.set=function(t,e){Ke(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},y.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ge=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function He(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof He){this.g=void 0!==e?e:t.g,We(this,t.j),this.s=t.s,$e(this,t.i),Qe(this,t.m),this.l=t.l,e=t.h;var n=new un;n.i=e.i,e.g&&(n.g=new qe(e.g),n.h=e.h),Xe(this,n),this.o=t.o}else t&&(n=String(t).match(Ge))?(this.g=!!e,We(this,n[1]||"",!0),this.s=Ze(n[2]||""),$e(this,n[3]||"",!0),Qe(this,n[4]),this.l=Ze(n[5]||"",!0),Xe(this,n[6]||"",!0),this.o=Ze(n[7]||"")):(this.g=!!e,this.h=new un(null,this.g))}function ze(t){return new He(t)}function We(t,e,n){t.j=n?Ze(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function $e(t,e,n){t.i=n?Ze(e,!0):e}function Qe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Xe(t,e,n){e instanceof un?(t.h=e,function(t,e){e&&!t.j&&(cn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(hn(this,e),ln(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=tn(e,sn)),t.h=new un(e,t.g))}function Ye(t,e,n){t.h.set(e,n)}function Je(t){return Ye(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ze(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function tn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,en),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function en(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}He.prototype.toString=function(){var t=[],e=this.j;e&&t.push(tn(e,nn,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(tn(e,nn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(tn(n,"/"==n.charAt(0)?on:rn,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",tn(n,an)),t.join("")};var nn=/[#\/\?@]/g,rn=/[#\?:]/g,on=/[#\?]/g,sn=/[#\?@]/g,an=/#/g;function un(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function cn(t){t.g||(t.g=new qe,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function hn(t,e){cn(t),e=pn(t,e),Ke(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Ke((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Be(t)))}function fn(t,e){return cn(t),e=pn(t,e),Ke(t.g.h,e)}function ln(t,e,n){hn(t,e),0<n.length&&(t.i=null,t.g.set(pn(t,e),M(n)),t.h+=n.length)}function pn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(y=un.prototype).add=function(t,e){cn(this),this.i=null,t=pn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},y.forEach=function(t,e){cn(this),this.g.forEach((function(n,r){P(n,(function(n){t.call(e,n,r,this)}),this)}),this)},y.T=function(){cn(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},y.R=function(t){cn(this);var e=[];if("string"===typeof t)fn(this,t)&&(e=L(e,this.g.get(pn(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=L(e,t[n])}return e},y.set=function(t,e){return cn(this),this.i=null,fn(this,t=pn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},y.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},y.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var dn=function(t,e){this.h=t,this.g=e};function vn(t){this.l=t||yn,w.PerformanceNavigationTiming?t=0<(t=w.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(w.g&&w.g.Ea&&w.g.Ea()&&w.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var gn,yn=10;function mn(t){return!!t.h||!!t.g&&t.g.size>=t.j}function bn(t){return t.h?1:t.g?t.g.size:0}function wn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function In(t,e){t.g?t.g.add(e):t.h=e}function Tn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function En(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=g(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return M(t.i)}function _n(){}function Sn(){this.g=new _n}function An(t,e,n){var r=n||"";try{Ue(t,(function(t,n){var i=t;E(t)&&(i=Ft(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(Bp){throw e.push(r+"type="+encodeURIComponent("_badmap")),Bp}}function Nn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function kn(t){this.l=t.$b||null,this.j=t.ib||!1}function Dn(t,e){Pt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Cn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vn.prototype.cancel=function(){var t,e;if(this.i=En(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=g(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},_n.prototype.stringify=function(t){return w.JSON.stringify(t,void 0)},_n.prototype.parse=function(t){return w.JSON.parse(t,void 0)},C(kn,ge),kn.prototype.g=function(){return new Dn(this.l,this.j)},kn.prototype.i=(gn={},function(){return gn}),C(Dn,Pt);var Cn=0;function On(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Rn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,xn(t)}function xn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(y=Dn.prototype).open=function(t,e){if(this.readyState!=Cn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,xn(this)},y.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||w).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},y.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rn(this)),this.readyState=Cn},y.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,xn(this)),this.g&&(this.readyState=3,xn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof w.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;On(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},y.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Rn(this):xn(this),3==this.readyState&&On(this)}},y.Ua=function(t){this.g&&(this.response=this.responseText=t,Rn(this))},y.Ta=function(t){this.g&&(this.response=t,Rn(this))},y.ha=function(){this.g&&Rn(this)},y.setRequestHeader=function(t,e){this.v.append(t,e)},y.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},y.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Dn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Pn=w.JSON.parse;function Ln(t){Pt.call(this),this.headers=new qe,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Mn,this.K=this.L=!1}C(Ln,Pt);var Mn="",Fn=/^https?$/i,Vn=["POST","PUT"];function jn(t){return"content-type"==t.toLowerCase()}function Un(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,qn(t),Kn(t)}function qn(t){t.D||(t.D=!0,Lt(t,"complete"),Lt(t,"error"))}function Bn(t){if(t.h&&"undefined"!=typeof b&&(!t.C[1]||4!=Hn(t)||2!=t.ba()))if(t.v&&4==Hn(t))Xt(t.Fa,0,t);else if(Lt(t,"readystatechange"),4==Hn(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Ge)[1]||null;if(!o&&w.self&&w.self.location){var s=w.self.location.protocol;o=s.substr(0,s.length-1)}i=!Fn.test(o?o.toLowerCase():"")}e=i}if(e)Lt(t,"complete"),Lt(t,"success");else{t.m=6;try{var a=2<Hn(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",qn(t)}}finally{Kn(t)}}}function Kn(t,e){if(t.g){Gn(t);var n=t.g,r=t.C[0]?I:null;t.g=null,t.C=null,e||Lt(t,"ready");try{n.onreadystatechange=r}catch(Bp){}}}function Gn(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(w.clearTimeout(t.A),t.A=null)}function Hn(t){return t.g?t.g.readyState:0}function zn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Mn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Wn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return G(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Ye(t,e,n))}function $n(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Qn(t){this.za=0,this.l=[],this.h=new re,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=$n("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=$n("baseRetryDelayMs",5e3,t),this.$a=$n("retryDelaySeedMs",1e4,t),this.Ya=$n("forwardChannelMaxRetries",2,t),this.ra=$n("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new vn(t&&t.concurrentRequestLimit),this.Ca=new Sn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Xn(t){if(Jn(t),3==t.G){var e=t.V++,n=ze(t.F);Ye(n,"SID",t.J),Ye(n,"RID",e),Ye(n,"TYPE","terminate"),nr(t,n),(e=new _e(t,t.h,e,void 0)).K=2,e.v=Je(ze(n)),n=!1,w.navigator&&w.navigator.sendBeacon&&(n=w.navigator.sendBeacon(e.v.toString(),"")),!n&&w.Image&&((new Image).src=e.v,n=!0),n||(e.g=dr(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Pe(e)}lr(t)}function Yn(t){t.g&&(sr(t),t.g.cancel(),t.g=null)}function Jn(t){Yn(t),t.u&&(w.clearTimeout(t.u),t.u=null),ur(t),t.i.cancel(),t.m&&("number"===typeof t.m&&w.clearTimeout(t.m),t.m=null)}function Zn(t,e){t.l.push(new dn(t.Za++,e)),3==t.G&&tr(t)}function tr(t){mn(t.i)||t.m||(t.m=!0,Gt(t.Ha,t),t.C=0)}function er(t,e){var n;n=e?e.m:t.V++;var r=ze(t.F);Ye(r,"SID",t.J),Ye(r,"RID",n),Ye(r,"AID",t.U),nr(t,r),t.o&&t.s&&Wn(r,t.o,t.s),n=new _e(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=rr(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),In(t.i,n),De(n,r,e)}function nr(t,e){t.j&&Ue({},(function(t,n){Ye(e,n,t)}))}function rr(t,e,n){n=Math.min(t.l.length,n);var r=t.j?k(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{An(h,s,"req"+c+"_")}catch(Yr){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function ir(t){t.g||t.u||(t.Y=1,Gt(t.Ga,t),t.A=0)}function or(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=pe(k(t.Ga,t),hr(t,t.A)),t.A++,!0)}function sr(t){null!=t.B&&(w.clearTimeout(t.B),t.B=null)}function ar(t){t.g=new _e(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=ze(t.oa);Ye(e,"RID","rpc"),Ye(e,"SID",t.J),Ye(e,"CI",t.N?"0":"1"),Ye(e,"AID",t.U),nr(t,e),Ye(e,"TYPE","xmlhttp"),t.o&&t.s&&Wn(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Je(ze(e)),n.s=null,n.U=!0,Ce(n,t)}function ur(t){null!=t.v&&(w.clearTimeout(t.v),t.v=null)}function cr(t,e){var n=null;if(t.g==e){ur(t),sr(t),t.g=null;var r=2}else{if(!wn(t.i,e))return;n=e.D,Tn(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Lt(r=ae(),new le(r,n,e,i)),tr(t)}else ir(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(bn(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.l=e.D.concat(t.l),!0):!(1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya))&&(t.m=pe(k(t.Ha,t,e),hr(t,t.C)),t.C++,!0))}(t,e)||2==r&&or(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:fr(t,5);break;case 4:fr(t,10);break;case 3:fr(t,6);break;default:fr(t,2)}}function hr(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function fr(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=k(t.jb,t);n||(n=new He("//www.google.com/images/cleardot.gif"),w.location&&"http"==w.location.protocol||We(n,"https"),Je(n)),function(t,e){var n=new re;if(w.Image){var r=new Image;r.onload=D(Nn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=D(Nn,n,r,"TestLoadImage: error",!1,e),r.onabort=D(Nn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=D(Nn,n,r,"TestLoadImage: timeout",!1,e),w.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else fe(2);t.G=0,t.j&&t.j.va(e),lr(t),Jn(t)}function lr(t){t.G=0,t.I=-1,t.j&&(0==En(t.i).length&&0==t.l.length||(t.i.i.length=0,M(t.l),t.l.length=0),t.j.ua())}function pr(t,e,n){var r=function(t){return t instanceof He?ze(t):new He(t,void 0)}(n);if(""!=r.i)e&&$e(r,e+"."+r.i),Qe(r,r.m);else{var i=w.location;r=function(t,e,n,r){var i=new He(null,void 0);return t&&We(i,t),e&&$e(i,e),n&&Qe(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&G(t.aa,(function(t,e){Ye(r,e,t)})),e=t.D,n=t.sa,e&&n&&Ye(r,e,n),Ye(r,"VER",t.ma),nr(t,r),r}function dr(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Ln(new kn({ib:!0})):new Ln(t.qa)).L=t.H,e}function vr(){}function gr(){if(Y&&!(10<=Number(ht)))throw Error("Environmental error: no available transport.")}function yr(t,e){Pt.call(this),this.g=new Qn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!F(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!F(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new wr(this)}function mr(t){Ie.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function br(){Te.call(this),this.status=1}function wr(t){this.g=t}(y=Ln.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():be.g(),this.C=this.u?ye(this.u):ye(be),this.g.onreadystatechange=k(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Un(this,o)}t=n||"";var i=new qe(this.headers);r&&Ue(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=jn,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(i.T()),n=w.FormData&&t instanceof w.FormData,!(0<=x(Vn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Gn(this),0<this.B&&((this.K=function(t){return Y&&ut()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=k(this.pa,this)):this.A=Xt(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Un(this,o)}},y.pa=function(){"undefined"!=typeof b&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Lt(this,"timeout"),this.abort(8))},y.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Lt(this,"complete"),Lt(this,"abort"),Kn(this))},y.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Kn(this,!0)),Ln.Z.M.call(this)},y.Fa=function(){this.s||(this.F||this.v||this.l?Bn(this):this.cb())},y.cb=function(){Bn(this)},y.ba=function(){try{return 2<Hn(this)?this.g.status:-1}catch(gn){return-1}},y.ga=function(){try{return this.g?this.g.responseText:""}catch(gn){return""}},y.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Pn(e)}},y.Da=function(){return this.m},y.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(y=Qn.prototype).ma=8,y.G=1,y.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},y.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new _e(this,this.h,t,void 0),n=this.s;if(this.P&&(n?W(n=H(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"===typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=rr(this,e,r),Ye(i=ze(this.F),"RID",t),Ye(i,"CVER",22),this.D&&Ye(i,"X-HTTP-Session-Id",this.D),nr(this,i),this.o&&n&&Wn(i,this.o,n),In(this.i,e),this.Ra&&Ye(i,"TYPE","init"),this.ja?(Ye(i,"$req",r),Ye(i,"SID","null"),e.$=!0,De(e,i,null)):De(e,i,r),this.G=2}}else 3==this.G&&(t?er(this,t):0==this.l.length||mn(this.i)||er(this))},y.Ga=function(){if(this.u=null,ar(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=pe(k(this.bb,this),t)}},y.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,fe(10),Yn(this),ar(this))},y.ab=function(){null!=this.v&&(this.v=null,Yn(this),or(this),fe(19))},y.jb=function(t){t?(this.h.info("Successfully pinged google.com"),fe(2)):(this.h.info("Failed to ping google.com"),fe(1))},(y=vr.prototype).xa=function(){},y.wa=function(){},y.va=function(){},y.ua=function(){},y.Oa=function(){},gr.prototype.g=function(t,e){return new yr(t,e)},C(yr,Pt),yr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Gt(k(t.hb,t,e))),fe(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=pr(t,null,t.W),tr(t)},yr.prototype.close=function(){Xn(this.g)},yr.prototype.u=function(t){if("string"===typeof t){var e={};e.__data__=t,Zn(this.g,e)}else this.v?((e={}).__data__=Ft(t),Zn(this.g,e)):Zn(this.g,t)},yr.prototype.M=function(){this.g.j=null,delete this.j,Xn(this.g),delete this.g,yr.Z.M.call(this)},C(mr,Ie),C(br,Te),C(wr,vr),wr.prototype.xa=function(){Lt(this.g,"a")},wr.prototype.wa=function(t){Lt(this.g,new mr(t))},wr.prototype.va=function(t){Lt(this.g,new br(t))},wr.prototype.ua=function(){Lt(this.g,"b")},gr.prototype.createWebChannel=gr.prototype.g,yr.prototype.send=yr.prototype.u,yr.prototype.open=yr.prototype.m,yr.prototype.close=yr.prototype.close,de.NO_ERROR=0,de.TIMEOUT=8,de.HTTP_ERROR=6,ve.COMPLETE="complete",me.EventType=we,we.OPEN="a",we.CLOSE="b",we.ERROR="c",we.MESSAGE="d",Pt.prototype.listen=Pt.prototype.N,Ln.prototype.listenOnce=Ln.prototype.O,Ln.prototype.getLastError=Ln.prototype.La,Ln.prototype.getLastErrorCode=Ln.prototype.Da,Ln.prototype.getStatus=Ln.prototype.ba,Ln.prototype.getResponseJson=Ln.prototype.Qa,Ln.prototype.getResponseText=Ln.prototype.ga,Ln.prototype.send=Ln.prototype.ea;var Ir=function(){return new gr},Tr=function(){return ae()},Er=de,_r=ve,Sr=oe,Ar={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Nr=kn,kr=me,Dr=Ln,Cr=n(4155),Or=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Or.o=-1;var Rr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return c(e,t),e}(Error),Pr=new d.Yd("@firebase/firestore");function Lr(){return Pr.logLevel}function Mr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Pr.logLevel<=d.in.DEBUG){var r=e.map(jr);Pr.debug.apply(Pr,l(["Firestore (8.10.0): "+t],r))}}function Fr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Pr.logLevel<=d.in.ERROR){var r=e.map(jr);Pr.error.apply(Pr,l(["Firestore (8.10.0): "+t],r))}}function Vr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Pr.logLevel<=d.in.WARN){var r=e.map(jr);Pr.warn.apply(Pr,l(["Firestore (8.10.0): "+t],r))}}function jr(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Ur(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+t;throw Fr(e),new Error(e)}function qr(t,e){t||Ur()}function Br(t,e){return t}function Kr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Gr=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Kr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Hr(t,e){return t<e?-1:t>e?1:0}function zr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Wr(t){return t+"\0"}var $r=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new xr(Rr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new xr(Rr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new xr(Rr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new xr(Rr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Hr(this.nanoseconds,t.nanoseconds):Hr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Qr=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new $r(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Xr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Zr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Ur(),void 0===n?n=t.length-e:n>t.length-e&&Ur(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ti=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new xr(Rr.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Zr),ei=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ni=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ei.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new xr(Rr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new xr(Rr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new xr(Rr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new xr(Rr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Zr),ri=function(){function t(t){this.fields=t,t.sort(ni.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return zr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),ii=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Hr(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();ii.EMPTY_BYTE_STRING=new ii("");var oi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function si(t){if(qr(!!t),"string"==typeof t){var e=0,n=oi.exec(t);if(qr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ai(t.seconds),nanos:ai(t.nanos)}}function ai(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ui(t){return"string"==typeof t?ii.fromBase64String(t):ii.fromUint8Array(t)}function ci(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function hi(t){var e=t.mapValue.fields.__previous_value__;return ci(e)?hi(e):e}function fi(t){var e=si(t.mapValue.fields.__local_write_time__.timestampValue);return new $r(e.seconds,e.nanos)}function li(t){return null==t}function pi(t){return 0===t&&1/t==-1/0}function di(t){return"number"==typeof t&&Number.isInteger(t)&&!pi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var vi=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(ti.fromString(e))},t.fromName=function(e){return new t(ti.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ti.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return ti.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new ti(e.slice()))},t}();function gi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ci(t)?4:10:Ur()}function yi(t,e){var n=gi(t);if(n!==gi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fi(t).isEqual(fi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=si(t.timestampValue),r=si(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ui(t.bytesValue).isEqual(ui(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ai(t.geoPointValue.latitude)===ai(e.geoPointValue.latitude)&&ai(t.geoPointValue.longitude)===ai(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ai(t.integerValue)===ai(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ai(t.doubleValue),r=ai(e.doubleValue);return n===r?pi(n)===pi(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return zr(t.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Xr(n)!==Xr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!yi(n[i],r[i])))return!1;return!0}(t,e);default:return Ur()}}function mi(t,e){return void 0!==(t.values||[]).find((function(t){return yi(t,e)}))}function bi(t,e){var n=gi(t),r=gi(e);if(n!==r)return Hr(n,r);switch(n){case 0:return 0;case 1:return Hr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ai(t.integerValue||t.doubleValue),r=ai(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return wi(t.timestampValue,e.timestampValue);case 4:return wi(fi(t),fi(e));case 5:return Hr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ui(t),r=ui(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Hr(n[i],r[i]);if(0!==o)return o}return Hr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Hr(ai(t.latitude),ai(e.latitude));return 0!==n?n:Hr(ai(t.longitude),ai(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=bi(n[i],r[i]);if(o)return o}return Hr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Hr(r[s],o[s]);if(0!==a)return a;var u=bi(n[r[s]],i[o[s]]);if(0!==u)return u}return Hr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Ur()}}function wi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Hr(t,e);var n=si(t),r=si(e),i=Hr(n.seconds,r.seconds);return 0!==i?i:Hr(n.nanos,r.nanos)}function Ii(t){return Ti(t)}function Ti(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=si(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ui(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,vi.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Ti(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Ti(t.fields[o])}return e+"}"}(t.mapValue):Ur();var e,n}function Ei(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function _i(t){return!!t&&"integerValue"in t}function Si(t){return!!t&&"arrayValue"in t}function Ai(t){return!!t&&"nullValue"in t}function Ni(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ki(t){return!!t&&"mapValue"in t}function Di(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Yr(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Di(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Di(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Ci=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!ki(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Di(e)},t.prototype.setAll=function(t){var e=this,n=ni.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Di(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());ki(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return yi(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];ki(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Yr(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(Di(this.value))},t}();function Oi(t){var e=[];return Yr(t.fields,(function(t,n){var r=new ni([t]);if(ki(n)){var i=Oi(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new ri(e)}var Ri=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Qr.min(),Ci.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Ci.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Ci.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ci.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ci.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),xi=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Pi(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new xi(t,e,n,r,i,o,s)}function Li(t){var e=Br(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Ii(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),li(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=$i(e.startAt)),e.endAt&&(n+="|ub:",n+=$i(e.endAt)),e.h=n}return e.h}function Mi(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Xi(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!yi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ji(t.startAt,e.startAt)&&Ji(t.endAt,e.endAt)}function Fi(t){return vi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Vi=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return c(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new ji(t,n,r):"array-contains"===n?new Ki(t,r):"in"===n?new Gi(t,r):"not-in"===n?new Hi(t,r):"array-contains-any"===n?new zi(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Ui(t,n):new qi(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(bi(e,this.value)):null!==e&&gi(this.value)===gi(e)&&this.m(bi(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ur()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),ji=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=vi.fromName(r.referenceValue),i}return c(e,t),e.prototype.matches=function(t){var e=vi.comparator(t.key,this.key);return this.m(e)},e}(Vi),Ui=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Bi("in",n),r}return c(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Vi),qi=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Bi("not-in",n),r}return c(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Vi);function Bi(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return vi.fromName(t.referenceValue)}))}var Ki=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return c(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Si(e)&&mi(e.arrayValue,this.value)},e}(Vi),Gi=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return c(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&mi(this.value.arrayValue,e)},e}(Vi),Hi=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return c(e,t),e.prototype.matches=function(t){if(mi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!mi(this.value.arrayValue,e)},e}(Vi),zi=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return c(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Si(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return mi(e.value.arrayValue,t)}))},e}(Vi),Wi=function(t,e){this.position=t,this.before=e};function $i(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ii(t)})).join(",")}var Qi=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Xi(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Yi(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?vi.comparator(vi.fromName(s.referenceValue),n.key):bi(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ji(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!yi(t.position[n],e.position[n]))return!1;return!0}var Zi=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function to(t,e,n,r,i,o,s,a){return new Zi(t,e,n,r,i,o,s,a)}function eo(t){return new Zi(t)}function no(t){return!li(t.limit)&&"F"===t.limitType}function ro(t){return!li(t.limit)&&"L"===t.limitType}function io(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function oo(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function so(t){return null!==t.collectionGroup}function ao(t){var e=Br(t);if(null===e.p){e.p=[];var n=oo(e),r=io(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Qi(n)),e.p.push(new Qi(ni.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Qi(ni.keyField(),u))}}}return e.p}function uo(t){var e=Br(t);if(!e.T)if("F"===e.limitType)e.T=Pi(e.path,e.collectionGroup,ao(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ao(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Qi(o.field,s))}var a=e.endAt?new Wi(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Wi(e.startAt.position,!e.startAt.before):null;e.T=Pi(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function co(t,e,n){return new Zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ho(t,e){return Mi(uo(t),uo(e))&&t.limitType===e.limitType}function fo(t){return Li(uo(t))+"|lt:"+t.limitType}function lo(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ii(e.value);var e})).join(", ")+"]"),li(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+$i(t.startAt)),t.endAt&&(e+=", endAt: "+$i(t.endAt)),"Target("+e+")"}(uo(t))+"; limitType="+t.limitType+")"}function po(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):vi.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Yi(t.startAt,ao(t),e))&&(!t.endAt||!Yi(t.endAt,ao(t),e))}(t,e)}function vo(t){return function(e,n){for(var r=!1,i=0,o=ao(t);i<o.length;i++){var s=o[i],a=go(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function go(t,e,n){var r=t.field.isKeyField()?vi.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?bi(r,i):Ur()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ur()}}function yo(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pi(e)?"-0":e}}function mo(t){return{integerValue:""+t}}function bo(t,e){return di(e)?mo(e):yo(t,e)}var wo=function(){this._=void 0};function Io(t,e,n){return t instanceof _o?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof So?Ao(t,e):t instanceof No?ko(t,e):function(t,e){var n=Eo(t,e),r=Co(n)+Co(t.A);return _i(n)&&_i(t.A)?mo(r):yo(t.R,r)}(t,e)}function To(t,e,n){return t instanceof So?Ao(t,e):t instanceof No?ko(t,e):n}function Eo(t,e){return t instanceof Do?_i(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var _o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e}(wo),So=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return c(e,t),e}(wo);function Ao(t,e){for(var n=Oo(e),r=function(t){n.some((function(e){return yi(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var No=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return c(e,t),e}(wo);function ko(t,e){for(var n=Oo(e),r=function(t){n=n.filter((function(e){return!yi(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Do=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return c(e,t),e}(wo);function Co(t){return ai(t.integerValue||t.doubleValue)}function Oo(t){return Si(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ro=function(t,e){this.field=t,this.transform=e},xo=function(t,e){this.version=t,this.transformResults=e},Po=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Lo(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Mo=function(){};function Fo(t,e,n){t instanceof Bo?function(t,e,n){var r=t.value.clone(),i=Ho(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Ko?function(t,e,n){if(Lo(t.precondition,e)){var r=Ho(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Go(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Vo(t,e,n){t instanceof Bo?function(t,e,n){if(Lo(t.precondition,e)){var r=t.value.clone(),i=zo(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(qo(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Ko?function(t,e,n){if(Lo(t.precondition,e)){var r=zo(t.fieldTransforms,n,e),i=e.data;i.setAll(Go(t)),i.setAll(r),e.convertToFoundDocument(qo(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Lo(t.precondition,e)&&e.convertToNoDocument(Qr.min())}(t,e)}function jo(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Eo(o.transform,s||null);null!=a&&(null==n&&(n=Ci.empty()),n.set(o.field,a))}return n||null}function Uo(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&zr(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof So&&e instanceof So||t instanceof No&&e instanceof No?zr(t.elements,e.elements,yi):t instanceof Do&&e instanceof Do?yi(t.A,e.A):t instanceof _o&&e instanceof _o}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function qo(t){return t.isFoundDocument()?t.version:Qr.min()}var Bo=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return c(e,t),e}(Mo),Ko=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return c(e,t),e}(Mo);function Go(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Ho(t,e,n){var r=new Map;qr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,To(s,a,n[i]))}return r}function zo(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Io(a,u,e))}return r}var Wo,$o,Qo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return c(e,t),e}(Mo),Xo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return c(e,t),e}(Mo),Yo=function(t){this.count=t};function Jo(t){switch(t){case Rr.OK:return Ur();case Rr.CANCELLED:case Rr.UNKNOWN:case Rr.DEADLINE_EXCEEDED:case Rr.RESOURCE_EXHAUSTED:case Rr.INTERNAL:case Rr.UNAVAILABLE:case Rr.UNAUTHENTICATED:return!1;case Rr.INVALID_ARGUMENT:case Rr.NOT_FOUND:case Rr.ALREADY_EXISTS:case Rr.PERMISSION_DENIED:case Rr.FAILED_PRECONDITION:case Rr.ABORTED:case Rr.OUT_OF_RANGE:case Rr.UNIMPLEMENTED:case Rr.DATA_LOSS:return!0;default:return Ur()}}function Zo(t){if(void 0===t)return Fr("GRPC error has no .code"),Rr.UNKNOWN;switch(t){case Wo.OK:return Rr.OK;case Wo.CANCELLED:return Rr.CANCELLED;case Wo.UNKNOWN:return Rr.UNKNOWN;case Wo.DEADLINE_EXCEEDED:return Rr.DEADLINE_EXCEEDED;case Wo.RESOURCE_EXHAUSTED:return Rr.RESOURCE_EXHAUSTED;case Wo.INTERNAL:return Rr.INTERNAL;case Wo.UNAVAILABLE:return Rr.UNAVAILABLE;case Wo.UNAUTHENTICATED:return Rr.UNAUTHENTICATED;case Wo.INVALID_ARGUMENT:return Rr.INVALID_ARGUMENT;case Wo.NOT_FOUND:return Rr.NOT_FOUND;case Wo.ALREADY_EXISTS:return Rr.ALREADY_EXISTS;case Wo.PERMISSION_DENIED:return Rr.PERMISSION_DENIED;case Wo.FAILED_PRECONDITION:return Rr.FAILED_PRECONDITION;case Wo.ABORTED:return Rr.ABORTED;case Wo.OUT_OF_RANGE:return Rr.OUT_OF_RANGE;case Wo.UNIMPLEMENTED:return Rr.UNIMPLEMENTED;case Wo.DATA_LOSS:return Rr.DATA_LOSS;default:return Ur()}}($o=Wo||(Wo={}))[$o.OK=0]="OK",$o[$o.CANCELLED=1]="CANCELLED",$o[$o.UNKNOWN=2]="UNKNOWN",$o[$o.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$o[$o.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$o[$o.NOT_FOUND=5]="NOT_FOUND",$o[$o.ALREADY_EXISTS=6]="ALREADY_EXISTS",$o[$o.PERMISSION_DENIED=7]="PERMISSION_DENIED",$o[$o.UNAUTHENTICATED=16]="UNAUTHENTICATED",$o[$o.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$o[$o.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$o[$o.ABORTED=10]="ABORTED",$o[$o.OUT_OF_RANGE=11]="OUT_OF_RANGE",$o[$o.UNIMPLEMENTED=12]="UNIMPLEMENTED",$o[$o.INTERNAL=13]="INTERNAL",$o[$o.UNAVAILABLE=14]="UNAVAILABLE",$o[$o.DATA_LOSS=15]="DATA_LOSS";var ts=function(){function t(t,e){this.comparator=t,this.root=e||ns.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ns.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ns.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new es(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new es(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new es(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new es(this.root,t,this.comparator,!0)},t}(),es=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),ns=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Ur();if(this.right.isRed())throw Ur();var t=this.left.check();if(t!==this.right.check())throw Ur();return t+(this.isRed()?0:1)},t}();ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1,ns.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Ur()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Ur()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Ur()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Ur()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Ur()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ns(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var rs=function(){function t(t){this.comparator=t,this.data=new ts(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new is(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new is(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),is=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),os=new ts(vi.comparator);function ss(){return os}var as=new ts(vi.comparator);function us(){return as}var cs=new ts(vi.comparator);function hs(){return cs}var fs=new rs(vi.comparator);function ls(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=fs,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ps=new rs(Hr);function ds(){return ps}var vs=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,gs.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Qr.min(),r,ds(),ss(),ls())},t}(),gs=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(ii.EMPTY_BYTE_STRING,n,ls(),ls(),ls())},t}(),ys=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},ms=function(t,e){this.targetId=t,this.V=e},bs=function(t,e,n,r){void 0===n&&(n=ii.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ws=function(){function t(){this.S=0,this.D=Es(),this.C=ii.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=ls(),e=ls(),n=ls();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ur()}})),new gs(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=Es()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),Is=function(){function t(t){this.W=t,this.G=new Map,this.H=ss(),this.J=Ts(),this.Y=new rs(Hr)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Ur()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Fi(i))if(0===n){var o=new vi(i.path);this.tt(e,o,Ri.newNoDocument(o,Qr.min()))}else qr(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Fi(o.target)){var s=new vi(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Ri.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=ls();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new vs(t,n,this.Y,this.H,r);return this.H=ss(),this.J=Ts(),this.Y=new rs(Hr),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new ws,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new rs(Hr),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Mr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new ws),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Ts(){return new ts(vi.comparator)}function Es(){return new ts(vi.comparator)}var _s={asc:"ASCENDING",desc:"DESCENDING"},Ss={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},As=function(t,e){this.databaseId=t,this.I=e};function Ns(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function ks(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ds(t,e){return Ns(t,e.toTimestamp())}function Cs(t){return qr(!!t),Qr.fromTimestamp(function(t){var e=si(t);return new $r(e.seconds,e.nanos)}(t))}function Os(t,e){return function(t){return new ti(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Rs(t){var e=ti.fromString(t);return qr(na(e)),e}function xs(t,e){return Os(t.databaseId,e.path)}function Ps(t,e){var n=Rs(e);if(n.get(1)!==t.databaseId.projectId)throw new xr(Rr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xr(Rr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new vi(Vs(n))}function Ls(t,e){return Os(t.databaseId,e)}function Ms(t){var e=Rs(t);return 4===e.length?ti.emptyPath():Vs(e)}function Fs(t){return new ti(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Vs(t){return qr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function js(t,e,n){return{name:xs(t,e),fields:n.value.mapValue.fields}}function Us(t,e,n){var r=Ps(t,e.name),i=Cs(e.updateTime),o=new Ci({mapValue:{fields:e.fields}}),s=Ri.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function qs(t,e){var n;if(e instanceof Bo)n={update:js(t,e.key,e.value)};else if(e instanceof Qo)n={delete:xs(t,e.key)};else if(e instanceof Ko)n={update:js(t,e.key,e.data),updateMask:ea(e.fieldMask)};else{if(!(e instanceof Xo))return Ur();n={verify:xs(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof _o)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof So)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof No)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Do)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Ur()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ds(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ur()}(t,e.precondition)),n}function Bs(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Po.updateTime(Cs(t.updateTime)):void 0!==t.exists?Po.exists(t.exists):Po.none()}(e.currentDocument):Po.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)qr("REQUEST_TIME"===e.setToServerValue),n=new _o;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new So(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new No(i)}else"increment"in e?n=new Do(t,e.increment):Ur();var o=ni.fromServerFormat(e.fieldPath);return new Ro(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Ps(t,e.update.name),o=new Ci({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new ri(e.map((function(t){return ni.fromServerFormat(t)})))}(e.updateMask);return new Ko(i,o,s,n,r)}return new Bo(i,o,n,r)}if(e.delete){var a=Ps(t,e.delete);return new Qo(a,n)}if(e.verify){var u=Ps(t,e.verify);return new Xo(u,n)}return Ur()}function Ks(t,e){return{documents:[Ls(t,e.path)]}}function Gs(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ls(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ls(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Ni(t.value))return{unaryFilter:{field:Ys(t.field),op:"IS_NAN"}};if(Ai(t.value))return{unaryFilter:{field:Ys(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ni(t.value))return{unaryFilter:{field:Ys(t.field),op:"IS_NOT_NAN"}};if(Ai(t.value))return{unaryFilter:{field:Ys(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ys(t.field),op:Xs(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Ys(t.field),direction:Qs(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||li(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Ws(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ws(e.endAt)),n}function Hs(t){var e=Ms(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){qr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=zs(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Qi(Js(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return li(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=$s(n.startAt));var h=null;return n.endAt&&(h=$s(n.endAt)),to(e,i,a,s,u,"F",c,h)}function zs(t){return t?void 0!==t.unaryFilter?[ta(t)]:void 0!==t.fieldFilter?[Zs(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return zs(t)})).reduce((function(t,e){return t.concat(e)})):Ur():[]}function Ws(t){return{before:t.before,values:t.position}}function $s(t){var e=!!t.before,n=t.values||[];return new Wi(n,e)}function Qs(t){return _s[t]}function Xs(t){return Ss[t]}function Ys(t){return{fieldPath:t.canonicalString()}}function Js(t){return ni.fromServerFormat(t.fieldPath)}function Zs(t){return Vi.create(Js(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ur()}}(t.fieldFilter.op),t.fieldFilter.value)}function ta(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Js(t.unaryFilter.field);return Vi.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Js(t.unaryFilter.field);return Vi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Js(t.unaryFilter.field);return Vi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Js(t.unaryFilter.field);return Vi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ur()}}function ea(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function na(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function ra(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=oa(e)),e=ia(t.get(n),e);return oa(e)}function ia(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function oa(t){return t+"\x01\x01"}function sa(t){var e=t.length;if(qr(e>=2),2===e)return qr("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ti.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Ur(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Ur()}o=s+2}return new ti(r)}var aa=function(t,e){this.seconds=t,this.nanoseconds=e},ua=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ua.store="owner",ua.key="owner";var ca=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ca.store="mutationQueues",ca.keyPath="userId";var ha=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ha.store="mutations",ha.keyPath="batchId",ha.userMutationsIndex="userMutationsIndex",ha.userMutationsKeyPath=["userId","batchId"];var fa=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,ra(e)]},t.key=function(t,e,n){return[t,ra(e),n]},t}();fa.store="documentMutations",fa.PLACEHOLDER=new fa;var la=function(t,e){this.path=t,this.readTime=e},pa=function(t,e){this.path=t,this.version=e},da=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};da.store="remoteDocuments",da.readTimeIndex="readTimeIndex",da.readTimeIndexPath="readTime",da.collectionReadTimeIndex="collectionReadTimeIndex",da.collectionReadTimeIndexPath=["parentPath","readTime"];var va=function(t){this.byteSize=t};va.store="remoteDocumentGlobal",va.key="remoteDocumentGlobalKey";var ga=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};ga.store="targets",ga.keyPath="targetId",ga.queryTargetsIndexName="queryTargetsIndex",ga.queryTargetsKeyPath=["canonicalId","targetId"];var ya=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ya.store="targetDocuments",ya.keyPath=["targetId","path"],ya.documentTargetsIndex="documentTargetsIndex",ya.documentTargetsKeyPath=["path","targetId"];var ma=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ma.key="targetGlobalKey",ma.store="targetGlobal";var ba=function(t,e){this.collectionId=t,this.parent=e};ba.store="collectionParents",ba.keyPath=["collectionId","parent"];var wa=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};wa.store="clientMetadata",wa.keyPath="clientId";var Ia=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Ia.store="bundles",Ia.keyPath="bundleId";var Ta=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ta.store="namedQueries",Ta.keyPath="name";var Ea=l(l([],l(l([],l(l([],l(l([],[ca.store,ha.store,fa.store,da.store,ga.store,ua.store,ma.store,ya.store]),[wa.store])),[va.store])),[ba.store])),[Ia.store,Ta.store]),_a="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sa=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Aa=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Na=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Ur(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),ka=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Aa,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Oa(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Ma(e.target.error);n.ft.reject(new Oa(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Oa(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Mr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new xa(e)},t}(),Da=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,p.z$)())&&Fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Mr("SimpleDb","Removing database:",t),Pa(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,p.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof Cr&&"YES"===(null===(t=Cr.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return h(this,void 0,void 0,(function(){var e,n=this;return f(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Mr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Oa(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new xr(Rr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Oa(t,n))},i.onupgradeneeded=function(t){Mr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Mr("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return h(this,void 0,void 0,(function(){var i,o,s,a,u;return f(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,h;return f(this,(function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=f.sent(),e=ka.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Na.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(f.sent(),s),u)];case 4:return c=f.sent(),h="FirebaseError"!==c.name&&o<3,Mr("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),a.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ca=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Pa(this.Pt.delete())},t}(),Oa=function(t){function e(e,n){var r=this;return(r=t.call(this,Rr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return c(e,t),e}(xr);function Ra(t){return"IndexedDbTransactionError"===t.name}var xa=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Mr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Mr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Pa(n)},t.prototype.add=function(t){return Mr("SimpleDb","ADD",this.store.name,t,t),Pa(this.store.add(t))},t.prototype.get=function(t){var e=this;return Pa(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Mr("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Mr("SimpleDb","DELETE",this.store.name,t),Pa(this.store.delete(t))},t.prototype.count=function(){return Mr("SimpleDb","COUNT",this.store.name),Pa(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){Mr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Na((function(n,r){e.onerror=function(t){var e=Ma(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Na((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Ca(i),s=e(i.primaryKey,i.value,o);if(s instanceof Na){var a=s.catch((function(t){return o.done(),Na.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Na.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Pa(t){return new Na((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Ma(t.target.error);n(e)}}))}var La=!1;function Ma(t){var e=Da._t((0,p.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new xr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return La||(La=!0,setTimeout((function(){throw r}),0)),r}}return t}var Fa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return c(e,t),e}(Sa);function Va(t,e){var n=Br(t);return Da.It(n.Mt,e)}var ja=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Fo(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Vo(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Vo(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Qr.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ls())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&zr(this.mutations,t.mutations,(function(t,e){return Uo(t,e)}))&&zr(this.baseMutations,t.baseMutations,(function(t,e){return Uo(t,e)}))},t}(),Ua=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){qr(e.mutations.length===r.length);for(var i=hs(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),qa=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Qr.min()),void 0===o&&(o=Qr.min()),void 0===s&&(s=ii.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Ba=function(t){this.Lt=t};function Ka(t,e){if(e.document)return Us(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=vi.fromSegments(e.noDocument.path),r=$a(e.noDocument.readTime),i=Ri.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=vi.fromSegments(e.unknownDocument.path);return r=$a(e.unknownDocument.version),Ri.newUnknownDocument(o,r)}return Ur()}function Ga(t,e,n){var r=Ha(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:xs(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Ns(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new da(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Wa(e.version);return s=e.hasCommittedMutations,new da(null,new la(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Wa(e.version);return new da(new pa(c,h),null,null,!0,r,i)}return Ur()}function Ha(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function za(t){var e=new $r(t[0],t[1]);return Qr.fromTimestamp(e)}function Wa(t){var e=t.toTimestamp();return new aa(e.seconds,e.nanoseconds)}function $a(t){var e=new $r(t.seconds,t.nanoseconds);return Qr.fromTimestamp(e)}function Qa(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Bs(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Bs(t.Lt,e)})),a=$r.fromMillis(e.localWriteTimeMs);return new ja(e.batchId,a,n,s)}function Xa(t){var e,n,r=$a(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?$a(t.lastLimboFreeSnapshotVersion):Qr.min();return void 0!==t.query.documents?(qr(1===(n=t.query).documents.length),e=uo(eo(Ms(n.documents[0])))):e=function(t){return uo(Hs(t))}(t.query),new qa(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ii.fromBase64String(t.resumeToken))}function Ya(t,e){var n,r=Wa(e.snapshotVersion),i=Wa(e.lastLimboFreeSnapshotVersion);n=Fi(e.target)?Ks(t.Lt,e.target):Gs(t.Lt,e.target);var o=e.resumeToken.toBase64();return new ga(e.targetId,Li(e.target),r,o,e.sequenceNumber,i,n)}function Ja(t){var e=Hs({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?co(e,e.limit,"L"):e}var Za=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return tu(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:$a(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return tu(t).put({bundleId:(n=e).id,createTime:Wa(Cs(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return eu(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Ja(e.bundledQuery),readTime:$a(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return eu(t).put(function(t){return{name:t.name,readTime:Wa(Cs(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function tu(t){return Va(t,Ia.store)}function eu(t){return Va(t,Ta.store)}var nu=function(){function t(){this.Bt=new ru}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Na.resolve()},t.prototype.getCollectionParents=function(t,e){return Na.resolve(this.Bt.getEntries(e))},t}(),ru=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new rs(ti.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new rs(ti.comparator)).toArray()},t}(),iu=function(){function t(){this.qt=new ru}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:ra(i)};return ou(t).put(o)}return Na.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Wr(e),""],!1,!0);return ou(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(sa(o.parent))}return n}))},t}();function ou(t){return Va(t,ba.store)}var su={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},au=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function uu(t,e,n){var r=t.store(ha.store),i=t.store(fa.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){qr(1===a)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=fa.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return Na.waitFor(o).next((function(){return c}))}function cu(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ur();e=t.noDocument}return JSON.stringify(e).length}au.DEFAULT_COLLECTION_PERCENTILE=10,au.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,au.DEFAULT=new au(41943040,au.DEFAULT_COLLECTION_PERCENTILE,au.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),au.DISABLED=new au(-1,0,0);var hu=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return qr(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lu(t).$t({index:ha.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=pu(t),s=lu(t);return s.add({}).next((function(a){qr("number"==typeof a);for(var u=new ja(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return qs(t.Lt,e)})),i=n.mutations.map((function(e){return qs(t.Lt,e)}));return new ha(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],f=new rs((function(t,e){return Hr(t.canonicalString(),e.canonicalString())})),l=0,p=r;l<p.length;l++){var d=p[l],v=fa.key(i.userId,d.key.path,a);f=f.add(d.key.path.popLast()),h.push(s.put(c)),h.push(o.put(v,fa.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),Na.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return lu(t).get(e).next((function(t){return t?(qr(t.userId===n.userId),Qa(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Na.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return lu(t).$t({index:ha.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(qr(e.batchId>=r),o=Qa(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return lu(t).$t({index:ha.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lu(t).Nt(ha.userMutationsIndex,n).next((function(t){return t.map((function(t){return Qa(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=fa.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return pu(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=sa(u);if(a===n.userId&&e.path.isEqual(h))return lu(t).get(c).next((function(t){if(!t)throw Ur();qr(t.userId===n.userId),o.push(Qa(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new rs(Hr),i=[];return e.forEach((function(e){var o=fa.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=pu(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=sa(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Na.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=fa.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new rs(Hr);return pu(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=sa(u);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(lu(t).get(e).next((function(t){if(null===t)throw Ur();qr(t.userId===n.userId),r.push(Qa(n.R,t))})))})),Na.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return uu(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Na.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Na.resolve();var r=IDBKeyRange.lowerBound(fa.prefixForUser(e.userId)),i=[];return pu(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=sa(t[1]);i.push(o)}else r.done()})).next((function(){qr(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return fu(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return du(t).get(this.userId).next((function(t){return t||new ca(e.userId,-1,"")}))},t}();function fu(t,e,n){var r=fa.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return pu(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function lu(t){return Va(t,ha.store)}function pu(t){return Va(t,fa.store)}function du(t){return Va(t,ca.store)}var vu=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),gu=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new vu(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Qr.fromTimestamp(new $r(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return yu(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return qr(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return yu(t).$t((function(s,a){var u=Xa(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Na.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return yu(t).$t((function(t,n){var r=Xa(n);e(r)}))},t.prototype.Xt=function(t){return mu(t).get(ma.key).next((function(t){return qr(null!==t),t}))},t.prototype.Zt=function(t,e){return mu(t).put(ma.key,e)},t.prototype.te=function(t,e){return yu(t).put(Ya(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Li(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return yu(t).$t({range:r,index:ga.queryTargetsIndexName},(function(t,n,r){var o=Xa(n);Mi(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=bu(t);return e.forEach((function(e){var s=ra(e.path);i.push(o.put(new ya(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),Na.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=bu(t);return Na.forEach(e,(function(e){var o=ra(e.path);return Na.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=bu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=bu(t),i=ls();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=sa(t[1]),o=new vi(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=ra(e.path),r=IDBKeyRange.bound([n],[Wr(n)],!1,!0),i=0;return bu(t).$t({index:ya.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return yu(t).get(e).next((function(t){return t?Xa(t):null}))},t}();function yu(t){return Va(t,ga.store)}function mu(t){return Va(t,ma.store)}function bu(t){return Va(t,ya.store)}function wu(t){return h(this,void 0,void 0,(function(){return f(this,(function(e){if(t.code!==Rr.FAILED_PRECONDITION||t.message!==_a)throw t;return Mr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Iu(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Hr(n,i);return 0===s?Hr(r,o):s}var Tu=function(){function t(t){this.ne=t,this.buffer=new rs(Iu),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Iu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Eu=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Mr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return h(e,void 0,void 0,(function(){var e;return f(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Ra(e=n.sent())?(Mr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,wu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),_u=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Na.resolve(Or.o);var r=new Tu(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Mr("LruGarbageCollector","Garbage collection skipped; disabled"),Na.resolve(su)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Mr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),su):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Mr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Lr()<=d.in.DEBUG&&Mr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),Na.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Su=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new _u(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Au(t,n)},t.prototype.removeReference=function(t,e,n){return Au(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Au(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return du(t).Ot((function(r){return fu(t,r,e).next((function(t){return t&&(n=!0),Na.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),bu(t).delete([0,ra(s.path)])}))}));i.push(u)}})).next((function(){return Na.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Au(t,e)},t.prototype.we=function(t,e){var n,r=bu(t),i=Or.o;return r.$t({index:ya.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==Or.o&&e(new vi(sa(n)),i),i=a,n=s):i=Or.o})).next((function(){i!==Or.o&&e(new vi(sa(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Au(t,e){return bu(t).put(function(t,e){return new ya(0,ra(t.path),e)}(e,t.currentSequenceNumber))}var Nu=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Yr(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return Jr(this.inner)},t}(),ku=function(){function t(){this.changes=new Nu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Qr.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Ri.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Na.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Du=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Ru(t).put(xu(e),n)},t.prototype.removeEntry=function(t,e){var n=Ru(t),r=xu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Ru(t).get(xu(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Ru(t).get(xu(e)).next((function(t){return{document:n.ye(e,t),size:cu(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=ss();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=ss(),i=new ts(vi.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,cu(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Na.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Ru(t).$t({range:r},(function(t,e,r){for(var s=vi.fromSegments(t);o&&vi.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ss(),o=e.path.length+1,s={};if(n.isEqual(Qr.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Ha(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=da.collectionReadTimeIndex}return Ru(t).$t(s,(function(t,n,s){if(t.length===o){var a=Ka(r.R,n);e.path.isPrefixOf(a.key.path)?po(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Cu(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ou(t).get(va.key).next((function(t){return qr(!!t),t}))},t.prototype.me=function(t,e){return Ou(t).put(va.key,e)},t.prototype.ye=function(t,e){if(e){var n=Ka(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Qr.min()))return n}return Ri.newInvalidDocument(t)},t}(),Cu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Nu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return c(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new rs((function(t,e){return Hr(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Ga(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=cu(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var h=Ga(e.Ie.R,Ri.newNoDocument(o,Qr.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Na.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(ku);function Ou(t){return Va(t,va.store)}function Ru(t){return Va(t,da.store)}function xu(t){return t.path.toArray()}var Pu=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;qr(n<r&&n>=0&&r<=11);var o=new ka("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ua.store)}(t),function(t){t.createObjectStore(ca.store,{keyPath:ca.keyPath}),t.createObjectStore(ha.store,{keyPath:ha.keyPath,autoIncrement:!0}).createIndex(ha.userMutationsIndex,ha.userMutationsKeyPath,{unique:!0}),t.createObjectStore(fa.store)}(t),Lu(t),function(t){t.createObjectStore(da.store)}(t));var s=Na.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(ya.store),t.deleteObjectStore(ga.store),t.deleteObjectStore(ma.store)}(t),Lu(t)),s=s.next((function(){return function(t){var e=t.store(ma.store),n=new ma(0,0,Qr.min().toTimestamp(),0);return e.put(ma.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(ha.store).Nt().next((function(n){t.deleteObjectStore(ha.store),t.createObjectStore(ha.store,{keyPath:ha.keyPath,autoIncrement:!0}).createIndex(ha.userMutationsIndex,ha.userMutationsKeyPath,{unique:!0});var r=e.store(ha.store),i=n.map((function(t){return r.put(t)}));return Na.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(wa.store,{keyPath:wa.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(va.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(da.store);e.createIndex(da.readTimeIndex,da.readTimeIndexPath,{unique:!1}),e.createIndex(da.collectionReadTimeIndex,da.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Ia.store,{keyPath:Ia.keyPath})}(t),function(t){t.createObjectStore(Ta.store,{keyPath:Ta.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(da.store).$t((function(t,n){e+=cu(n)})).next((function(){var n=new va(e);return t.store(va.store).put(va.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(ca.store),r=t.store(ha.store);return n.Nt().next((function(n){return Na.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(ha.userMutationsIndex,i).next((function(r){return Na.forEach(r,(function(r){qr(r.userId===n.userId);var i=Qa(e.R,r);return uu(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(ya.store),n=t.store(da.store);return t.store(ma.store).get(ma.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new ti(n),s=function(t){return[0,ra(t)]}(o);r.push(e.get(s).next((function(n){return n?Na.resolve():function(n){return e.put(new ya(0,ra(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Na.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(ba.store,{keyPath:ba.keyPath});var n=e.store(ba.store),r=new ru,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:ra(i)})}};return e.store(da.store).$t({Ft:!0},(function(t,e){var n=new ti(t);return i(n.popLast())})).next((function(){return e.store(fa.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=sa(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(ga.store);return n.$t((function(t,r){var i=Xa(r),o=Ya(e.R,i);return n.put(o)}))},t}();function Lu(t){t.createObjectStore(ya.store,{keyPath:ya.keyPath}).createIndex(ya.documentTargetsIndex,ya.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(ga.store,{keyPath:ga.keyPath}).createIndex(ga.queryTargetsIndexName,ga.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ma.store)}var Mu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Fu=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new xr(Rr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Su(this,i),this.Le=n+"main",this.R=new Ba(u),this.Be=new Da(this.Le,11,new Pu(this.R)),this.qe=new gu(this.referenceDelegate,this.R),this.Ut=new iu,this.Ue=function(t,e){return new Du(t,e)}(this.R,this.Ut),this.Ke=new Za,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&Fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new xr(Rr.FAILED_PRECONDITION,Mu);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Or(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return h(e,void 0,void 0,(function(){return f(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return h(e,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return h(e,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return ju(e).put(new wa(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Ra(e))return Mr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Mr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Vu(t).get(ua.key).next((function(t){return Na.resolve(e.tn(t))}))},t.prototype.en=function(t){return ju(t).delete(this.clientId)},t.prototype.nn=function(){return h(this,void 0,void 0,(function(){var t,e,n,r,i=this;return f(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Va(t,wa.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Na.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Na.resolve(!0):Vu(t).get(ua.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new xr(Rr.FAILED_PRECONDITION,Mu);return!1}}return!(!e.networkEnabled||!e.inForeground)||ju(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Mr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return h(this,void 0,void 0,(function(){var t=this;return f(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[ua.store,wa.store],(function(e){var n=new Fa(e,Or.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return ju(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return hu.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Mr("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Ea,(function(o){return i=new Fa(o,r.Ne?r.Ne.next():Or.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Fr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new xr(Rr.FAILED_PRECONDITION,_a);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Vu(t).get(ua.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new xr(Rr.FAILED_PRECONDITION,Mu)}))},t.prototype.Ze=function(t){var e=new ua(this.clientId,this.allowTabSynchronization,Date.now());return Vu(t).put(ua.key,e)},t.yt=function(){return Da.yt()},t.prototype.Xe=function(t){var e=this,n=Vu(t);return n.get(ua.key).next((function(t){return e.tn(t)?(Mr("IndexedDbPersistence","Releasing primary lease."),n.delete(ua.key)):Na.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Fr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),(0,p.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Mr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Fr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Fr("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Vu(t){return Va(t,ua.store)}function ju(t){return Va(t,wa.store)}function Uu(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var qu=function(t,e){this.progress=t,this.wn=e},Bu=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return vi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):so(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new vi(e)).next((function(t){var e=us();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=us();return this.Ut.getCollectionParents(t,i).next((function(s){return Na.forEach(s,(function(s){var a=function(t,e){return new Zi(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c);null==h&&(h=Ri.newInvalidDocument(c),r=r.insert(c,h)),Vo(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){po(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=ls(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Ko&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Ku=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=ls(),i=ls(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Gu=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Qr.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(no(e)||ro(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Lr()<=d.in.DEBUG&&Mr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),lo(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new rs(vo(t));return e.forEach((function(e,r){po(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Lr()<=d.in.DEBUG&&Mr("QueryEngine","Using full collection scan to execute query:",lo(e)),this.Sn.getDocumentsMatchingQuery(t,e,Qr.min())},t}(),Hu=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new ts(Hr),this.Fn=new Nu((function(t){return Li(t)}),Mi),this.$n=Qr.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Bu(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();function zu(t,e,n,r){return new Hu(t,e,n,r)}function Wu(t,e){return h(this,void 0,void 0,(function(){var n,r,i,o;return f(this,(function(s){switch(s.label){case 0:return n=Br(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Bu(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=ls(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,y=v.mutations;g<y.length;g++){var m=y[g];s=s.add(m.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function $u(t,e){var n=Br(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Na.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);qr(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Qu(t){var e=Br(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Xu(t,e){var n=Br(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return qr(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=ss();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(Yu(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(Qr.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return Na.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.kn=i,t}))}function Yu(t,e,n,r,i){var o=ls();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=ss();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Qr.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Mr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Ju(t,e){var n=Br(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Zu(t,e){var n=Br(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Na.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new qa(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function tc(t,e,n){return h(this,void 0,void 0,(function(){var r,i,o,s;return f(this,(function(a){switch(a.label){case 0:r=Br(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Ra(s=a.sent()))throw s;return Mr("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}}))}))}function ec(t,e,n){var r=Br(t),i=Qr.min(),o=ls();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Br(t),i=r.Fn.get(n);return void 0!==i?Na.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,uo(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Qr.min(),n?o:ls())})).next((function(t){return{documents:t,Bn:o}}))}))}function nc(t,e){var n=Br(t),r=Br(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function rc(t){var e=Br(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Br(t),i=ss(),o=Ha(n),s=Ru(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:da.readTimeIndex,range:a},(function(t,e){var n=Ka(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:za(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function ic(t){return h(this,void 0,void 0,(function(){var e;return f(this,(function(n){return[2,(e=Br(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Ru(t),n=Qr.min();return e.$t({index:da.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=za(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function oc(t,e,n,r){return h(this,void 0,void 0,(function(){var i,o,s,a,u,c,h,l,p,d;return f(this,(function(f){switch(f.label){case 0:for(i=Br(t),o=ls(),s=ss(),a=hs(),u=0,c=n;u<c.length;u++)h=c[u],l=e.qn(h.metadata.name),h.document&&(o=o.add(l)),s=s.insert(l,e.Un(h)),a=a.insert(l,e.Kn(h.metadata.readTime));return p=i.On.newChangeBuffer({trackRemovals:!0}),[4,Zu(i,function(t){return uo(eo(ti.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=f.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Yu(t,p,s,Qr.min(),a).next((function(e){return p.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function sc(t,e,n){return void 0===n&&(n=ls()),h(this,void 0,void 0,(function(){var r,i;return f(this,(function(o){switch(o.label){case 0:return[4,Zu(t,uo(Ja(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Br(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Cs(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(ii.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))}var ac=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Na.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Cs(n.createTime)}),Na.resolve()},t.prototype.getNamedQuery=function(t,e){return Na.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Ja(t.bundledQuery),readTime:Cs(t.readTime)}}(e)),Na.resolve()},t}(),uc=function(){function t(){this.Wn=new rs(cc.Gn),this.zn=new rs(cc.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new cc(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new cc(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new vi(new ti([])),r=new cc(n,t),i=new cc(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new vi(new ti([])),n=new cc(e,t),r=new cc(e,t+1),i=ls();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new cc(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),cc=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return vi.comparator(t.key,e.key)||Hr(t.ns,e.ns)},t.Hn=function(t,e){return Hr(t.ns,e.ns)||vi.comparator(t.key,e.key)},t}(),hc=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new rs(cc.Gn)}return t.prototype.checkEmpty=function(t){return Na.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new ja(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new cc(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Na.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Na.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Na.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Na.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Na.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new cc(e,0),i=new cc(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Na.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new rs(Hr);return e.forEach((function(t){var e=new cc(t,0),i=new cc(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Na.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;vi.isDocumentKey(i)||(i=i.child(""));var o=new cc(new vi(i),0),s=new rs(Hr);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),Na.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;qr(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Na.forEach(e.mutations,(function(i){var o=new cc(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new cc(e,0),r=this.rs.firstAfterOrEqual(n);return Na.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Na.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),fc=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new ts(vi.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Na.resolve(n?n.document.clone():Ri.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ss();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Ri.newInvalidDocument(t))})),Na.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ss(),i=new vi(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(a.path))break;h.compareTo(n)<=0||po(e,c)&&(r=r.insert(c.key,c.clone()))}return Na.resolve(r)},t.prototype.fs=function(t,e){return Na.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new lc(this)},t.prototype.getSize=function(t){return Na.resolve(this.size)},t}(),lc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return c(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Na.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ku),pc=function(){function t(t){this.persistence=t,this.ds=new Nu((function(t){return Li(t)}),Mi),this.lastRemoteSnapshotVersion=Qr.min(),this.highestTargetId=0,this.ws=0,this._s=new uc,this.targetCount=0,this.ys=vu.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Na.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Na.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Na.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Na.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Na.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new vu(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Na.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Na.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Na.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),Na.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Na.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Na.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Na.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Na.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Na.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Na.resolve(n)},t.prototype.containsKey=function(t,e){return Na.resolve(this._s.containsKey(e))},t}(),dc=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Or(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new pc(this),this.Ut=new nu,this.Ue=function(t,e){return new fc(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Ba(e),this.Ke=new ac(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new hc(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Mr("MemoryPersistence","Starting transaction:",t);var i=new vc(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Na.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),vc=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return c(e,t),e}(Sa),gc=function(){function t(t){this.persistence=t,this.As=new uc,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Ur()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Na.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Na.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Na.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Na.forEach(this.vs,(function(r){var i=vi.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Na.or([function(){return Na.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),yc=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function mc(t,e){return"firestore_clients_"+t+"_"+e}function bc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function wc(t,e){return"firestore_targets_"+t+"_"+e}yc.UNAUTHENTICATED=new yc(null),yc.GOOGLE_CREDENTIALS=new yc("google-credentials-uid"),yc.FIRST_PARTY=new yc("first-party-uid"),yc.MOCK_USER=new yc("mock-user");var Ic=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new xr(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Fr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Tc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new xr(i.error.code,i.error.message)),o?new t(e,i.state,r):(Fr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ec=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ds(),s=0;i&&s<r.activeTargetIds.length;++s)i=di(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Fr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),_c=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Fr("SharedClientState","Failed to parse online state: "+e),null)},t}(),Sc=function(){function t(){this.activeTargetIds=ds()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ac=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new ts(Hr),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=mc(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new Sc),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return h(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,h,l=this;return f(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(mc(this.persistenceKey,r)))&&(o=Ec.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)h=c[u],this.ks(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(wc(this.persistenceKey,t));if(n){var r=Tc.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(wc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Mr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Mr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Mr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Mr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return h(e,void 0,void 0,(function(){var t,e,r,i,o,s;return f(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Or.o;if(null!=t)try{var n=JSON.parse(t);qr("number"==typeof n),e=n}catch(t){Fr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Or.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Ic(this.currentUser,t,e,n),i=bc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=bc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=wc(this.persistenceKey,t),i=new Tc(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Ec.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ic.Vs(new yc(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Tc.Vs(r,e)},t.prototype.js=function(t){return _c.Vs(t)},t.prototype.ii=function(t){return h(this,void 0,void 0,(function(){return f(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Mr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ds();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Nc=function(){function t(){this.li=new Sc,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Sc,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),kc=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Dc=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Mr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Mr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Cc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Oc=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Rc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return c(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var s=new Dr;s.listenOnce(_r.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Er.NO_ERROR:var e=s.getResponseJson();Mr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Er.TIMEOUT:Mr("Connection",'RPC "'+t+'" timed out'),o(new xr(Rr.DEADLINE_EXCEEDED,"Request time out"));break;case Er.HTTP_ERROR:var n=s.getStatus();if(Mr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Rr).indexOf(e)>=0?e:Rr.UNKNOWN}(r.status);o(new xr(a,r.message))}else o(new xr(Rr.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new xr(Rr.UNAVAILABLE,"Connection failed."));break;default:Ur()}}finally{Mr("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Ir(),i=Tr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Nr({})),this.ki(o.initMessageHeaders,e),(0,p.uI)()||(0,p.b$)()||(0,p.d)()||(0,p.w1)()||(0,p.Mn)()||(0,p.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Mr("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,h=new Oc({Ei:function(t){c?Mr("Connection","Not sending because WebChannel is closed:",t):(u||(Mr("Connection","Opening WebChannel transport."),a.open(),u=!0),Mr("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(a,kr.EventType.OPEN,(function(){c||Mr("Connection","WebChannel transport opened.")})),f(a,kr.EventType.CLOSE,(function(){c||(c=!0,Mr("Connection","WebChannel transport closed"),h.Vi())})),f(a,kr.EventType.ERROR,(function(t){c||(c=!0,Vr("Connection","WebChannel transport errored:",t),h.Vi(new xr(Rr.UNAVAILABLE,"The operation could not be completed")))})),f(a,kr.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];qr(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Mr("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Wo[t];if(void 0!==e)return Zo(e)}(o),u=i.message;void 0===s&&(s=Rr.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.Vi(new xr(s,u)),a.close()}else Mr("Connection","WebChannel received:",n),h.Si(n)}})),f(i,Sr.STAT_EVENT,(function(t){t.stat===Ar.PROXY?Mr("Connection","Detected buffering proxy"):t.stat===Ar.NOPROXY&&Mr("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Mr("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return Mr("RestConnection","Received: ",t),t}),(function(e){throw Vr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=Cc[t];return this.Di+"/v1/"+e+":"+n},t}());function xc(){return"undefined"!=typeof window?window:null}function Pc(){return"undefined"!=typeof document?document:null}function Lc(t){return new As(t,!0)}var Mc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Mr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Fc=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Mc(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return h(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return h(this,void 0,void 0,(function(){return f(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return h(this,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Rr.RESOURCE_EXHAUSTED?(Fr(e.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Rr.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new xr(Rr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return h(t,void 0,void 0,(function(){return f(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Mr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Mr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Vc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return c(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ur()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(qr(void 0===e||"string"==typeof e),ii.fromBase64String(e||"")):(qr(void 0===e||e instanceof Uint8Array),ii.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Rr.UNKNOWN:Zo(t.code);return new xr(e,t.message||"")}(a);n=new bs(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Ps(t,r.document.name),o=Cs(r.document.updateTime);var a=new Ci({mapValue:{fields:r.document.fields}}),u=(s=Ri.newFoundDocument(i,o,a),r.targetIds||[]),c=r.removedTargetIds||[];n=new ys(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Ps(t,r.document),o=r.readTime?Cs(r.readTime):Qr.min(),a=Ri.newNoDocument(i,o),s=r.removedTargetIds||[],n=new ys([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Ps(t,r.document),o=r.removedTargetIds||[],n=new ys([],o,i,null);else{if(!("filter"in e))return Ur();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Yo(r),o=h.targetId,n=new ms(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Qr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Qr.min():e.readTime?Cs(e.readTime):Qr.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Fs(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Fi(r)?{documents:Ks(t,r)}:{query:Gs(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=ks(t,e.resumeToken):e.snapshotVersion.compareTo(Qr.min())>0&&(n.readTime=Ns(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ur()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Fs(this.R),e.removeTarget=t,this.cr(e)},e}(Fc),jc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return c(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(qr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(qr(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Cs(t.updateTime):Cs(e);return n.isEqual(Qr.min())&&(n=Cs(e)),new xo(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Cs(t.commitTime);return this.listener.Tr(n,e)}return qr(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Fs(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return qs(e.R,t)}))};this.cr(n)},e}(Fc),Uc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return c(e,t),e.prototype.br=function(){if(this.Rr)throw new xr(Rr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Rr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new xr(Rr.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Rr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new xr(Rr.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),qc=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Fr(e),this.Vr=!1):Mr("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Bc=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return h(o,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return Yc(this)?(Mr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return h(this,void 0,void 0,(function(){var e;return f(this,(function(n){switch(n.label){case 0:return(e=Br(t)).Or.add(4),[4,Gc(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Kc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new qc(n,r)};function Kc(t){return h(this,void 0,void 0,(function(){var e,n;return f(this,(function(r){switch(r.label){case 0:if(!Yc(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Gc(t){return h(this,void 0,void 0,(function(){var e,n;return f(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Hc(t,e){var n=Br(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Xc(n)?Qc(n):lh(n).er()&&Wc(n,e))}function zc(t,e){var n=Br(t),r=lh(n);n.$r.delete(e),r.er()&&$c(n,e),0===n.$r.size&&(r.er()?r.ir():Yc(n)&&n.Br.set("Unknown"))}function Wc(t,e){t.qr.U(e.targetId),lh(t).mr(e)}function $c(t,e){t.qr.U(e),lh(t).yr(e)}function Qc(t){t.qr=new Is({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),lh(t).start(),t.Br.Sr()}function Xc(t){return Yc(t)&&!lh(t).tr()&&t.$r.size>0}function Yc(t){return 0===Br(t).Or.size}function Jc(t){t.qr=void 0}function Zc(t){return h(this,void 0,void 0,(function(){return f(this,(function(e){return t.$r.forEach((function(e,n){Wc(t,e)})),[2]}))}))}function th(t,e){return h(this,void 0,void 0,(function(){return f(this,(function(n){return Jc(t),Xc(t)?(t.Br.Nr(e),Qc(t)):t.Br.set("Unknown"),[2]}))}))}function eh(t,e,n){return h(this,void 0,void 0,(function(){var r,i,o;return f(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof bs&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return h(this,void 0,void 0,(function(){var n,r,i,o;return f(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Mr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,nh(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ys?t.qr.X(e):e instanceof ms?t.qr.rt(e):t.qr.et(e),n.isEqual(Qr.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Qu(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(ii.EMPTY_BYTE_STRING,n.snapshotVersion)),$c(t,e);var r=new qa(n.target,e,1,n.sequenceNumber);Wc(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Mr("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,nh(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function nh(t,e,n){return h(this,void 0,void 0,(function(){var r=this;return f(this,(function(i){switch(i.label){case 0:if(!Ra(e))throw e;return t.Or.add(1),[4,Gc(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Qu(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return h(r,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return Mr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Kc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function rh(t,e){return e().catch((function(n){return nh(t,n,e)}))}function ih(t){return h(this,void 0,void 0,(function(){var e,n,r,i,o;return f(this,(function(s){switch(s.label){case 0:e=Br(t),n=ph(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Yc(t)&&t.Fr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Ju(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=ph(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,nh(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return oh(e)&&sh(e),[2]}}))}))}function oh(t){return Yc(t)&&!ph(t).tr()&&t.Fr.length>0}function sh(t){ph(t).start()}function ah(t){return h(this,void 0,void 0,(function(){return f(this,(function(e){return ph(t).Ar(),[2]}))}))}function uh(t){return h(this,void 0,void 0,(function(){var e,n,r,i;return f(this,(function(o){for(e=ph(t),n=0,r=t.Fr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function ch(t,e,n){return h(this,void 0,void 0,(function(){var r,i;return f(this,(function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=Ua.from(r,e,n),[4,rh(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,ih(t)];case 2:return o.sent(),[2]}}))}))}function hh(t,e){return h(this,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return e&&ph(t).pr?[4,function(t,e){return h(this,void 0,void 0,(function(){var n,r;return f(this,(function(i){switch(i.label){case 0:return Jo(r=e.code)&&r!==Rr.ABORTED?(n=t.Fr.shift(),ph(t).sr(),[4,rh(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,ih(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return oh(t)&&sh(t),[2]}}))}))}function fh(t,e){return h(this,void 0,void 0,(function(){var n;return f(this,(function(r){switch(r.label){case 0:return n=Br(t),e?(n.Or.delete(2),[4,Kc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Gc(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function lh(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Br(t);return r.br(),new Vc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Zc.bind(null,t),Ri:th.bind(null,t),_r:eh.bind(null,t)}),t.Mr.push((function(n){return h(e,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Xc(t)?Qc(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Jc(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function ph(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Br(t);return r.br(),new jc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:ah.bind(null,t),Ri:hh.bind(null,t),Ir:uh.bind(null,t),Tr:ch.bind(null,t)}),t.Mr.push((function(n){return h(e,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,ih(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(Mr("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var dh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xr(Rr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function vh(t,e){if(Fr("AsyncQueue",e+": "+t),Ra(t))return new xr(Rr.UNAVAILABLE,e+": "+t);throw t}var gh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||vi.comparator(e.key,n.key)}:function(t,e){return vi.comparator(t.key,e.key)},this.keyedMap=us(),this.sortedSet=new ts(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),yh=function(){function t(){this.Qr=new ts(vi.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Ur():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),mh=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,gh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ho(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),bh=function(){this.Wr=void 0,this.listeners=[]},wh=function(){this.queries=new Nu((function(t){return fo(t)}),ho),this.onlineState="Unknown",this.Gr=new Set};function Ih(t,e){return h(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return f(this,(function(c){switch(c.label){case 0:if(n=Br(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new bh),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=vh(a,"Initialization of query '"+lo(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Sh(n),[2]}}))}))}function Th(t,e){return h(this,void 0,void 0,(function(){var n,r,i,o,s;return f(this,(function(a){return n=Br(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Eh(t,e){for(var n=Br(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(s)&&(r=!0);u.Wr=s}}r&&Sh(n)}function _h(t,e,n){var r=Br(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Sh(t){t.Gr.forEach((function(t){t.next()}))}var Ah=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new mh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=mh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Nh=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),kh=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Ps(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Us(this.R,t.document,!1):Ri.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Cs(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=Dh(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new kh(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||ls()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return h(this,void 0,void 0,(function(){var t,e,n,r,i;return f(this,(function(o){switch(o.label){case 0:return[4,oc(this.localStore,new kh(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,sc(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new qu(Object.assign({},this.progress),t))]}}))}))}}();function Dh(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Ch=function(t){this.key=t},Oh=function(t){this.key=t},Rh=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=ls(),this.mutatedKeys=ls(),this.lo=vo(t),this.fo=new gh(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new yh,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=no(this.query)&&i.size===this.query.limit?i.last():null,c=ro(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),f=po(n.query,e)?e:null,l=!!h&&n.mutatedKeys.has(h.key),p=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data.isEqual(f.data)?l!==p&&(r.track({type:3,doc:f}),d=!0):n.yo(h,f)||(r.track({type:2,doc:f}),d=!0,(u&&n.lo(f,u)>0||c&&n.lo(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),no(this.query)||ro(this.query))for(;s.size>this.query.limit;){var h=no(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ur()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new mh(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new yh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=ls(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Oh(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Ch(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=ls();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return mh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),xh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ph=function(t){this.key=t,this.bo=!1},Lh=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Nu((function(t){return fo(t)}),ho),this.Vo=new Map,this.So=new Set,this.Do=new ts(vi.comparator),this.Co=new Map,this.No=new uc,this.xo={},this.ko=new Map,this.Fo=vu.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Mh(t,e){return h(this,void 0,void 0,(function(){var n,r,i,o,s,a;return f(this,(function(u){switch(u.label){case 0:return n=lf(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Zu(n.localStore,uo(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,Fh(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&Hc(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function Fh(t,e,n,r){return h(this,void 0,void 0,(function(){var i,o,s,a,u,c;return f(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return h(this,void 0,void 0,(function(){var i,o,s;return f(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,ec(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Xh(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,ec(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Rh(e,i.Bn),s=o._o(i.documents),a=gs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Xh(t,n,u.To),c=new xh(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function Vh(t,e){return h(this,void 0,void 0,(function(){var n,r,i;return f(this,(function(o){switch(o.label){case 0:return n=Br(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!ho(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,tc(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),zc(n.remoteStore,r.targetId),$h(n,r.targetId)})).catch(wu)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return $h(n,r.targetId),[4,tc(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function jh(t,e,n){return h(this,void 0,void 0,(function(){var r,i,o,s;return f(this,(function(a){switch(a.label){case 0:r=pf(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Br(t),i=$r.now(),o=e.reduce((function(t,e){return t.add(e.key)}),ls());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=jo(c,n.get(c.key));null!=h&&s.push(new Ko(c.key,h,Oi(h.value.mapValue),Po.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new ts(Hr)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Zh(r,i.changes)];case 3:return a.sent(),[4,ih(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=vh(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Uh(t,e){return h(this,void 0,void 0,(function(){var n,r;return f(this,(function(i){switch(i.label){case 0:n=Br(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Xu(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(qr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?qr(r.bo):t.removedDocuments.size>0&&(qr(r.bo),r.bo=!1))})),[4,Zh(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,wu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function qh(t,e,n){var r=Br(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Br(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Sh(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Bh(t,e,n){return h(this,void 0,void 0,(function(){var r,i,o,s,a,u;return f(this,(function(c){switch(c.label){case 0:return(r=Br(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new ts(vi.comparator)).insert(o,Ri.newNoDocument(o,Qr.min())),a=ls().add(o),u=new vs(Qr.min(),new Map,new rs(Hr),s,a),[4,Uh(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Jh(r),[3,4];case 2:return[4,tc(r.localStore,e,!1).then((function(){return $h(r,e,n)})).catch(wu)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Kh(t,e){return h(this,void 0,void 0,(function(){var n,r,i;return f(this,(function(o){switch(o.label){case 0:n=Br(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,$u(n.localStore,e)];case 2:return i=o.sent(),Wh(n,r,null),zh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Zh(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,wu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Gh(t,e,n){return h(this,void 0,void 0,(function(){var r,i;return f(this,(function(o){switch(o.label){case 0:r=Br(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Br(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return qr(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Wh(r,e,n),zh(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Zh(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,wu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Hh(t,e){return h(this,void 0,void 0,(function(){var n,r,i,o,s;return f(this,(function(a){switch(a.label){case 0:Yc((n=Br(t)).remoteStore)||Mr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Br(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=a.sent(),s=vh(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function zh(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function Wh(t,e,n){var r=Br(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function $h(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Qh(t,e)}))}function Qh(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(zc(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Jh(t))}function Xh(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Ch?(t.No.addReference(o.key,e),Yh(t,o)):o instanceof Oh?(Mr("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Qh(t,o.key)):Ur()}}function Yh(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Mr("SyncEngine","New document in limbo: "+n),t.So.add(r),Jh(t))}function Jh(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new vi(ti.fromString(e)),r=t.Fo.next();t.Co.set(r,new Ph(n)),t.Do=t.Do.insert(n,r),Hc(t.remoteStore,new qa(uo(eo(n.path)),r,2,Or.o))}}function Zh(t,e,n){return h(this,void 0,void 0,(function(){var r,i,o,s;return f(this,(function(a){switch(a.label){case 0:return r=Br(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ku.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return h(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h;return f(this,(function(f){switch(f.label){case 0:n=Br(t),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Na.forEach(e,(function(e){return Na.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Na.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return f.sent(),[3,4];case 3:if(!Ra(r=f.sent()))throw r;return Mr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.kn.get(a),c=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(c),n.kn=n.kn.insert(a,h));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function tf(t,e){return h(this,void 0,void 0,(function(){var n,r;return f(this,(function(i){switch(i.label){case 0:return(n=Br(t)).currentUser.isEqual(e)?[3,3]:(Mr("SyncEngine","User change. New user:",e.toKey()),[4,Wu(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new xr(Rr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Zh(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function ef(t,e){var n=Br(t),r=n.Co.get(e);if(r&&r.bo)return ls().add(r.key);var i=ls(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function nf(t,e){return h(this,void 0,void 0,(function(){var n,r,i;return f(this,(function(o){switch(o.label){case 0:return[4,ec((n=Br(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Xh(n,e.targetId,i.To),i)]}}))}))}function rf(t){return h(this,void 0,void 0,(function(){var e;return f(this,(function(n){return[2,rc((e=Br(t)).localStore).then((function(t){return Zh(e,t)}))]}))}))}function of(t,e,n,r){return h(this,void 0,void 0,(function(){var i,o;return f(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=Br(t),r=Br(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):Na.resolve(null)}))}))}((i=Br(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,ih(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Wh(i,e,r||null),zh(i,e),function(t,e){Br(Br(t)._n).Gt(e)}(i.localStore,e)):Ur(),s.label=4;case 4:return[4,Zh(i,o)];case 5:return s.sent(),[3,7];case 6:Mr("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function sf(t,e){return h(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return f(this,(function(h){switch(h.label){case 0:return lf(n=Br(t)),pf(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,af(n,r.toArray())]);case 1:return i=h.sent(),n.$o=!0,[4,fh(n.remoteStore,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)a=s[o],Hc(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return $h(n,e),tc(n.localStore,e,!0)})),zc(n.remoteStore,e)})),[4,c]);case 4:return h.sent(),[4,af(n,u)];case 5:return h.sent(),function(t){var e=Br(t);e.Co.forEach((function(t,n){zc(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new ts(vi.comparator)}(n),n.$o=!1,[4,fh(n.remoteStore,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function af(t,e,n){return h(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h,l,p,d,v,g;return f(this,(function(f){switch(f.label){case 0:n=Br(t),r=[],i=[],o=0,s=e,f.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,Zu(n.localStore,uo(c[0]))]:[3,7]):[3,13];case 2:u=f.sent(),h=0,l=c,f.label=3;case 3:return h<l.length?(p=l[h],d=n.Po.get(p),[4,nf(n,d)]):[3,6];case 4:(v=f.sent()).snapshot&&i.push(v.snapshot),f.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,nc(n.localStore,a)];case 8:return g=f.sent(),[4,Zu(n.localStore,g)];case 9:return u=f.sent(),[4,Fh(n,uf(g),a,!1)];case 10:f.sent(),f.label=11;case 11:r.push(u),f.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function uf(t){return to(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function cf(t){var e=Br(t);return Br(Br(e.localStore).persistence).fn()}function hf(t,e,n,r){return h(this,void 0,void 0,(function(){var i,o,s;return f(this,(function(a){switch(a.label){case 0:return(i=Br(t)).$o?(Mr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,rc(i.localStore)];case 3:return o=a.sent(),s=vs.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Zh(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,tc(i.localStore,e,!0)];case 6:return a.sent(),$h(i,e,r),[3,8];case 7:Ur(),a.label=8;case 8:return[2]}}))}))}function ff(t,e,n){return h(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,l,p;return f(this,(function(d){switch(d.label){case 0:if(!(r=lf(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(Mr("SyncEngine","Adding an already active target "+s),[3,5]):[4,nc(r.localStore,s)]):[3,6];case 2:return a=d.sent(),[4,Zu(r.localStore,a)];case 3:return u=d.sent(),[4,Fh(r,uf(a),u.targetId,!1)];case 4:d.sent(),Hc(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return f(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,tc(r.localStore,t,!1).then((function(){zc(r.remoteStore,t),$h(r,t)})).catch(wu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,d.label=7;case 7:return h<l.length?(p=l[h],[5,c(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function lf(t){var e=Br(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Uh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ef.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bh.bind(null,e),e.vo._r=Eh.bind(null,e.eventManager),e.vo.Mo=_h.bind(null,e.eventManager),e}function pf(t){var e=Br(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Kh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Gh.bind(null,e),e}var df=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return h(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return this.R=Lc(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return zu(this.persistence,new Gu,t.initialUser,this.R)},t.prototype.qo=function(t){return new dc(gc.bs,this.R)},t.prototype.Bo=function(t){return new Nc},t.prototype.terminate=function(){return h(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),vf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return c(e,t),e.prototype.initialize=function(e){return h(this,void 0,void 0,(function(){var n=this;return f(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,ic(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,pf(this.Qo.syncEngine)];case 4:return r.sent(),[4,ih(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return zu(this.persistence,new Gu,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Eu(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Uu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?au.withCacheSize(this.cacheSizeBytes):au.DEFAULT;return new Fu(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,xc(),Pc(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Nc},e}(df),gf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return c(e,t),e.prototype.initialize=function(e){return h(this,void 0,void 0,(function(){var n,r=this;return f(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Ac?(this.sharedClientState.syncEngine={ui:of.bind(null,n),ai:hf.bind(null,n),hi:ff.bind(null,n),fn:cf.bind(null,n),ci:rf.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return h(r,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,sf(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=xc();if(!Ac.yt(e))throw new xr(Rr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Uu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ac(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(vf),yf=function(){function t(){}return t.prototype.initialize=function(t,e){return h(this,void 0,void 0,(function(){var n=this;return f(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return qh(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=tf.bind(null,this.syncEngine),[4,fh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new wh},t.prototype.createDatastore=function(t){var e,n=Lc(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new Rc(e));return function(t,e,n){return new Uc(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return qh(s.syncEngine,t,0)},o=Dc.yt()?new Dc:new kc,new Bc(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Lh(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return h(this,void 0,void 0,(function(){var e;return f(this,(function(n){switch(n.label){case 0:return e=Br(t),Mr("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Gc(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();var mf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),bf=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Aa,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return h(this,void 0,void 0,(function(){return f(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return h(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return h(this,void 0,void 0,(function(){var t,e,n,r;return f(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Nh(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return h(this,void 0,void 0,(function(){var t,e;return f(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return h(this,void 0,void 0,(function(){var e;return f(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return h(this,void 0,void 0,(function(){var t,e;return f(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return h(this,void 0,void 0,(function(){var e,n=this;return f(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new xr(Rr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return h(this,void 0,void 0,(function(){var n,r,i,o,s,a;return f(this,(function(u){switch(u.label){case 0:return n=Br(t),r=Fs(n.R)+"/documents",i={documents:e.map((function(t){return xs(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){qr(!!e.found),e.found.name,e.found.updateTime;var n=Ps(t,e.found.name),r=Cs(e.found.updateTime),i=new Ci({mapValue:{fields:e.found.fields}});return Ri.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){qr(!!e.missing),qr(!!e.readTime);var n=Ps(t,e.missing),r=Cs(e.readTime);return Ri.newNoDocument(n,r)}(t,e):Ur()}(n.R,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());qr(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Qo(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return h(this,void 0,void 0,(function(){var t,e=this;return f(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=vi.fromPath(n);e.mutations.push(new Xo(r,e.precondition(r)))})),[4,function(t,e){return h(this,void 0,void 0,(function(){var n,r,i;return f(this,(function(o){switch(o.label){case 0:return n=Br(t),r=Fs(n.R)+"/documents",i={writes:e.map((function(t){return qs(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Ur();e=Qr.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new xr(Rr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Po.updateTime(e):Po.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Qr.min()))throw new xr(Rr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Po.updateTime(e)}return Po.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),wf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Mc(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return h(t,void 0,void 0,(function(){var t,e,n=this;return f(this,(function(r){return t=new bf(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!li(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Jo(e)}return!1},t}(),If=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=yc.UNAUTHENTICATED,this.clientId=Gr.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return h(r,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return Mr("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return h(this,void 0,void 0,(function(){return f(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new xr(Rr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return h(t,void 0,void 0,(function(){var t,n;return f(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=vh(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Tf(t,e){return h(this,void 0,void 0,(function(){var n,r,i=this;return f(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Mr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return h(i,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Wu(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Ef(t,e){return h(this,void 0,void 0,(function(){var n,r;return f(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,_f(t)];case 1:return n=i.sent(),Mr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return h(this,void 0,void 0,(function(){var n,r;return f(this,(function(i){switch(i.label){case 0:return(n=Br(t)).asyncQueue.verifyOperationInProgress(),Mr("RemoteStore","RemoteStore received new credentials"),r=Yc(n),n.Or.add(3),[4,Gc(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Kc(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function _f(t){return h(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Mr("FirestoreClient","Using default OfflineComponentProvider"),[4,Tf(t,new df)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Sf(t){return h(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Mr("FirestoreClient","Using default OnlineComponentProvider"),[4,Ef(t,new yf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Af(t){return _f(t).then((function(t){return t.persistence}))}function Nf(t){return _f(t).then((function(t){return t.localStore}))}function kf(t){return Sf(t).then((function(t){return t.remoteStore}))}function Df(t){return Sf(t).then((function(t){return t.syncEngine}))}function Cf(t){return h(this,void 0,void 0,(function(){var e,n;return f(this,(function(r){switch(r.label){case 0:return[4,Sf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Mh.bind(null,e.syncEngine),n.onUnlisten=Vh.bind(null,e.syncEngine),n)]}}))}))}function Of(t,e,n){var r=this;void 0===n&&(n={});var i=new Aa;return t.asyncQueue.enqueueAndForget((function(){return h(r,void 0,void 0,(function(){var r;return f(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new mf({next:function(o){e.enqueueAndForget((function(){return Th(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new xr(Rr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new xr(Rr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Ah(eo(n.path),o,{includeMetadataChanges:!0,so:!0});return Ih(t,s)},[4,Cf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Rf(t,e,n){var r=this;void 0===n&&(n={});var i=new Aa;return t.asyncQueue.enqueueAndForget((function(){return h(r,void 0,void 0,(function(){var r;return f(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new mf({next:function(n){e.enqueueAndForget((function(){return Th(t,s)})),n.fromCache&&"server"===r.source?i.reject(new xr(Rr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Ah(n,o,{includeMetadataChanges:!0,so:!0});return Ih(t,s)},[4,Cf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var xf=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Pf=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Lf=new Map,Mf=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Ff=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(yc.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Vf=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),jf=function(){function t(t){var e=this;this.currentUser=yc.UNAUTHENTICATED,this.oc=new Aa,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Mr("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Mr("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Mr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(qr("string"==typeof n.accessToken),new Mf(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return h(n,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return qr(null===t||"string"==typeof t),new yc(t)},t}(),Uf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=yc.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),qf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Uf(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(yc.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Bf(t,e,n){if(!n)throw new xr(Rr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Kf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xr(Rr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Gf(t,e,n,r){if(!0===e&&!0===r)throw new xr(Rr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Hf(t){if(!vi.isDocumentKey(t))throw new xr(Rr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function zf(t){if(vi.isDocumentKey(t))throw new xr(Rr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Wf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Ur()}function $f(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xr(Rr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Wf(t);throw new xr(Rr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Qf(t,e){if(e<=0)throw new xr(Rr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Xf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new xr(Rr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new xr(Rr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Gf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Yf=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xf({}),this._settingsFrozen=!1,t instanceof Pf?(this._databaseId=t,this._credentials=new Ff):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new xr(Rr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pf(t.options.projectId)}(t),this._credentials=new jf(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new xr(Rr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new xr(Rr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xf(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Ff;switch(t.type){case"gapi":var e=t.client;return qr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new qf(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xr(Rr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=Lf.get(this))&&(Mr("ComponentProvider","Removing Datastore"),Lf.delete(this),t.terminate()),Promise.resolve();var t},t}(),Jf=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new tl(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Zf=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),tl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,eo(r))||this)._path=r,i.type="collection",i}return c(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Jf(this.firestore,null,new vi(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Zf);function el(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,p.m9)(t),Bf("collection","path",e),t instanceof Yf)return zf(n=ti.fromString.apply(ti,l([e],r))),new tl(t,null,n);if(!(t instanceof Jf||t instanceof tl))throw new xr(Rr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return zf(n=ti.fromString.apply(ti,l([t.path],r)).child(ti.fromString(e))),new tl(t.firestore,null,n)}function nl(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,p.m9)(t),1===arguments.length&&(e=Gr.u()),Bf("doc","path",e),t instanceof Yf)return Hf(n=ti.fromString.apply(ti,l([e],r))),new Jf(t,null,new vi(n));if(!(t instanceof Jf||t instanceof tl))throw new xr(Rr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Hf(n=t._path.child(ti.fromString.apply(ti,l([e],r)))),new Jf(t.firestore,t instanceof tl?t.converter:null,new vi(n))}function rl(t,e){return t=(0,p.m9)(t),e=(0,p.m9)(e),(t instanceof Jf||t instanceof tl)&&(e instanceof Jf||e instanceof tl)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function il(t,e){return t=(0,p.m9)(t),e=(0,p.m9)(e),t instanceof Zf&&e instanceof Zf&&t.firestore===e.firestore&&ho(t._query,e._query)&&t.converter===e.converter}var ol=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Mc(this,"async_queue_retry"),this.Ic=function(){var e=Pc();e&&Mr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Pc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Pc();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new Aa;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return h(this,void 0,void 0,(function(){var t,e=this;return f(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Ra(t=n.sent()))throw t;return Mr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Fr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=dh.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Ur()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return h(this,void 0,void 0,(function(){var t;return f(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function sl(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Aa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var al=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new ol,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return c(e,t),e.prototype._terminate=function(){return this._firestoreClient||cl(this),this._firestoreClient.terminate()},e}(Yf);function ul(t){return t._firestoreClient||cl(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function cl(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new xf(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new If(t._credentials,t._queue,r)}function hl(t,e,n){var r=this,i=new Aa;return t.asyncQueue.enqueue((function(){return h(r,void 0,void 0,(function(){var r;return f(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Tf(t,n)];case 1:return o.sent(),[4,Ef(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Rr.FAILED_PRECONDITION||t.code===Rr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function fl(t){if(t._initialized||t._terminated)throw new xr(Rr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ll=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new xr(Rr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ni(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),pl=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(ii.fromBase64String(e))}catch(e){throw new xr(Rr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(ii.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),dl=function(t){this._methodName=t},vl=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new xr(Rr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new xr(Rr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Hr(this._lat,t._lat)||Hr(this._long,t._long)},t}(),gl=/^__.*__$/,yl=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Ko(t,this.data,this.fieldMask,e,this.fieldTransforms):new Bo(t,this.data,e,this.fieldTransforms)},t}(),ml=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Ko(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function bl(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ur()}}var wl=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return Ul(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(bl(this.Nc)&&gl.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),Il=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Lc(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new wl({Nc:t,methodName:e,qc:n,path:ni.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Tl(t){var e=t._freezeSettings(),n=Lc(t._databaseId);return new Il(t._databaseId,!!e.ignoreUndefinedProperties,n)}function El(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Ml("Data must be an object, but it was:",s,r);var a,u,c=Pl(r,s);if(o.merge)a=new ri(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=Fl(e,l[f],n);if(!s.contains(p))throw new xr(Rr.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");ql(h,p)||h.push(p)}a=new ri(h),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new yl(new Ci(c),a,u)}var _l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(dl);function Sl(t,e,n){return new wl({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Al=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype._toFieldTransform=function(t){return new Ro(t.path,new _o)},e.prototype.isEqual=function(t){return t instanceof e},e}(dl),Nl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return c(e,t),e.prototype._toFieldTransform=function(t){var e=Sl(this,t,!0),n=this.Kc.map((function(t){return xl(t,e)})),r=new So(n);return new Ro(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(dl),kl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return c(e,t),e.prototype._toFieldTransform=function(t){var e=Sl(this,t,!0),n=this.Kc.map((function(t){return xl(t,e)})),r=new No(n);return new Ro(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(dl),Dl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return c(e,t),e.prototype._toFieldTransform=function(t){var e=new Do(t.R,bo(t.R,this.Qc));return new Ro(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(dl);function Cl(t,e,n,r){var i=t.Uc(1,e,n);Ml("Data must be an object, but it was:",i,r);var o=[],s=Ci.empty();Yr(r,(function(t,r){var a=jl(e,t,n);r=(0,p.m9)(r);var u=i.Oc(a);if(r instanceof _l)o.push(a);else{var c=xl(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new ri(o);return new ml(s,a,i.fieldTransforms)}function Ol(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[Fl(e,r,n)],u=[i];if(o.length%2!=0)throw new xr(Rr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Fl(e,o[c])),u.push(o[c+1]);for(var h=[],f=Ci.empty(),l=a.length-1;l>=0;--l)if(!ql(h,a[l])){var d=a[l],v=u[l];v=(0,p.m9)(v);var g=s.Oc(d);if(v instanceof _l)h.push(d);else{var y=xl(v,g);null!=y&&(h.push(d),f.set(d,y))}}var m=new ri(h);return new ml(f,m,s.fieldTransforms)}function Rl(t,e,n,r){return void 0===r&&(r=!1),xl(n,t.Uc(r?4:3,e))}function xl(t,e){if(Ll(t=(0,p.m9)(t)))return Ml("Unsupported field value:",e,t),Pl(t,e);if(t instanceof dl)return function(t,e){if(!bl(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=xl(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,p.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return bo(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=$r.fromDate(t);return{timestampValue:Ns(e.R,n)}}if(t instanceof $r)return n=new $r(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ns(e.R,n)};if(t instanceof vl)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pl)return{bytesValue:ks(e.R,t._byteString)};if(t instanceof Jf){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Os(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+Wf(t))}(t,e)}function Pl(t,e){var n={};return Jr(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yr(t,(function(t,r){var i=xl(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Ll(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof $r||t instanceof vl||t instanceof pl||t instanceof Jf||t instanceof dl)}function Ml(t,e,n){if(!Ll(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Wf(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function Fl(t,e,n){if((e=(0,p.m9)(e))instanceof ll)return e._internalPath;if("string"==typeof e)return jl(t,e);throw Ul("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Vl=new RegExp("[~\\*/\\[\\]]");function jl(t,e,n){if(e.search(Vl)>=0)throw Ul("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(ll.bind.apply(ll,l([void 0],e.split(".")))))._internalPath}catch(Bp){throw Ul("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Ul(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new xr(Rr.INVALID_ARGUMENT,(a+=". ")+t+u)}function ql(t,e){return t.some((function(t){return t.isEqual(e)}))}var Bl=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Jf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Kl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Gl("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Kl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Bl);function Gl(t,e){return"string"==typeof e?jl(t,e):e instanceof ll?e._internalPath:e._delegate._internalPath}var Hl=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),zl=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return c(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Wl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Gl("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Bl),Wl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(zl),$l=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Hl(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Wl(n._firestore,n._userDataWriter,r.key,r,new Hl(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xr(Rr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Wl(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Hl(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Wl(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Hl(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Ql(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Ql(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ur()}}function Xl(t,e){return t instanceof zl&&e instanceof zl?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof $l&&e instanceof $l&&t._firestore===e._firestore&&il(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Yl(t){if(ro(t)&&0===t.explicitOrderBy.length)throw new xr(Rr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Jl=function(){};function Zl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var tp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return c(e,t),e.prototype._apply=function(t){var e=Tl(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new xr(Rr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){ap(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var f=h[c];u.push(sp(r,t,f))}a={arrayValue:{values:u}}}else a=sp(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||ap(s,o),a=Rl(n,"where",s,"in"===o||"not-in"===o);var l=Vi.create(i,o,a);return function(t,e){if(e.g()){var n=oo(t);if(null!==n&&!n.isEqual(e.field))throw new xr(Rr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=io(t);null!==r&&up(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new xr(Rr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new xr(Rr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Zf(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Jl),ep=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return c(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new xr(Rr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new xr(Rr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Qi(e,n);return function(t,e){if(null===io(t)){var n=oo(t);null!==n&&up(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Zf(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Zi(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Jl),np=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return c(e,t),e.prototype._apply=function(t){return new Zf(t.firestore,t.converter,co(t._query,this.Hc,this.Jc))},e}(Jl),rp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return c(e,t),e.prototype._apply=function(t){var e=op(t,this.type,this.Yc,this.Xc);return new Zf(t.firestore,t.converter,function(t,e){return new Zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Jl),ip=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return c(e,t),e.prototype._apply=function(t){var e=op(t,this.type,this.Yc,this.Xc);return new Zf(t.firestore,t.converter,function(t,e){return new Zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Jl);function op(t,e,n,r){if(n[0]=(0,p.m9)(n[0]),n[0]instanceof Bl)return function(t,e,n,r,i){if(!r)throw new xr(Rr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=ao(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Ei(e,r.key));else{var c=r.data.field(u.field);if(ci(c))throw new xr(Rr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new xr(Rr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Wi(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Tl(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new xr(Rr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new xr(Rr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!so(t)&&-1!==c.indexOf("/"))throw new xr(Rr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(ti.fromString(c));if(!vi.isDocumentKey(h))throw new xr(Rr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new vi(h);a.push(Ei(e,f))}else{var l=Rl(n,r,c);a.push(l)}}return new Wi(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function sp(t,e,n){if("string"==typeof(n=(0,p.m9)(n))){if(""===n)throw new xr(Rr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!so(e)&&-1!==n.indexOf("/"))throw new xr(Rr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ti.fromString(n));if(!vi.isDocumentKey(r))throw new xr(Rr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ei(t,new vi(r))}if(n instanceof Jf)return Ei(t,n._key);throw new xr(Rr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Wf(n)+".")}function ap(t,e){if(!Array.isArray(t)||0===t.length)throw new xr(Rr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new xr(Rr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function up(t,e,n){if(!n.isEqual(e))throw new xr(Rr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var cp=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),gi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ai(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ui(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Ur()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Yr(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new vl(ai(t.latitude),ai(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=hi(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(fi(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=si(t);return new $r(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=ti.fromString(t);qr(na(n));var r=new Pf(n.get(1),n.get(3)),i=new vi(n.popFirst(5));return r.isEqual(e)||Fr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function hp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var fp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return c(e,t),e.prototype.convertBytes=function(t){return new pl(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Jf(this.firestore,null,e)},e}(cp),lp=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Tl(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=pp(t,this._firestore),i=hp(r.converter,e,n),o=El(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Po.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=pp(t,this._firestore);return o="string"==typeof(e=(0,p.m9)(e))||e instanceof ll?Ol(this._dataReader,"WriteBatch.update",s._key,e,n,r):Cl(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Po.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=pp(t,this._firestore);return this._mutations=this._mutations.concat(new Qo(e._key,Po.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new xr(Rr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function pp(t,e){if((t=(0,p.m9)(t)).firestore!==e)throw new xr(Rr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var dp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return c(e,t),e.prototype.convertBytes=function(t){return new pl(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Jf(this.firestore,null,e)},e}(cp);function vp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=$f(t,Jf);var o=$f(t.firestore,al),s=Tl(o);return yp(o,[("string"==typeof(e=(0,p.m9)(e))||e instanceof ll?Ol(s,"updateDoc",t._key,e,n,r):Cl(s,"updateDoc",t._key,e)).toMutation(t._key,Po.exists(!0))])}function gp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,p.m9)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||sl(i[a])||(s=i[a],a++);var u,c,l,d={includeMetadataChanges:s.includeMetadataChanges};if(sl(i[a])){var v=i[a];i[a]=null===(e=v.next)||void 0===e?void 0:e.bind(v),i[a+1]=null===(n=v.error)||void 0===n?void 0:n.bind(v),i[a+2]=null===(r=v.complete)||void 0===r?void 0:r.bind(v)}if(t instanceof Jf)c=$f(t.firestore,al),l=eo(t._key.path),u={next:function(e){i[a]&&i[a](mp(c,t,e))},error:i[a+1],complete:i[a+2]};else{var g=$f(t,Zf);c=$f(g.firestore,al),l=g._query;var y=new dp(c);u={next:function(t){i[a]&&i[a](new $l(c,y,g,t))},error:i[a+1],complete:i[a+2]},Yl(t._query)}return function(t,e,n,r){var i=this,o=new mf(r),s=new Ah(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return h(i,void 0,void 0,(function(){var e;return f(this,(function(n){switch(n.label){case 0:return e=Ih,[4,Cf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return h(i,void 0,void 0,(function(){var e;return f(this,(function(n){switch(n.label){case 0:return e=Th,[4,Cf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(ul(c),l,d,u)}function yp(t,e){return function(t,e){var n=this,r=new Aa;return t.asyncQueue.enqueueAndForget((function(){return h(n,void 0,void 0,(function(){var n;return f(this,(function(i){switch(i.label){case 0:return n=jh,[4,Df(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(ul(t),e)}function mp(t,e,n){var r=n.docs.get(e._key),i=new dp(t);return new zl(t,i,e._key,r,new Hl(n.hasPendingWrites,n.fromCache),e.converter)}var bp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return c(e,t),e.prototype.get=function(e){var n=this,r=pp(e,this._firestore),i=new dp(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new zl(n._firestore,i,r._key,t._document,new Hl(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Tl(t)}return t.prototype.get=function(t){var e=this,n=pp(t,this._firestore),r=new fp(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Ur();var i=t[0];if(i.isFoundDocument())return new Bl(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Bl(e._firestore,r,n._key,null,n.converter);throw Ur()}))},t.prototype.set=function(t,e,n){var r=pp(t,this._firestore),i=hp(r.converter,e,n),o=El(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=pp(t,this._firestore);return o="string"==typeof(e=(0,p.m9)(e))||e instanceof ll?Ol(this._dataReader,"Transaction.update",s._key,e,n,r):Cl(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=pp(t,this._firestore);return this._transaction.delete(e._key),this},t}());function wp(){if("undefined"==typeof Uint8Array)throw new xr(Rr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ip(){if("undefined"==typeof atob)throw new xr(Rr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Tp=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Ip(),new t(pl.fromBase64String(e))},t.fromUint8Array=function(e){return wp(),new t(pl.fromUint8Array(e))},t.prototype.toBase64=function(){return Ip(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return wp(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Ep=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){fl(t=$f(t,al));var n=ul(t),r=t._freezeSettings(),i=new yf;return hl(n,i,new vf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){fl(t=$f(t,al));var e=ul(t),n=t._freezeSettings(),r=new yf;return hl(e,r,new gf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new xr(Rr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Aa;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return h(e,void 0,void 0,(function(){var e;return f(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return h(this,void 0,void 0,(function(){var e;return f(this,(function(n){switch(n.label){case 0:return Da.yt()?(e=t+"main",[4,Da.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Uu(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),_p=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Pf||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Vr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=$f(t,Yf))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Vr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s,a;if("string"==typeof r.mockUserToken)s=r.mockUserToken,a=yc.MOCK_USER;else{s=(0,p.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new xr(Rr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new yc(u)}t._credentials=new Vf(new Mf(s,a))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return h(e,void 0,void 0,(function(){var e,n;return f(this,(function(r){switch(r.label){case 0:return[4,Af(t)];case 1:return e=r.sent(),[4,kf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Br(t);return e.Or.delete(0),Kc(e)}(n))]}}))}))}))}(ul($f(this._delegate,al)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return h(e,void 0,void 0,(function(){var e,n;return f(this,(function(r){switch(r.label){case 0:return[4,Af(t)];case 1:return e=r.sent(),[4,kf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return h(this,void 0,void 0,(function(){var e;return f(this,(function(n){switch(n.label){case 0:return(e=Br(t)).Or.add(0),[4,Gc(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(ul($f(this._delegate,al)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Gf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Aa;return t.asyncQueue.enqueueAndForget((function(){return h(e,void 0,void 0,(function(){var e;return f(this,(function(r){switch(r.label){case 0:return e=Hh,[4,Df(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(ul($f(this._delegate,al)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new mf(e);return t.asyncQueue.enqueueAndForget((function(){return h(n,void 0,void 0,(function(){var e;return f(this,(function(n){switch(n.label){case 0:return e=function(t,e){Br(t).Gr.add(e),e.next()},[4,Cf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return h(n,void 0,void 0,(function(){var e;return f(this,(function(n){switch(n.label){case 0:return e=function(t,e){Br(t).Gr.delete(e)},[4,Cf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(ul(t=$f(t,al)),sl(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new xr(Rr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Vp(this,el(this._delegate,t))}catch(t){throw Cp(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Dp(this,nl(this._delegate,t))}catch(t){throw Cp(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Lp(this,function(t,e){if(t=$f(t,Yf),Bf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xr(Rr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Zf(t,null,function(t){return new Zi(ti.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Cp(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Aa;return t.asyncQueue.enqueueAndForget((function(){return h(n,void 0,void 0,(function(){var n;return f(this,(function(i){switch(i.label){case 0:return[4,function(t){return Sf(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new wf(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(ul(t),(function(n){return e(new bp(t,n))}))}(this._delegate,(function(n){return t(new Ap(e,n))}))},t.prototype.batch=function(){var t=this;return ul(this._delegate),new Np(new lp(this._delegate,(function(e){return yp(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new xr(Rr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new xr(Rr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Sp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return c(e,t),e.prototype.convertBytes=function(t){return new Tp(new pl(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Dp.eu(e,this.firestore,null)},e}(cp);var Ap=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Sp(t)}return t.prototype.get=function(t){var e=this,n=jp(t);return this._delegate.get(n).then((function(t){return new xp(e._firestore,new zl(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=jp(t);return n?(Kf("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=jp(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,l([s,e,n],i)),this},t.prototype.delete=function(t){var e=jp(t);return this._delegate.delete(e),this},t}(),Np=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=jp(t);return n?(Kf("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=jp(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,l([s,e,n],i)),this},t.prototype.delete=function(t){var e=jp(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),kp=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Wl(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Pp(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Sp(e),n),i.set(n,o)),o},t}();kp.su=new WeakMap;var Dp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Sp(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new xr(Rr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Jf(n._delegate,r,new vi(e)))},t.eu=function(e,n,r){return new t(n,new Jf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Vp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Vp(this.firestore,el(this._delegate,t))}catch(t){throw Cp(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,p.m9)(t))instanceof Jf&&rl(this._delegate,t)},t.prototype.set=function(t,e){e=Kf("DocumentReference.set",e);try{return function(t,e,n){t=$f(t,Jf);var r=$f(t.firestore,al),i=hp(t.converter,e,n);return yp(r,[El(Tl(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Po.none())])}(this._delegate,t,e)}catch(t){throw Cp(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?vp(this._delegate,t):vp.apply(void 0,l([this._delegate,t,e],n))}catch(t){throw Cp(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return yp($f((t=this._delegate).firestore,al),[new Qo(t._key,Po.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Op(e),i=Rp(e,(function(e){return new xp(t.firestore,new zl(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return gp(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=$f(t,Jf);var e=$f(t.firestore,al),n=ul(e),r=new dp(e);return function(t,e){var n=this,r=new Aa;return t.asyncQueue.enqueueAndForget((function(){return h(n,void 0,void 0,(function(){var n;return f(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return h(this,void 0,void 0,(function(){var r,i;return f(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Br(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new xr(Rr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=vh(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Nf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new zl(e,r,t._key,n,new Hl(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=$f(t,Jf);var e=$f(t.firestore,al);return Of(ul(e),t._key,{source:"server"}).then((function(n){return mp(e,t,n)}))}(this._delegate):function(t){t=$f(t,Jf);var e=$f(t.firestore,al);return Of(ul(e),t._key).then((function(n){return mp(e,t,n)}))}(this._delegate)).then((function(t){return new xp(e.firestore,new zl(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(kp.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Cp(t,e,n){return t.message=t.message.replace(e,n),t}function Op(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!sl(r))return r}return{}}function Rp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=sl(t[0])?t[0]:sl(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var xp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Dp(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Xl(this._delegate,t._delegate)},t}(),Pp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(xp),Lp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Sp(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Zl(this._delegate,function(t,e,n){var r=e,i=Gl("where",t);return new tp(i,r,n)}(e,n,r)))}catch(e){throw Cp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Zl(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Gl("orderBy",t);return new ep(r,n)}(e,n)))}catch(e){throw Cp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Zl(this._delegate,function(t){return Qf("limit",t),new np("limit",t,"F")}(e)))}catch(e){throw Cp(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Zl(this._delegate,function(t){return Qf("limitToLast",t),new np("limitToLast",t,"L")}(e)))}catch(e){throw Cp(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Zl(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rp("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw Cp(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Zl(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rp("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw Cp(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Zl(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ip("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw Cp(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Zl(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ip("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw Cp(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return il(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=$f(t,Zf);var e=$f(t.firestore,al),n=ul(e),r=new dp(e);return function(t,e){var n=this,r=new Aa;return t.asyncQueue.enqueueAndForget((function(){return h(n,void 0,void 0,(function(){var n;return f(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return h(this,void 0,void 0,(function(){var r,i,o,s,a;return f(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,ec(t,e,!0)];case 1:return a=u.sent(),r=new Rh(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=vh(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,Nf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new $l(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=$f(t,Zf);var e=$f(t.firestore,al),n=ul(e),r=new dp(e);return Rf(n,t._query,{source:"server"}).then((function(n){return new $l(e,r,t,n)}))}(this._delegate):function(t){t=$f(t,Zf);var e=$f(t.firestore,al),n=ul(e),r=new dp(e);return Yl(t._query),Rf(n,t._query).then((function(n){return new $l(e,r,t,n)}))}(this._delegate)).then((function(t){return new Fp(e.firestore,new $l(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Op(e),i=Rp(e,(function(e){return new Fp(t.firestore,new $l(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return gp(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(kp.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Mp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Pp(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Fp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Lp(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Pp(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Mp(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Pp(n._firestore,r))}))},t.prototype.isEqual=function(t){return Xl(this._delegate,t._delegate)},t}(),Vp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return c(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Dp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Dp(this.firestore,void 0===t?nl(this._delegate):nl(this._delegate,t))}catch(t){throw Cp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=$f(t.firestore,al),r=nl(t),i=hp(t.converter,e);return yp(n,[El(Tl(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Po.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Dp(e.firestore,t)}))},e.prototype.isEqual=function(t){return rl(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(kp.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Lp);function jp(t){return $f(t,Jf)}var Up=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(ll.bind.apply(ll,l([void 0],t)))}return t.documentId=function(){return new t(ni.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,p.m9)(t))instanceof ll&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),qp=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Al("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new _l("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Nl("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new kl("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Dl("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();var Bp,Kp=n(8886),Gp={Firestore:_p,GeoPoint:vl,Timestamp:$r,Blob:Tp,Transaction:Ap,WriteBatch:Np,DocumentReference:Dp,DocumentSnapshot:xp,Query:Lp,QueryDocumentSnapshot:Pp,QuerySnapshot:Fp,CollectionReference:Vp,FieldPath:Up,FieldValue:qp,setLogLevel:function(t){var e;e=t,Pr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Kp.wA("firestore",(function(t){return function(t,e){return new _p(t,new al(t,e),new Ep)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Gp)))})(Bp=a.Z),Bp.registerVersion("@firebase/firestore","2.4.0");s.Z.apps.length?s.Z.app():s.Z.initializeApp({apiKey:"AIzaSyCVKarF8r3q2b2wYAX1DWgBcDeJLCm-Poc",authDomain:"voicelive-project.firebaseapp.com",projectId:"voicelive-project",storageBucket:"voicelive-project.appspot.com",messagingSenderId:"308677755258",appId:"1:308677755258:web:a70187043f385c7a2656c3",databaseURL:"https://voicelive-project.firebaseio.com"});n(8093);var Hp=n(5893);function zp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zp(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $p(t){var e=t.Component,n=t.pageProps;return(0,Hp.jsx)(i.a,{theme:o.Z,children:(0,Hp.jsx)(e,Wp({},n))})}},9254:function(t,e){"use strict";e.Z={pink:"#F12152",navy:"#1D2E3C",darkNavy:"#00070c",blue:"#4378f7",white:"#FFFFFF",black:"#000000",gray:"#c5c0c2",waitingBg:"#2d4b6560",onAirBg:"#65061c26",whiteShadow:"0px 1px 5px 3px #72727290",blueShadow:"0px 1px 3px 3px #668dea90",pinkShadow:"0px 1px 3px 3px #F1215290",blackShadow:"0px 1px 5px 3px rgba(0, 0, 0, 0.1)",textWhiteShadow:"0 0 5px #ffffffb7, 0 0 5px #ffffff8b, 0 0 10px #ffffffc7"}},1780:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(2906)}])},8093:function(){},4155:function(t){var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"===typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var a,u=[],c=!1,h=-1;function f(){c&&a&&(c=!1,a.length?u=a.concat(u):h=-1,u.length&&l())}function l(){if(!c){var t=s(f);c=!0;for(var e=u.length;e;){for(a=u,u=[];++h<e;)a&&a[h].run();h=-1,e=u.length}a=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function d(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||c||s(l)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},4942:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:function(){return r}})},7462:function(t,e,n){"use strict";function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n.d(e,{Z:function(){return r}})}},function(t){var e=function(e){return t(t.s=e)};t.O(0,[774,179],(function(){return e(1780),e(4651)}));var n=t.O();_N_E=n}]);